import{ad as We,f as Xe,r as i,j as e,H as k,ae as Ye,O as N,Z as Je,z as Fe,af as Ke,a8 as Ze,ag as B,ah as Me,w as Qe,v as _e,l as es,ai as ss,aj as ts,ak as as,al as Pe,am as rs,an as ls,ao as is,I as Ee,n as ds,y as ns,V as os,aa as Te,ap as Ae,a as cs,J as xs,aq as ms}from"./vendor-B8hWb8lf.js";import{u as us,e as ps,f as gs,h as fs,i as hs,j as bs,k as ys}from"./index-CTefgPQJ.js";import"./vendor-libs-BUKHmL5v.js";import"./firebase-DrKyEM-o.js";function ks(){var M,K,Z,Q,_,ee,se,te,ae,re,le,ie,de,ne,oe,ce,xe,me,ue,pe,ge,fe,he,be,ye,je,ve,Ne,we,ke,Ce,De,Se,Re;const{shareId:P}=We(),$=Xe(),{user:b}=us(),[g,Ie]=i.useState(null),[a,Le]=i.useState(null),[H,Ue]=i.useState({name:"",email:""}),[G,q]=i.useState(!0),[z,E]=i.useState(null),[j,O]=i.useState("profile"),[C,V]=i.useState([]),[T,W]=i.useState(!1),[X,A]=i.useState(null),[I,Be]=i.useState({hasMore:!1,lastDoc:null,currentPageSize:0,requestedPageSize:20}),[Y,y]=i.useState(!1),[D,S]=i.useState(!1),[R,u]=i.useState(""),[L,U]=i.useState(null),[$e,w]=i.useState(!1),[r,F]=i.useState(null),J=i.useCallback(async()=>{try{q(!0);const s=await ps(P,b.uid);if(!s.success){E(s.error);return}Ie(s.data);const t=await gs(s.data.patientId);t.success&&Ue(t.data);const d=await fs(s.data.patientId);if(!d.success){E(d.error);return}Le(d.data)}catch(s){console.error("Error fetching shared profile:",s),E("Failed to load patient profile. Please try again.")}finally{q(!1)}},[P,b.uid]),v=i.useCallback(async(s=!1)=>{if(g)try{W(!0),A(null);const t=s?I.lastDoc:null,d=await hs(b.uid,g.patientId,t,20);d.success?(V(s?l=>[...l,...d.data]:d.data),Be(d.pagination)):A(d.error)}catch(t){console.error("Error fetching medical records:",t),A("Failed to load medical records.")}finally{W(!1)}},[g,b.uid,I.lastDoc]);i.useEffect(()=>{if(!L)return;const s=setTimeout(()=>U(null),5e3);return()=>clearTimeout(s)},[L]),i.useEffect(()=>{b&&J()},[b,P,J]),i.useEffect(()=>{g&&j==="medical-records"&&v()},[g,j,v]);const He=async s=>{if(g){u("");try{S(!0);const t=await bs(b.uid,g.patientId,s);t.success?(y(!1),v(),U({type:"success",message:"Medical record added successfully"})):u(t.error||"Failed to add medical record")}catch(t){console.error("Error adding medical record:",t),u("Failed to add medical record. Please try again.")}finally{S(!1)}}},Ge=async s=>{if(r){u("");try{S(!0);const t=await ys(String(r.id),b.uid,s);t.success?(w(!1),F(null),v(),U({type:"success",message:"Medical record updated successfully"})):u(t.error||"Failed to update medical record")}catch(t){console.error("Error updating medical record:",t),u("Failed to update medical record. Please try again.")}finally{S(!1)}}},qe=({toast:s})=>s?cs.createPortal(e.jsx("div",{className:"fixed top-20 right-4 z-[9999] pointer-events-none",children:e.jsxs("div",{role:"alert",className:`pointer-events-auto glass-elevated border soft-divider rounded-xl px-5 py-4 text-sm sm:text-base font-semibold shadow-xl flex items-start gap-3 ${s.type==="success"?"text-green-400":"text-red-400"}`,children:[s.type==="success"?e.jsx(xs,{className:"mt-0.5 shrink-0"}):e.jsx(ms,{className:"mt-0.5 shrink-0"}),e.jsx("span",{className:"text-text",children:s.message})]})}),document.body):null,ze=()=>{const[s,t]=i.useState({visitDate:new Date().toISOString().split("T")[0],diagnosis:"",symptoms:"",medicines:"",prescribedTests:"",followUpNotes:""}),d=l=>{l.preventDefault();const n={...s,symptoms:s.symptoms.split(",").map(x=>x.trim()).filter(x=>x),medicines:s.medicines.split(",").map(x=>x.trim()).filter(x=>x),prescribedTests:s.prescribedTests.split(",").map(x=>x.trim()).filter(x=>x)};He(n)};return i.useEffect(()=>{if(!Y)return;const l=n=>{n.key==="Escape"&&y(!1)};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[]),Y?e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm p-4 sm:p-6 flex items-center justify-center",onClick:()=>y(!1),children:e.jsx("div",{className:"glass-elevated rounded-2xl sm:rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border soft-divider",onClick:l=>l.stopPropagation(),children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text",children:"Add Medical Record"}),e.jsx("button",{onClick:()=>y(!1),className:"w-9 h-9 rounded-lg glass border soft-divider text-secondary hover-glow-primary flex items-center justify-center","aria-label":"Close",children:e.jsx(Te,{className:"text-sm"})})]}),R&&e.jsx("div",{className:"mb-3 sm:mb-4 glass border soft-divider rounded-lg p-3 text-red-400 bg-red-500/10",children:R}),e.jsxs("form",{onSubmit:d,className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Visit Date"}),e.jsx("input",{type:"date",value:s.visitDate,onChange:l=>{t(n=>({...n,visitDate:l.target.value})),u("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Diagnosis"}),e.jsx("input",{type:"text",value:s.diagnosis,onChange:l=>{t(n=>({...n,diagnosis:l.target.value})),u("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",placeholder:"Enter diagnosis",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Symptoms (comma-separated)"}),e.jsx("textarea",{value:s.symptoms,onChange:l=>{t(n=>({...n,symptoms:l.target.value})),u("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Headache, Nausea, Fever"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Medicines (comma-separated)"}),e.jsx("textarea",{value:s.medicines,onChange:l=>{t(n=>({...n,medicines:l.target.value})),u("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Paracetamol 500mg, Ibuprofen 200mg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Prescribed Tests (comma-separated)"}),e.jsx("textarea",{value:s.prescribedTests,onChange:l=>{t(n=>({...n,prescribedTests:l.target.value})),u("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Blood Test, X-Ray, MRI"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Follow-up Notes"}),e.jsx("textarea",{value:s.followUpNotes,onChange:l=>{t(n=>({...n,followUpNotes:l.target.value})),u("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"3",placeholder:"Any additional notes or follow-up instructions"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2 sm:pt-4",children:[e.jsx("button",{type:"submit",disabled:D,className:"flex-1 glass-cta px-4 py-2 flex items-center justify-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",children:D?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{}),"Save Record"]})}),e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 glass rounded-lg border soft-divider text-text hover-glow-primary",children:"Cancel"})]})]})]})})}):null},Oe=()=>{var l,n,x;const[s,t]=i.useState({visitDate:r!=null&&r.visitDate?new Date(r.visitDate).toISOString().split("T")[0]:"",diagnosis:(r==null?void 0:r.diagnosis)||"",symptoms:((l=r==null?void 0:r.symptoms)==null?void 0:l.join(", "))||"",medicines:((n=r==null?void 0:r.medicines)==null?void 0:n.join(", "))||"",prescribedTests:((x=r==null?void 0:r.prescribedTests)==null?void 0:x.join(", "))||"",followUpNotes:(r==null?void 0:r.followUpNotes)||""});i.useEffect(()=>{var o,c,m;r&&t({visitDate:r.visitDate?new Date(r.visitDate).toISOString().split("T")[0]:"",diagnosis:r.diagnosis||"",symptoms:((o=r.symptoms)==null?void 0:o.join(", "))||"",medicines:((c=r.medicines)==null?void 0:c.join(", "))||"",prescribedTests:((m=r.prescribedTests)==null?void 0:m.join(", "))||"",followUpNotes:r.followUpNotes||""})},[]);const d=o=>{o.preventDefault();const c={...s,symptoms:s.symptoms.split(",").map(m=>m.trim()).filter(m=>m),medicines:s.medicines.split(",").map(m=>m.trim()).filter(m=>m),prescribedTests:s.prescribedTests.split(",").map(m=>m.trim()).filter(m=>m)};Ge(c)};return $e?e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm p-4 sm:p-6 flex items-center justify-center",onClick:()=>w(!1),children:e.jsx("div",{className:"glass-elevated rounded-2xl sm:rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border soft-divider",onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text",children:"Edit Medical Record"}),e.jsx("button",{onClick:()=>{w(!1),F(null)},className:"w-9 h-9 rounded-lg glass border soft-divider text-secondary hover-glow-primary flex items-center justify-center","aria-label":"Close",children:e.jsx(Te,{className:"text-sm"})})]}),R&&e.jsx("div",{className:"mb-3 sm:mb-4 glass border soft-divider rounded-lg p-3 text-red-400 bg-red-500/10",children:R}),e.jsxs("form",{onSubmit:d,className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Visit Date"}),e.jsx("input",{type:"date",value:s.visitDate,onChange:o=>t(c=>({...c,visitDate:o.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Diagnosis"}),e.jsx("input",{type:"text",value:s.diagnosis,onChange:o=>t(c=>({...c,diagnosis:o.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",placeholder:"Enter diagnosis",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Symptoms (comma-separated)"}),e.jsx("textarea",{value:s.symptoms,onChange:o=>t(c=>({...c,symptoms:o.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Headache, Nausea, Fever"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Medicines (comma-separated)"}),e.jsx("textarea",{value:s.medicines,onChange:o=>t(c=>({...c,medicines:o.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Paracetamol 500mg, Ibuprofen 200mg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Prescribed Tests (comma-separated)"}),e.jsx("textarea",{value:s.prescribedTests,onChange:o=>t(c=>({...c,prescribedTests:o.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Blood Test, X-Ray, MRI"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Follow-up Notes"}),e.jsx("textarea",{value:s.followUpNotes,onChange:o=>t(c=>({...c,followUpNotes:o.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"3",placeholder:"Any additional notes or follow-up instructions"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2 sm:pt-4",children:[e.jsx("button",{type:"submit",disabled:D,className:"flex-1 glass-cta px-4 py-2 flex items-center justify-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",children:D?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{}),"Update Record"]})}),e.jsx("button",{type:"button",onClick:()=>{w(!1),F(null)},className:"px-4 py-2 glass rounded-lg border soft-divider text-text hover-glow-primary",children:"Cancel"})]})]})]})})}):null},f=({title:s,children:t,className:d="",icon:l})=>e.jsxs("div",{className:`glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary ${d}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-[rgba(var(--primary-rgb)/0.15)] text-primary flex items-center justify-center",children:l&&e.jsx(l,{className:"text-base"})}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-text",children:s})]}),t]}),p=({label:s,value:t,icon:d})=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border soft-divider glass",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[d&&e.jsx(d,{className:"text-primary text-sm shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-text truncate",children:s})]}),e.jsx("span",{className:"text-sm text-secondary font-medium max-w-[60%] text-right truncate",children:t||"Not specified"})]}),h=({items:s,colorClass:t="bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"})=>e.jsx("div",{className:"flex flex-wrap gap-2",children:s&&s.length>0?s.map((d,l)=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t}`,children:d},l)):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"None specified"})}),Ve=({record:s})=>{const t=()=>{if(!s.createdAt)return!1;const d=s.createdAt.toDate();return(new Date().getTime()-d.getTime())/(1e3*60)<30};return e.jsxs("div",{className:"glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base sm:text-lg font-semibold text-text",children:s.diagnosis||"Medical Record"}),e.jsxs("p",{className:"text-xs sm:text-sm text-secondary",children:[s.visitDate?new Date(s.visitDate).toLocaleDateString():"No date specified",s.createdAt?` at ${new Date(s.createdAt.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:""," ","â€¢ ",s.doctorName||"Unknown Doctor"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t()&&e.jsx("button",{onClick:()=>{F(s),w(!0)},className:"p-2 text-primary hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ds,{className:"text-sm"})}),s.fileName&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-2 text-primary hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ns,{className:"text-sm"})}),e.jsx("button",{className:"p-2 text-primary hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(os,{className:"text-sm"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Symptoms"}),e.jsx(h,{items:s.symptoms,colorClass:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Medicines"}),e.jsx(h,{items:s.medicines,colorClass:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})]}),s.prescribedTests&&s.prescribedTests.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Prescribed Tests"}),e.jsx(h,{items:s.prescribedTests,colorClass:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"})]}),s.followUpNotes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Follow-up Notes"}),e.jsx("p",{className:"text-sm text-secondary glass p-3 rounded-lg border soft-divider",children:s.followUpNotes})]})]})]})};return G?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{className:"animate-spin text-4xl text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading patient profile..."})]})}):z?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-8 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-800 dark:text-red-200 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-600 dark:text-red-300 mb-4",children:z}),e.jsx("button",{onClick:()=>$("/doctor"),className:"px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90",children:"Back to Dashboard"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 py-6 space-y-6 aurora-bg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("button",{onClick:()=>$(-1),className:"inline-flex items-center gap-2 glass rounded-full px-3 py-1.5 text-sm text-secondary hover-glow-primary",children:[e.jsx(Ye,{}),e.jsx("span",{className:"font-medium",children:"Back to Patient List"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs glass border soft-divider text-secondary",children:["Shared on ",((Z=(K=(M=g==null?void 0:g.sharedAt)==null?void 0:M.toDate)==null?void 0:K.call(M))==null?void 0:Z.toLocaleDateString())||"Unknown"]})})]}),e.jsx("div",{className:"glass-elevated rounded-3xl p-5 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 rounded-2xl bg-gradient-to-br from-primary to-accent text-white flex items-center justify-center shadow-lg",children:e.jsx(N,{className:"text-xl sm:text-2xl"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-text truncate",children:H.name||"Patient Name"}),e.jsxs("p",{className:"text-secondary flex items-center gap-2 text-sm truncate",children:[e.jsx(Je,{className:"text-xs"}),e.jsx("span",{className:"truncate",children:H.email||"No email provided"})]})]})]})}),e.jsxs("div",{className:"glass rounded-xl p-1 border soft-divider flex gap-1",children:[e.jsxs("button",{onClick:()=>O("profile"),className:`flex-1 flex items-center justify-center gap-1.5 sm:gap-2 py-1.5 sm:py-2 px-2.5 sm:px-4 rounded-lg font-medium transition-colors text-xs sm:text-sm ${j==="profile"?"bg-[rgba(var(--primary-rgb)/0.15)] text-primary":"text-secondary hover:text-text"}`,children:[e.jsx(N,{className:"text-xs sm:text-sm"}),"Profile Information"]}),e.jsxs("button",{onClick:()=>O("medical-records"),className:`flex-1 flex items-center justify-center gap-1.5 sm:gap-2 py-1.5 sm:py-2 px-2.5 sm:px-4 rounded-lg font-medium transition-colors text-xs sm:text-sm ${j==="medical-records"?"bg-[rgba(var(--primary-rgb)/0.15)] text-primary":"text-secondary hover:text-text"}`,children:[e.jsx(Fe,{className:"text-xs sm:text-sm"}),"Medical Records"]})]}),j==="profile"&&a&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx(f,{title:"Basic Information",icon:N,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{label:"Full Name",value:(Q=a.basic)==null?void 0:Q.fullName,icon:N}),e.jsx(p,{label:"Gender",value:(_=a.basic)==null?void 0:_.gender,icon:Ke}),e.jsx(p,{label:"Date of Birth",value:(ee=a.basic)!=null&&ee.dob?new Date(a.basic.dob).toLocaleDateString():null,icon:Ze}),e.jsx(p,{label:"Contact Number",value:(se=a.basic)==null?void 0:se.contactNumber,icon:B})]})}),e.jsx(f,{title:"Physical Details",icon:Me,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{label:"Height",value:(te=a.basic)!=null&&te.height?`${a.basic.height.value} ${a.basic.height.unit}`:null,icon:Me}),e.jsx(p,{label:"Weight",value:(ae=a.basic)!=null&&ae.weight?`${a.basic.weight.value} ${a.basic.weight.unit}`:null,icon:Qe}),e.jsx(p,{label:"Blood Group",value:(re=a.basic)==null?void 0:re.bloodGroup,icon:_e})]})}),e.jsx(f,{title:"Emergency Contact",icon:B,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{label:"Name",value:(ie=(le=a.basic)==null?void 0:le.emergencyContact)==null?void 0:ie.name,icon:N}),e.jsx(p,{label:"Phone",value:(ne=(de=a.basic)==null?void 0:de.emergencyContact)==null?void 0:ne.number,icon:B}),e.jsx(p,{label:"Relation",value:(ce=(oe=a.basic)==null?void 0:oe.emergencyContact)==null?void 0:ce.relation})]})}),e.jsx(f,{title:"Chronic Conditions",icon:es,children:e.jsx(h,{items:(xe=a.medical)==null?void 0:xe.chronicConditions,colorClass:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})}),e.jsx(f,{title:"Allergies",icon:ss,children:e.jsx(h,{items:(me=a.medical)==null?void 0:me.allergies,colorClass:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300"})}),e.jsx(f,{title:"Current Medications",icon:ts,children:e.jsx(h,{items:(ue=a.medical)==null?void 0:ue.currentMedications,colorClass:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"})}),e.jsx(f,{title:"Disabilities",icon:as,children:e.jsx(h,{items:(pe=a.medical)==null?void 0:pe.disabilities,colorClass:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"})}),e.jsx(f,{title:"Vision & Hearing",icon:Pe,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Pe,{className:"text-primary"}),"Wears Glasses"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${(fe=(ge=a.medical)==null?void 0:ge.vision)!=null&&fe.wearsGlasses?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(be=(he=a.medical)==null?void 0:he.vision)!=null&&be.wearsGlasses?"Yes":"No"})]}),((je=(ye=a.medical)==null?void 0:ye.vision)==null?void 0:je.wearsGlasses)&&e.jsxs(e.Fragment,{children:[e.jsx(p,{label:"Left Eye",value:(Ne=(ve=a.medical)==null?void 0:ve.vision)==null?void 0:Ne.leftEye}),e.jsx(p,{label:"Right Eye",value:(ke=(we=a.medical)==null?void 0:we.vision)==null?void 0:ke.rightEye})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(rs,{className:"text-primary"}),"Uses Hearing Aids"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${(Ce=a.medical)!=null&&Ce.hearingAids?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(De=a.medical)!=null&&De.hearingAids?"Yes":"No"})]})]})}),e.jsx(f,{title:"Lifestyle Habits",icon:ls,children:e.jsx(h,{items:(Se=a.lifestyle)==null?void 0:Se.habits,colorClass:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})}),e.jsx(f,{title:"Dietary Preferences",icon:is,children:e.jsx(h,{items:(Re=a.lifestyle)==null?void 0:Re.preferences,colorClass:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"})})]}),j==="medical-records"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text",children:"Medical Records"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-secondary",children:[C.length," record(s) found"]}),e.jsxs("button",{onClick:()=>y(!0),className:"glass-cta px-4 py-2 flex items-center gap-2",children:[e.jsx(Ee,{className:"text-sm"}),e.jsx("span",{className:"text-sm",children:"Add Medical Record"})]})]})]}),X&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-600 dark:text-red-300",children:X}),e.jsx("button",{onClick:()=>v(),className:"mt-2 text-sm text-red-700 dark:text-red-400 hover:underline",children:"Try again"})]}),T&&C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"animate-spin text-4xl text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading medical records..."})]}):C.length>0?e.jsxs("div",{className:"space-y-4",children:[C.map((s,t)=>e.jsx(Ve,{record:s},s.id||t)),I.hasMore&&e.jsx("div",{className:"text-center py-4",children:e.jsx("button",{onClick:()=>v(!0),disabled:T,className:"px-6 py-2 glass rounded-lg border soft-divider text-text hover-glow-primary disabled:opacity-50 disabled:cursor-not-allowed",children:T?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"animate-spin"}),"Loading..."]}):"Load More Records"})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fe,{className:"text-6xl text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Medical Records"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No medical records found for this patient."}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity mx-auto",children:[e.jsx(Ee,{className:"text-sm"}),"Add First Medical Record"]})]})]}),!a&&!G&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"text-6xl text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No Profile Data"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This patient hasn't completed their profile yet."})]})]}),e.jsx(ze,{}),e.jsx(Oe,{}),e.jsx(qe,{toast:L})]})}export{ks as default};
