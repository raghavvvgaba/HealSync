import{r as d,j as e,N as Me,u as re,c as Xs,L as K,F as It,d as Et,e as Pt,f as Mt,g as $e,h as Le,M as Rt,i as oe,k as Oe,l as Ft,m as Qs,n as Je,o as Ce,p as Be,q as Tt,s as Ht,v as Lt,w as Ze,x as es,y as ss,z as fe,A as ye,B as Ot,C as ts,D as te,E as De,G as ge,H as Js,I as We,J as Zs,K as Ve,O as et,P as Bt,Q as Z,S as be,T as Ke,U as Ut,V as Gt,W as st,X as tt,Y as at,Z as Us,_ as rt,$ as it,a0 as lt,a1 as nt,a2 as ot,a3 as $t,a4 as _t,a5 as qt,a6 as ct,a7 as zt,a8 as Yt,a9 as as,aa as dt,ab as qe,ac as Ue,ad as mt,ae as xt,af as ut,ag as Ge,ah as ht,ai as pt,aj as gt,ak as Xe,a as Wt,al as Vt,R as je,am as Kt,an as ze,ao as ft,ap as Xt,aq as Q,ar as Qt,as as Jt}from"./vendor-DRuNPSpM.js";import{i as Zt,g as ea,a as sa,d as U,b as Y,c as xe,q as ve,w as ne,e as Ne,s as Ae,f as ta,u as _e,o as aa,h as ra,j as ia,k as la,l as na,m as rs,n as oa}from"./firebase-D2pP0SoM.js";import{m as R,A as is}from"./framer-c8srM8jw.js";import{G as ca}from"./utils-BpRkNtKl.js";import{I as H}from"./ui-xQiNyT4V.js";import"./vendor-libs-BOxQgAAl.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();const da={apiKey:"AIzaSyDpeisD1tArmExEdsn46D2QbOZWz_XSCr0",authDomain:"healsync-801eb.firebaseapp.com",projectId:"healsync-801eb",storageBucket:"healsync-801eb.firebasestorage.app",messagingSenderId:"702905905248",appId:"1:702905905248:web:dcfdd9933dac76c9475305"},bt=Zt(da),ae=ea(bt),L=sa(bt);function ma(){const s="BCDFGHJKLMNPQRSTVWXYZ",a="AEIOU";let t="";for(let i=0;i<4;i++)i%2===0?t+=s[Math.floor(Math.random()*s.length)]:t+=a[Math.floor(Math.random()*a.length)];const l=Math.floor(1e3+Math.random()*9e3);return`DR-${t}-${l}`}async function xa(s){try{const a=xe(L,"users"),t=ve(a,ne("doctorId","==",s));return!(await Ne(t)).empty}catch(a){throw console.error("Error checking doctor ID:",a),a}}async function ua(){let s,a=0;const t=10;do if(s=ma(),a++,a>=t)throw new Error("Unable to generate unique doctor ID after multiple attempts");while(await xa(s));return s}function ha(s){return/^DR-[BCDFGHJKLMNPQRSTVWXYZAEIOU]{4}-\d{4}$/.test(s)}async function pa(s){try{if(!ha(s))throw new Error("Invalid doctor ID format");const a=xe(L,"users"),t=ve(a,ne("doctorId","==",s),ne("role","==","doctor")),l=await Ne(t);if(l.empty)return null;const i=l.docs[0];return{id:i.id,...i.data()}}catch(a){throw console.error("Error finding doctor by ID:",a),a}}async function ga(s,a){try{const t=s.split("_");if(t.length!==2)return{success:!1,error:"Invalid share link format."};const[l,i]=t;if(l!==a)return{success:!1,error:"You are not authorized to view this patient's profile."};const r=U(L,"shared_profiles",s),o=await Y(r);if(!o.exists())return{success:!1,error:"Shared profile not found."};const c=o.data();return c.doctorId!==a?{success:!1,error:"You are not authorized to view this patient's profile."}:c.status!=="active"?{success:!1,error:"This patient profile is no longer shared with you."}:{success:!0,data:c}}catch(t){return console.error("Error fetching shared profile record:",t),{success:!1,error:"Failed to load patient profile. Please try again."}}}async function fa(s){try{const a=U(L,"users",s),t=await Y(a);if(t.exists()){const l=t.data();return{success:!0,data:{name:l.name||"Unknown Patient",email:l.email||""}}}else return{success:!1,error:"Patient information not found."}}catch(a){return console.error("Error fetching patient basic info:",a),{success:!1,error:"Failed to load patient information."}}}async function ba(s){try{const a=xe(L,"shared_profiles"),t=ve(a,ne("doctorId","==",s),ne("status","==","active")),l=await Ne(t),i=[];return l.forEach(r=>{i.push({id:r.id,...r.data()})}),{success:!0,data:i}}catch(a){return console.error("Error fetching shared profiles:",a),{success:!1,error:a.message}}}async function ya(s){try{const a=U(L,"userProfile",s),t=await Y(a);return t.exists()?{success:!0,data:t.data()}:{success:!1,error:"Patient profile not found."}}catch(a){return console.error("Error fetching patient profile:",a),{success:!1,error:"Failed to load patient profile."}}}async function ja(s,a,t){try{const l=`${s}_${a}`,i=U(L,"shared_profiles",l),r=await Y(i);if(!r.exists())return{success:!1,error:"You don't have access to this patient's profile."};const o=r.data();if(o.status!=="active"||o.doctorId!==s)return{success:!1,error:"Your access to this patient's profile has been revoked or is invalid."};const c=U(L,"users",s),u=await Y(c);if(!u.exists())return{success:!1,error:"Doctor information not found."};const x=u.data(),f={patientId:a,doctorId:s,doctorIdCode:o.doctorIdCode,doctorName:o.doctorName||x.name,visitDate:t.visitDate,symptoms:t.symptoms||[],diagnosis:t.diagnosis||"",medicines:t.medicines||[],prescribedTests:t.prescribedTests||[],followUpNotes:t.followUpNotes||"",...t.fileName&&{fileName:t.fileName,fileType:t.fileType,fileUrl:t.fileUrl},createdAt:Ae(),lastModifiedAt:Ae(),createdBy:s,shareRecordId:l,isActive:!0},n=xe(L,"medicalRecords");return{success:!0,recordId:(await ta(n,f)).id,message:"Medical record added successfully."}}catch(l){return console.error("Error adding medical record:",l),{success:!1,error:"Failed to add medical record. Please try again."}}}async function va(s,a,t){try{const l=U(L,"medicalRecords",s),i=await Y(l);if(!i.exists())return{success:!1,error:"Medical record not found."};const r=i.data(),o=U(L,"shared_profiles",r.shareRecordId),c=await Y(o);if(!c.exists()||c.data().status!=="active")return{success:!1,error:"You don't have access to this patient's profile."};if(r.createdBy!==a)return{success:!1,error:"You can only update medical records you created."};const u=r.createdAt;let x;if(u&&u.seconds)x=u.seconds*1e3;else if(typeof u=="number")x=u;else return{success:!1,error:"Cannot verify record creation time. Update not allowed."};const f=Date.now(),n=30*60*1e3;if(f-x>n)return{success:!1,error:"Medical record cannot be updated after 30 minutes of creation."};const j={...t,lastModifiedAt:Ae()};return await _e(l,j),{success:!0,message:"Medical record updated successfully."}}catch(l){return console.error("Error updating medical record:",l),{success:!1,error:"Failed to update medical record."}}}async function Na(s,a,t=null,l=20){try{const i=`${s}_${a}`,r=U(L,"shared_profiles",i),o=await Y(r);if(!o.exists()||o.data().status!=="active")return{success:!1,error:"You don't have access to this patient's profile."};const c=xe(L,"medicalRecords"),u=ve(c,ne("patientId","==",a)),x=await Ne(u),f=[];x.forEach(b=>{f.push({id:b.id,...b.data()})});const n=f.filter(b=>b.isActive!==!1);n.sort((b,v)=>{var k,m,N,w;const C=new Date(b.visitDate||((m=(k=b.createdAt)==null?void 0:k.toDate)==null?void 0:m.call(k))||0);return new Date(v.visitDate||((w=(N=v.createdAt)==null?void 0:N.toDate)==null?void 0:w.call(N))||0)-C});const j=n.slice(0,l),S=n.length>l;return{success:!0,data:j,pagination:{hasMore:S,lastDoc:null,currentPageSize:j.length,requestedPageSize:l}}}catch(i){return console.error("Error fetching medical records:",i),{success:!1,error:"Failed to fetch medical records."}}}const yt=d.createContext(),wa=({children:s})=>{const[a,t]=d.useState(null),[l,i]=d.useState(null),[r,o]=d.useState(null),[c,u]=d.useState(!0);d.useEffect(()=>{const b=aa(ae,async v=>{v?(t(v),await x(v.uid)):(t(null),i(null),o(null)),u(!1)});return()=>b()},[]);const x=async b=>{try{const v=U(L,"users",b),C=await Y(v);if(C.exists()){const D=C.data();i(D.role);const k=U(L,"userProfile",b),m=await Y(k);m.exists()?o({...D,...m.data()}):o(D)}}catch(v){console.error("Error fetching user profile:",v)}},f=async(b,v,C,D)=>{try{const k=await la(ae,v,C);await na(k.user,{displayName:b});let m=null;D==="doctor"&&(m=await ua());const N=U(L,"users",k.user.uid),w={name:b,email:v,role:D,createdAt:new Date().toISOString(),onboardingCompleted:!1};return m&&(w.doctorId=m),await rs(N,w),i(D),o({...w,onboardingCompleted:!1}),k}catch(k){throw console.error("Signup error:",k),k}},n=async(b,v)=>{try{return await ia(ae,b,v)}catch(C){throw console.error("Login error:",C),C}},j=async()=>{await ra(ae),t(null),i(null),o(null)},S=async()=>{a!=null&&a.uid&&await x(a.uid)};return e.jsx(yt.Provider,{value:{user:a,userRole:l,userProfile:r,loading:c,signup:f,login:n,logout:j,refreshUserProfile:S},children:s})},_=()=>d.useContext(yt);function Gs({children:s,requiredRole:a}){const{user:t,userRole:l,loading:i}=_();return i?e.jsx("div",{className:"text-center py-10",children:"Loading..."}):t?a&&l!==a?l==="doctor"?e.jsx(Me,{to:"/doctor"}):l==="user"?e.jsx(Me,{to:"/user"}):e.jsx(Me,{to:"/"}):s:e.jsx(Me,{to:"/login"})}const jt="/assets/HealSyncLogo-Bq37opN5.png",me=()=>{var C;const[s,a]=d.useState(localStorage.getItem("theme")||"light"),[t,l]=d.useState(!1),[i,r]=d.useState(!1),o=d.useRef(null),{user:c,userRole:u,logout:x}=_(),f=re(),{register:n,handleSubmit:j,reset:S}=Xs();d.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(s),localStorage.setItem("theme",s)},[s]),d.useEffect(()=>{const D=k=>{o.current&&!o.current.contains(k.target)&&r(!1)};return i?document.addEventListener("mousedown",D):document.removeEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[i]);const b=()=>{a(D=>D==="light"?"dark":"light")},v=async()=>{try{await x(),console.log("Logged out"),f("/login")}catch(D){console.log("Logout failed",D)}};return e.jsx("nav",{className:"w-full px-2 sm:px-4 text-text sticky top-3 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:`relative flex flex-row justify-between items-center gap-2 rounded-2xl 
          bg-white/70 dark:bg-black/70 
          supports-[backdrop-filter]:bg-white/50 dark:supports-[backdrop-filter]:bg-black/60 
          backdrop-blur border border-primary shadow-xl overflow-visible px-3 sm:px-4 py-2`,children:[e.jsx(K,{to:"/",children:e.jsxs(R.div,{className:"flex items-center gap-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},children:[e.jsx("img",{src:jt,alt:"HealSync Logo",className:"h-8 w-8 object-contain"}),e.jsx("span",{className:"text-xl font-bold text-primary hidden sm:block",children:"HealSync"})]})}),e.jsxs(R.div,{className:"flex flex-row items-center gap-2 sm:gap-6 w-auto",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[c?e.jsx("div",{className:"flex flex-row items-center gap-2 relative w-auto",children:e.jsxs("div",{className:"relative",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-primary text-background font-bold text-lg cursor-pointer",children:(C=c==null?void 0:c.displayName)==null?void 0:C.charAt(0).toUpperCase()}),e.jsx(is,{children:t&&e.jsxs(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-40 max-w-[80vw] sm:w-56 sm:max-w-xs rounded-xl shadow-2xl z-[100] p-2 sm:p-4 text-sm pointer-events-auto 
                        bg-white dark:bg-black border border-secondary/60`,style:{minWidth:"140px"},children:[e.jsx("div",{className:"font-semibold text-text mb-1 truncate",children:c==null?void 0:c.displayName}),e.jsx("div",{className:"text-xs text-gray-500 mb-3 capitalize truncate",children:u||"Loading..."}),e.jsx("button",{onClick:v,className:"w-full text-left px-3 py-2 rounded-md bg-accent text-background hover:opacity-90 transition",children:"Logout"})]})})]})}):e.jsxs("div",{className:"flex flex-row items-center gap-2 w-auto",children:[e.jsx(K,{to:"/signup",className:"text-xs sm:text-sm md:text-base px-3 sm:px-4 py-1.5 sm:py-2 rounded-md sm:rounded-xl bg-primary text-white hover:scale-105 transition text-center min-w-[60px] sm:min-w-[80px]",children:"Sign Up"}),e.jsx(K,{to:"/login",className:"text-xs sm:text-sm md:text-base px-3 sm:px-4 py-1.5 sm:py-2 rounded-md sm:rounded-xl bg-accent text-white hover:scale-105 transition text-center min-w-[60px] sm:min-w-[80px]",children:"Login"})]}),e.jsx("button",{onClick:b,className:"p-2 sm:p-2 rounded-full border border-gray-300 dark:border-gray-600 hover:scale-110 transition","aria-label":"Toggle Theme",children:s==="light"?e.jsx(It,{}):e.jsx(Et,{})})]})]})})})},ls=()=>{const s=d.useMemo(()=>new Date().getFullYear(),[]);return e.jsx("footer",{className:"w-full mt-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:e.jsxs("div",{className:"relative rounded-2xl px-5 md:px-8 py-8 md:py-10 glass-elevated overflow-hidden",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-[0.35] bg-gradient-to-br from-primary/25 via-accent/10 to-transparent"}),e.jsxs("div",{className:"relative flex flex-col gap-6 md:gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 max-w-sm",children:[e.jsx("img",{src:jt,alt:"HealSync Logo",className:"h-6 w-6 object-contain"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-semibold tracking-tight bg-gradient-to-r from-text to-text/70 dark:from-white dark:to-white/70 bg-clip-text text-transparent",children:"HealSync"}),e.jsx("p",{className:"text-xs md:text-sm text-secondary leading-relaxed",children:"Unified, secure & shareable health records."})]})]}),e.jsxs("nav",{"aria-label":"Social",className:"flex gap-6 md:gap-7 items-center",children:[e.jsx("a",{href:"https://github.com/raghavvvgaba/HealSync",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub",className:"text-secondary hover:text-accent transition-colors text-xl focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 rounded-full",children:e.jsx(Pt,{})}),e.jsx("a",{href:"https://linkedin.com/in/raghavvvgaba",target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn",className:"text-secondary hover:text-accent transition-colors text-xl focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 rounded-full",children:e.jsx(Mt,{})}),e.jsx("a",{href:"mailto:raghavvvgaba@gmail.com","aria-label":"Email",className:"text-secondary hover:text-accent transition-colors text-xl focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 rounded-full",children:e.jsx($e,{})})]})]}),e.jsx("div",{className:"mt-6 mb-5 h-px bg-gradient-to-r from-transparent via-text/10 dark:via-white/10 to-transparent"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row items-start md:items-center justify-between gap-4 text-[11px] md:text-xs text-secondary",children:[e.jsxs("p",{children:["¬© ",s," HealSync. All rights reserved."]}),e.jsx("p",{className:"flex items-center gap-1 text-secondary/70",children:"Built by Raghav Gaba"})]})]})})})},ka=[{id:"profiles",icon:e.jsx(oe,{className:"text-3xl md:text-4xl text-accent"}),title:"Comprehensive Health Profiles",blurb:"Complete health information management for patients and doctors.",points:["Basic info, medical history & lifestyle data","Emergency contacts & accessibility needs","Blood group, allergies & current medications"],accent:"from-accent/20 via-accent/10 to-transparent"},{id:"sharing",icon:e.jsx(Oe,{className:"text-3xl md:text-4xl text-accent"}),title:"Secure Doctor Sharing",blurb:"Share your complete health profile with doctors using unique Doctor IDs.",points:["Simple DR-XXXX-1234 ID system","Instant access for authorized doctors","Revoke access anytime"],accent:"from-primary/25 via-primary/10 to-transparent"},{id:"records",icon:e.jsx(Ft,{className:"text-3xl md:text-4xl text-accent"}),title:"Medical Records Management",blurb:"Doctors can add & manage comprehensive medical records for their patients.",points:["Diagnosis, symptoms & prescribed medications","Test recommendations & follow-up notes","Secure access with audit trails"],accent:"from-accent/30 via-accent/10 to-transparent"},{id:"ai",icon:e.jsx(Qs,{className:"text-3xl md:text-4xl text-accent"}),title:"AI Health Assistant",blurb:"Get instant answers to health questions and general medical guidance.",points:["24/7 health information support","General wellness advice","Medical term explanations"],accent:"from-primary/30 via-primary/10 to-transparent"}],Sa=[{icon:e.jsx(Qs,{className:"text-accent"}),title:"Create Account",text:"Sign up as a patient or doctor and get started immediately."},{icon:e.jsx(oe,{className:"text-accent"}),title:"Complete Profile",text:"Fill in your health information, medical history & emergency contacts."},{icon:e.jsx(Oe,{className:"text-accent"}),title:"Share with Doctors",text:"Use simple Doctor IDs (DR-XXXX-1234) to share your profile securely."},{icon:e.jsx(Je,{className:"text-accent"}),title:"Manage Health Together",text:"Doctors can view your profile and add medical records after visits."}],Ca=[{quote:"Finally, a simple way to share my complete health history with new doctors. No more carrying paper files!",name:"Sarah M.",role:"Patient"},{quote:"HealSync makes it easy to access my patients' medical history and add visit notes securely.",name:"Dr. Johnson",role:"Family Physician"},{quote:"The AI assistant helped me understand my prescription better. Great feature for quick health questions.",name:"Mike R.",role:"Patient"}],Da=[{question:"Is my health data secure with HealSync?",answer:"Yes! HealSync uses Firebase's secure infrastructure with role-based access controls. Only doctors you explicitly share with can access your data."},{question:"How do I share my profile with a doctor?",answer:"Ask your doctor for their unique Doctor ID (format: DR-XXXX-1234), then use the 'Share with Doctor' button on your profile to grant them access."},{question:"Can doctors add medical records to my profile?",answer:"Yes, once you've shared your profile with a doctor, they can add medical records including diagnosis, symptoms, medications, and follow-up notes."},{question:"Is HealSync free to use?",answer:"Yes, HealSync is currently free for both patients and healthcare providers. We're focused on building a great product first."}],Re=({eyebrow:s,title:a,sub:t})=>e.jsxs("div",{className:"mb-10 text-center max-w-3xl mx-auto",children:[s&&e.jsx(R.span,{initial:{opacity:0,y:8},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"inline-block text-xs tracking-widest uppercase font-semibold text-accent/80 mb-3",children:s}),e.jsx(R.h2,{initial:{opacity:0,y:14},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-3xl md:text-4xl font-bold bg-gradient-to-br from-text to-text/70 dark:from-white dark:to-white/70 bg-clip-text text-transparent",children:a}),t&&e.jsx(R.p,{initial:{opacity:0,y:14},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mt-4 text-base md:text-lg text-secondary max-w-2xl mx-auto",children:t})]}),Aa=({feature:s,idx:a})=>e.jsxs(R.div,{initial:{opacity:0,y:24,scale:.98},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.4},transition:{duration:.55,delay:a*.08},className:"relative group rounded-2xl p-6 md:p-7 glass-elevated lift-on-hover shine-on-hover overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-br from-accent/10 via-transparent to-primary/10"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 relative z-10",children:[e.jsx("span",{className:"flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 via-surface/60 to-surface shadow-inner border border-white/10",children:s.icon}),e.jsx("h3",{className:"text-xl font-semibold text-text dark:text-white",children:s.title})]}),e.jsx("p",{className:"text-secondary text-sm md:text-base mb-4 relative z-10",children:s.blurb}),e.jsx("ul",{className:"space-y-2 text-sm relative z-10",children:s.points.map((t,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-text/90 dark:text-white/90",children:[e.jsx("span",{className:"mt-[5px] w-1.5 h-1.5 rounded-full bg-accent shadow-[0_0_0_3px_rgba(251,191,36,0.25)]"}),e.jsx("span",{children:t})]},l))}),e.jsx("div",{className:`pointer-events-none absolute -top-1/2 left-0 right-0 h-full blur-3xl opacity-50 bg-gradient-to-b ${s.accent}`})]}),Ia=({step:s,index:a})=>e.jsxs(R.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:{duration:.55,delay:a*.1},className:"relative flex flex-col gap-4 p-6 rounded-2xl glass-elevated lift-on-hover",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-gradient-to-br from-accent/30 to-primary/30 text-accent text-xl font-bold border border-white/10 shadow-inner",children:s.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:s.title}),e.jsx("p",{className:"text-secondary text-sm mt-1",children:s.text})]})]}),e.jsx("span",{className:"absolute -top-3 -right-3 text-[11px] px-2 py-1 rounded-full bg-gradient-to-r from-primary/40 to-accent/40 backdrop-blur-md border border-white/10 text-white/90 font-semibold shadow",children:a+1})]}),Ea=({t:s,idx:a})=>e.jsxs(R.div,{initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.55,delay:a*.08},className:"relative rounded-2xl p-6 glass-elevated shine-on-hover",children:[e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-primary/15 via-transparent to-accent/20 opacity-60"}),e.jsxs("div",{className:"relative",children:[e.jsxs("p",{className:"text-sm md:text-base text-text/90 dark:text-white/90 leading-relaxed italic",children:['"',s.quote,'"']}),e.jsxs("div",{className:"mt-5",children:[e.jsx("p",{className:"font-semibold text-text dark:text-white",children:s.name}),e.jsx("p",{className:"text-xs text-secondary tracking-wide",children:s.role})]})]})]}),Pa=({question:s,answer:a})=>{const[t,l]=d.useState(!1);return e.jsxs("div",{className:"rounded-xl border soft-divider overflow-hidden backdrop-blur-sm bg-surface/60 dark:bg-surface/40 border-white/10",children:[e.jsxs("button",{onClick:()=>l(!t),className:"w-full flex justify-between items-center px-5 py-4 text-left text-base md:text-lg font-semibold text-text dark:text-white hover:bg-white/40 dark:hover:bg-white/5 transition-colors",children:[e.jsx("span",{children:s}),e.jsx("span",{className:"text-accent text-xl leading-none",children:t?"‚àí":"+"})]}),e.jsx(is,{initial:!1,children:t&&e.jsx(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.35,ease:"easeInOut"},className:"overflow-hidden",children:e.jsx("div",{className:"px-5 pb-5 text-sm md:text-base text-secondary leading-relaxed",children:a})},"faqcontent")})]})},Ma=()=>{const{user:s,userRole:a}=_(),t=re(),l=()=>{t(s?a==="doctor"?"/doctor":"/user":"/signup")};return d.useMemo(()=>new Date().getFullYear(),[]),e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsxs("div",{className:"aurora-bg min-h-screen w-full overflow-x-hidden text-text dark:text-white selection:bg-accent/30 selection:text-text",children:[e.jsxs("section",{className:"relative flex flex-col justify-center items-center min-h-[92vh] px-6 pt-28 md:pt-32 text-center",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute w-[38rem] h-[38rem] -top-40 -left-40 rounded-full bg-gradient-to-br from-primary/35 to-accent/20 blur-3xl opacity-40 animate-pulse"}),e.jsx("div",{className:"absolute w-[30rem] h-[30rem] top-1/3 -right-40 rounded-full bg-gradient-to-tl from-accent/30 to-primary/20 blur-3xl opacity-40 animate-[pulse_9s_ease-in-out_infinite_alternate]"})]}),e.jsxs(R.div,{initial:{opacity:0,y:28},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"max-w-4xl mx-auto",children:[e.jsxs(R.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full glass text-xs tracking-wide font-medium text-accent shadow hover-glow-accent",children:[e.jsx(Le,{className:"text-accent"})," Secure ‚Ä¢ Share ‚Ä¢ Thrive"]}),e.jsx("h1",{className:"mt-6 text-4xl md:text-6xl font-extrabold leading-tight bg-[linear-gradient(92deg,var(--color-text),rgba(var(--primary-rgb)/0.85))] dark:bg-[linear-gradient(92deg,#fff,rgba(var(--primary-rgb)/0.85))] bg-clip-text text-transparent",children:"Your Complete Health Profile, Digitized"}),e.jsx("p",{className:"mt-6 text-base md:text-xl text-secondary max-w-2xl mx-auto leading-relaxed",children:"HealSync helps patients create comprehensive health profiles and share them securely with doctors. Simple, secure, and always accessible."}),e.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("button",{onClick:l,className:"glass-cta px-7 py-3.5 text-base font-semibold shadow-lg hover:shadow-xl active:scale-[0.97] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent",children:s?"Go to Dashboard":"Get Started Free"}),e.jsx("a",{href:"#features",className:"px-7 py-3.5 rounded-xl font-semibold text-sm md:text-base bg-white/70 dark:bg-white/5 backdrop-blur-md border border-white/20 hover:bg-white/90 dark:hover:bg-white/10 transition-colors text-text dark:text-white lift-on-hover",children:"Explore Features"})]}),e.jsx("div",{className:"mt-10 grid grid-cols-2 sm:grid-cols-4 gap-4 max-w-2xl mx-auto text-[11px] md:text-xs text-secondary",children:["Doctor ID System","Profile Sharing","Medical Records","AI Assistant"].map(i=>e.jsx("div",{className:"px-3 py-2 rounded-lg glass text-secondary/80 dark:text-secondary backdrop-blur-md border border-white/10",children:i},i))})]}),e.jsx(R.button,{type:"button",onClick:()=>{const i=document.getElementById("features");i&&i.scrollIntoView({behavior:"smooth"})},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:1,duration:.55},className:"absolute bottom-8 md:bottom-10 w-10 h-10 rounded-full flex items-center justify-center text-accent hover:bg-accent/10 transition-all","aria-label":"Scroll to features",children:e.jsx("svg",{className:"w-5 h-5 animate-bounce",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("section",{id:"features",className:"relative py-24 px-6",children:[e.jsx(Re,{eyebrow:"Capabilities",title:"Why Choose HealSync?",sub:"Everything you need to create, manage & securely share your health information with healthcare providers."}),e.jsxs("div",{className:"max-w-7xl mx-auto grid md:grid-cols-2 xl:grid-cols-3 gap-8",children:[ka.map((i,r)=>e.jsx(Aa,{feature:i,idx:r},i.id)),e.jsxs(R.div,{initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"relative rounded-2xl p-8 md:p-10 flex flex-col justify-between overflow-hidden glass-elevated col-span-full xl:col-span-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/20 via-primary/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-4 text-text dark:text-white flex items-center gap-3",children:[e.jsx(Le,{className:"text-accent"})," Built on Security"]}),e.jsx("p",{className:"text-secondary text-sm md:text-base leading-relaxed mb-6",children:"Your health data is protected with Firebase's enterprise-grade security, role-based access controls, and encrypted data transmission."}),e.jsx("ul",{className:"grid grid-cols-1 gap-3 text-sm",children:["Firebase Authentication","Role-based access control","Encrypted data transmission","Secure sharing permissions"].map(i=>e.jsxs("li",{className:"flex items-center gap-2 text-text/90 dark:text-white/90",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent"})," ",i]},i))})]}),e.jsx("div",{className:"mt-8 flex flex-wrap gap-3",children:["Firebase","Secure","GDPR Ready","Encrypted"].map(i=>e.jsx("span",{className:"text-[11px] tracking-wide px-3 py-1 rounded-full glass border border-white/10 text-secondary/80",children:i},i))})]})]})]}),e.jsxs("section",{className:"relative py-28 px-6",children:[e.jsx(Re,{eyebrow:"Workflow",title:"Simple & Secure Health Management",sub:"A straightforward process to create, maintain and share your health profile with healthcare providers."}),e.jsx("div",{className:"max-w-6xl mx-auto grid sm:grid-cols-2 lg:grid-cols-4 gap-6",children:Sa.map((i,r)=>e.jsx(Ia,{step:i,index:r},i.title))})]}),e.jsxs("section",{className:"relative py-24 px-6",children:[e.jsx(Re,{eyebrow:"Voices",title:"Trusted By Patients & Healthcare Providers",sub:"Real experiences from people using HealSync to manage their health information."}),e.jsx("div",{className:"max-w-6xl mx-auto grid md:grid-cols-3 gap-8",children:Ca.map((i,r)=>e.jsx(Ea,{t:i,idx:r},i.name))})]}),e.jsx("section",{className:"relative py-28 px-6",children:e.jsx(R.div,{initial:{opacity:0,scale:.96},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},className:"relative max-w-4xl mx-auto rounded-3xl overflow-hidden p-[1.5px] bg-gradient-to-br from-primary/40 via-accent/40 to-primary/10",children:e.jsxs("div",{className:"relative rounded-3xl p-10 md:p-16 bg-[radial-gradient(circle_at_30%_20%,rgba(var(--primary-rgb)/0.25),rgba(var(--surface-rgb)/0.5)_60%)] backdrop-blur-xl border border-white/15",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none mix-blend-overlay opacity-40 bg-[linear-gradient(120deg,rgba(255,255,255,0.08),transparent_60%)]"}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx(Rt,{className:"text-5xl md:text-6xl text-accent mx-auto mb-6 drop-shadow"}),e.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-6 leading-tight",children:"Ready To Organize Your Health Information?"}),e.jsx("p",{className:"text-secondary text-base md:text-lg mb-10 max-w-2xl mx-auto",children:"Create your comprehensive health profile today and share it securely with your healthcare providers when needed."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("button",{onClick:l,className:"glass-cta px-8 py-4 font-semibold text-base md:text-lg",children:s?"Go To Dashboard":"Create Your Account"}),e.jsx("a",{href:"#faq",className:"px-8 py-4 rounded-xl font-semibold text-sm md:text-base bg-white/70 dark:bg-white/5 backdrop-blur-md border border-white/20 hover:bg-white/90 dark:hover:bg-white/10 transition-colors text-text dark:text-white lift-on-hover",children:"Questions?"})]})]})]})})}),e.jsxs("section",{id:"faq",className:"relative py-24 px-6",children:[e.jsx(Re,{eyebrow:"Answers",title:"Frequently Asked Questions",sub:"Have more questions? Reach out after creating an account & we'll help."}),e.jsx("div",{className:"max-w-4xl mx-auto space-y-4",children:Da.map((i,r)=>e.jsx(Pa,{question:i.question,answer:i.answer},i.question))})]}),e.jsx(ls,{})]})]})};async function Ra(s,a){try{return console.log("Attempting to save to Firestore:",{userId:s,profileData:a}),console.log("Current auth user:",ae.currentUser),console.log("Auth state:",ae.currentUser?"authenticated":"not authenticated"),await rs(U(L,"userProfile",s),a,{merge:!0}),console.log("Successfully saved to Firestore"),{success:!0}}catch(t){return console.error("Error adding/updating user profile:",t),console.error("Error details:",t.code,t.message),{success:!1,error:t.message}}}async function Ie(s){try{const a=U(L,"userProfile",s),t=await Y(a);return t.exists()?{success:!0,data:t.data()}:{success:!1,error:"User profile not found"}}catch(a){return console.error("Error fetching user profile:",a),{success:!1,error:a.message}}}async function Fa(s,a){try{return await _e(U(L,"userProfile",s),a),{success:!0}}catch(t){return console.error("Error editing user profile:",t),{success:!1,error:t.message}}}async function Ta(s,a){try{const t=await pa(a);if(!t)return{success:!1,error:"Doctor not found. Please check the Doctor ID and try again."};const l=t.id,i=`${l}_${s}`,r=U(L,"shared_profiles",i),o=await Y(r);if(o.exists()&&o.data().status==="active")return{success:!1,error:"Profile already shared with this doctor."};const c={patientId:s,doctorId:l,doctorIdCode:a,doctorName:t.name||"Unknown Doctor",sharedAt:Ae(),status:"active"},u=U(L,"shared_profiles",i);return await rs(u,c),{success:!0,shareId:i,doctorName:t.name}}catch(t){return console.error("Error sharing profile with doctor:",t),{success:!1,error:t.message}}}async function Ha(s){try{const a=xe(L,"shared_profiles"),t=ve(a,ne("patientId","==",s),ne("status","==","active")),l=await Ne(t),i=[];return l.forEach(r=>{i.push({id:r.id,...r.data()})}),{success:!0,data:i}}catch(a){return console.error("Error fetching patient shared profiles:",a),{success:!1,error:a.message}}}async function La(s,a){try{const t=`${a}_${s}`,l=U(L,"shared_profiles",t);return(await Y(l)).exists()?(await _e(l,{status:"revoked",revokedAt:Ae()}),{success:!0,message:"Profile access successfully revoked."}):{success:!1,error:"Share record not found."}}catch(t){return console.error("Error revoking profile access:",t),{success:!1,error:t.message}}}async function vt(s,a=null,t=20,l=!1){try{const i=xe(L,"medicalRecords");let r=ve(i,ne("patientId","==",s),oa(t));const o=await Ne(r),c=[];let u=null;o.forEach(n=>{const j=n.data();!l&&j.isActive===!1||(c.push({id:n.id,...j}),u=n)});const x=c.sort((n,j)=>{var v,C;const S=new Date(n.visitDate||((v=n.createdAt)==null?void 0:v.toDate())||0);return new Date(j.visitDate||((C=j.createdAt)==null?void 0:C.toDate())||0)-S}),f=c.length===t;return{success:!0,data:x,hasMore:f,lastDoc:u}}catch(i){return console.error("Error fetching patient medical records:",i),i.code==="failed-precondition"?{success:!1,error:"Database index not ready. Please try again in a moment."}:{success:!1,error:i.message||"Failed to fetch medical records."}}}const Oa=()=>{var S,b,v,C,D;const{user:s}=_(),[a,t]=d.useState(null),[l,i]=d.useState(!0),[r,o]=d.useState(null);d.useEffect(()=>{(async()=>{if(s!=null&&s.uid)try{i(!0);const m=await Ie(s.uid);m.success?t(m.data):o("Failed to load profile data")}catch{o("An error occurred while loading data")}finally{i(!1)}})()},[s]);const c=k=>{if(!k)return null;const m=new Date(k),N=new Date;let w=N.getFullYear()-m.getFullYear();const p=N.getMonth()-m.getMonth();return(p<0||p===0&&N.getDate()<m.getDate())&&w--,w},u=(k,m)=>{if(!(k!=null&&k.value)||!(m!=null&&m.value))return null;const N=k.unit==="lbs"?k.value*.453592:k.value,w=m.unit==="ft"?m.value*.3048:m.value/100;return(N/(w*w)).toFixed(1)};if(l)return e.jsxs("div",{className:"glass rounded-2xl p-6 border soft-divider",children:[e.jsx("div",{className:"animate-pulse h-7 bg-white/10 rounded w-1/2 mb-2"}),e.jsx("div",{className:"animate-pulse h-4 bg-white/10 rounded w-1/3"})]});if(r||!(a!=null&&a.basic))return e.jsxs("div",{className:"glass rounded-2xl p-6 border soft-divider",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[rgba(var(--primary-rgb)/0.15)] text-primary flex items-center justify-center",children:e.jsx(Ce,{})}),e.jsx("h2",{className:"text-lg font-bold text-text",children:"Profile data not available"})]}),e.jsx("p",{className:"text-secondary mb-4",children:r||"Complete your profile to see your health overview."}),e.jsxs(K,{to:"edit-profile",className:"glass-cta inline-flex items-center gap-2 px-4 py-2",children:[e.jsx(Be,{})," Complete Profile"]})]});const{basic:x,medical:f}=a,n=c(x.dob),j=u(x.weight,x.height);return e.jsxs("div",{className:"glass rounded-2xl p-6 border soft-divider hover-glow-primary",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-primary to-accent text-white flex items-center justify-center shadow-lg",children:e.jsx(Ce,{className:"text-xl"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text truncate",children:x.fullName||"Unknown User"}),e.jsxs("p",{className:"text-xs sm:text-sm text-secondary truncate",children:["Patient ID: ",((S=s==null?void 0:s.uid)==null?void 0:S.substring(0,8).toUpperCase())||"N/A"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 mb-2",children:[e.jsxs("div",{className:"p-4 glass rounded-xl border soft-divider",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Tt,{className:"text-primary"}),e.jsx("span",{className:"text-xs font-medium text-secondary",children:"Height"})]}),e.jsxs("span",{className:"text-lg font-bold text-text",children:[(b=x.height)==null?void 0:b.value," ",((v=x.height)==null?void 0:v.unit)||"cm"]})]}),e.jsxs("div",{className:"p-4 glass rounded-xl border soft-divider",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ht,{className:"text-accent"}),e.jsx("span",{className:"text-xs font-medium text-secondary",children:"Weight"})]}),e.jsxs("span",{className:"text-lg font-bold text-text",children:[(C=x.weight)==null?void 0:C.value," ",((D=x.weight)==null?void 0:D.unit)||"kg"]})]}),e.jsxs("div",{className:"p-4 glass rounded-xl border soft-divider",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Lt,{className:"text-red-400"}),e.jsx("span",{className:"text-xs font-medium text-secondary",children:"Blood Group"})]}),e.jsx("span",{className:"text-lg font-bold text-text",children:x.bloodGroup||"Not set"})]}),e.jsxs("div",{className:"p-4 glass rounded-xl border soft-divider",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ze,{className:"text-orange-400"}),e.jsx("span",{className:"text-xs font-medium text-secondary",children:"Age"})]}),e.jsx("span",{className:"text-lg font-bold text-text",children:n?`${n} years`:"Not set"})]}),e.jsxs("div",{className:"p-4 glass rounded-xl border soft-divider",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(es,{className:"text-red-400"}),e.jsx("span",{className:"text-xs font-medium text-secondary",children:"Blood Type"})]}),e.jsx("span",{className:"text-lg font-bold text-text",children:x.bloodGroup||"Not set"})]}),e.jsxs("div",{className:"p-4 glass rounded-xl border soft-divider",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"text-green-400"}),e.jsx("span",{className:"text-xs font-medium text-secondary",children:"Gender"})]}),e.jsx("span",{className:"text-lg font-bold text-text",children:x.gender||"Not set"})]})]}),j&&e.jsxs("div",{className:"p-4 glass rounded-xl border soft-divider mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"text-green-400"}),e.jsx("span",{className:"font-medium text-text",children:"Body Mass Index (BMI)"})]}),e.jsx("span",{className:"text-2xl font-bold text-green-400",children:j})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2 mb-2",children:e.jsx("div",{className:`h-2 rounded-full ${j<18.5?"bg-blue-500":j<25?"bg-green-500":j<30?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(j/35*100,100)}%`}})}),e.jsx("p",{className:"text-xs text-secondary",children:j<18.5?"Underweight":j<25?"Normal weight":j<30?"Overweight":"Obese"})]}),(f==null?void 0:f.conditions)&&f.conditions.length>0&&e.jsxs("div",{className:"p-4 glass rounded-xl border soft-divider mt-2",children:[e.jsx("h3",{className:"font-semibold text-text mb-3",children:"Medical Conditions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.conditions.slice(0,4).map((k,m)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:k},m)),f.conditions.length>4&&e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-white/10 text-secondary",children:["+",f.conditions.length-4," more"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t soft-divider",children:[e.jsxs(K,{to:"edit-profile",className:"flex-1 glass-cta flex items-center justify-center gap-2 px-4 py-3",children:[e.jsx(Be,{className:"text-sm"}),e.jsx("span",{className:"font-medium",children:"Edit"})]}),e.jsxs(K,{to:"view-profile",className:"flex-1 glass rounded-lg border soft-divider text-text flex items-center justify-center gap-2 px-4 py-3 hover-glow-primary",children:[e.jsx(ye,{className:"text-sm"}),e.jsx("span",{className:"font-medium",children:"View Full"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-xs text-secondary text-center",children:"Keep your health information updated for better care"})})]})},Ba=()=>{const s=re(),{user:a}=_(),[t,l]=d.useState([]),[i,r]=d.useState(!0),[o,c]=d.useState(null),[u,x]=d.useState(null),[f,n]=d.useState(!0),[j,S]=d.useState(!1);d.useLayoutEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"}),document.documentElement.scrollTop=0,document.body.scrollTop=0;const m=setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"auto"}),document.documentElement.scrollTop=0,document.body.scrollTop=0},0);return()=>clearTimeout(m)},[]),d.useEffect(()=>{a!=null&&a.uid&&b(!0)},[a]);const b=async(m=!1)=>{try{m?(r(!0),c(null),l([]),x(null)):S(!0);const N=await vt(a.uid,m?null:u,20,!1);if(N.success){const w=N.data||[];l(m?w:p=>[...p,...w]),x(N.lastDoc||null),n(!!N.hasMore)}else c(N.error||"Failed to fetch medical records"),m&&l([])}catch(N){console.error("Error fetching medical records:",N),c("Failed to load medical records"),m&&l([])}finally{r(!1),S(!1)}},v=()=>{!j&&f&&b(!1)},C=()=>{b(!0),window.scrollTo({top:0,left:0,behavior:"auto"})},D=({items:m,colorClass:N})=>e.jsx("div",{className:"flex flex-wrap gap-2",children:m&&m.length>0?m.map((w,p)=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${N}`,children:w},p)):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"None specified"})}),k=({record:m})=>{var N,w;return e.jsxs("div",{className:"glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base sm:text-lg font-semibold text-text",children:m.diagnosis||"Medical Record"}),e.jsxs("p",{className:"text-xs sm:text-sm text-secondary",children:[m.visitDate?new Date(m.visitDate).toLocaleDateString():"No date specified",(N=m.createdAt)!=null&&N.toDate?` at ${new Date(m.createdAt.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:""," ","‚Ä¢ ",m.doctorName||((w=m.doctor)==null?void 0:w.name)||"Unknown Doctor"]})]}),m.fileUrl&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:m.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-primary hover:bg-white/10 rounded-lg transition-colors",title:"View file",children:e.jsx(ye,{className:"text-sm"})}),e.jsx("a",{href:m.fileUrl,download:!0,className:"p-2 text-primary hover:bg-white/10 rounded-lg transition-colors",title:"Download file",children:e.jsx(Js,{className:"text-sm"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Symptoms"}),e.jsx(D,{items:m.symptoms,colorClass:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Medicines"}),e.jsx(D,{items:m.medicines,colorClass:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})]}),m.prescribedTests&&m.prescribedTests.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Prescribed Tests"}),e.jsx(D,{items:m.prescribedTests,colorClass:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"})]}),m.followUpNotes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Follow-up Notes"}),e.jsx("p",{className:"text-sm text-secondary glass p-3 rounded-lg border soft-divider",children:m.followUpNotes})]})]})]})};return e.jsx("div",{className:"min-h-screen bg-background aurora-bg text-text px-3 sm:px-6 py-6",children:e.jsxs("div",{ref:m=>{m&&console.log("MedicalHistoryPage scroll position:",window.scrollY,document.documentElement.scrollTop)},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>s(-1),className:"inline-flex items-center gap-2 glass rounded-full px-3 py-1.5 text-sm text-secondary hover-glow-primary",children:[e.jsx(Ot,{size:18}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsx("button",{onClick:C,disabled:i,className:"glass rounded-lg border soft-divider px-4 py-2 text-sm text-text hover-glow-primary disabled:opacity-50",title:"Refresh records",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(ts,{className:`${i?"animate-spin":""}`}),"Refresh"]})})]}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-text mb-4",children:"Your Complete Medical History"}),i&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"animate-spin text-4xl text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading your medical records..."})]}),o&&!i&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(De,{className:"text-red-400 text-5xl mb-4 mx-auto"}),e.jsx("p",{className:"text-red-500 mb-2 text-lg",children:"Failed to load medical records"}),e.jsx("p",{className:"text-sm text-secondary mb-6",children:o}),e.jsx("button",{onClick:C,className:"glass-cta px-6 py-3",children:"Try Again"})]}),!i&&!o&&e.jsx(e.Fragment,{children:t.length>0?e.jsxs("div",{className:"space-y-4",children:[t.map(m=>e.jsx(k,{record:m},m.id)),f&&e.jsx("div",{className:"text-center pt-2",children:e.jsx("button",{onClick:v,disabled:j,className:"px-6 py-2 glass rounded-lg border soft-divider text-text hover-glow-primary disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(te,{className:"animate-spin"}),"Loading..."]}):"Load More Records"})}),e.jsx("div",{className:"text-center mt-4 pt-4 border-t soft-divider",children:e.jsxs("p",{className:"text-sm text-secondary",children:["Showing ",t.length," medical records",!f&&t.length>0&&" (all records loaded)"]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"text-secondary text-6xl mb-6 mx-auto"}),e.jsx("h3",{className:"text-xl font-semibold text-text mb-2",children:"No Medical Records Found"}),e.jsx("p",{className:"text-secondary mb-6",children:"Your medical history will appear here once doctors add records to your profile."}),e.jsx("button",{onClick:C,className:"glass-cta px-6 py-3",children:"Check for New Records"})]})})]})})},Ua=({records:s,loading:a,error:t,onRefresh:l})=>{const i=(s==null?void 0:s.slice(0,3))||[],r=(s==null?void 0:s.length)||0;return e.jsxs("div",{className:"glass rounded-2xl p-6 border soft-divider flex flex-col gap-6 hover-glow-primary",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-r from-primary to-accent text-white flex items-center justify-center",children:e.jsx(ge,{className:"text-sm"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text",children:"Medical History"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"glass px-3 py-1 rounded-full text-xs sm:text-sm text-secondary border soft-divider",children:[r," ",r===1?"record":"records"]}),l&&e.jsx("button",{onClick:l,disabled:a,className:"p-2 text-secondary hover:text-text transition-colors duration-200 disabled:opacity-50",title:"Refresh records",children:e.jsx(ts,{className:`text-sm ${a?"animate-spin":""}`})})]})]}),a&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading medical records..."})]}),t&&!a&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(De,{className:"text-red-400 text-4xl mb-4 mx-auto"}),e.jsx("p",{className:"text-red-500 mb-2",children:"Failed to load medical records"}),e.jsx("p",{className:"text-sm text-secondary mb-4",children:t}),l&&e.jsx("button",{onClick:l,className:"glass-cta px-4 py-2",children:"Try Again"})]}),!a&&!t&&e.jsxs(e.Fragment,{children:[i.length>0?e.jsx("div",{className:"space-y-3",children:i.map((o,c)=>{var u,x;return e.jsxs("div",{className:"p-4 glass rounded-lg border soft-divider hover-glow-primary",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"text-primary text-sm"}),e.jsx("h3",{className:"font-semibold text-text text-sm",children:o.diagnosis||"General Checkup"})]}),o.visitDate&&e.jsxs("span",{className:"text-xs text-secondary flex items-center gap-1",children:[e.jsx(Ze,{}),new Date(o.visitDate).toLocaleDateString()]}),o.createdAt&&e.jsxs("span",{className:"text-xs text-secondary flex items-center gap-1 mt-1",children:[e.jsx("span",{children:"üìù"}),"Added at ",new Date(o.createdAt.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(o.doctorName||((u=o.doctor)==null?void 0:u.name))&&e.jsxs("p",{className:"text-sm text-secondary mb-2",children:[e.jsx("span",{className:"font-medium",children:"Doctor:"})," ",o.doctorName||((x=o.doctor)==null?void 0:x.name)]}),o.symptoms&&o.symptoms.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.symptoms.slice(0,3).map((f,n)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-white/10 text-secondary",children:f},n)),o.symptoms.length>3&&e.jsxs("span",{className:"px-2 py-1 rounded text-xs bg-white/10 text-secondary",children:["+",o.symptoms.length-3," more"]})]})]},o.id||c)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ge,{className:"text-gray-400 text-4xl mb-4 mx-auto"}),e.jsx("p",{className:"text-secondary mb-2",children:"No medical records yet"}),e.jsx("p",{className:"text-sm text-secondary",children:"Your medical history will appear here"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t soft-divider",children:e.jsxs(K,{to:"medical-history",className:"flex-1 glass-cta flex items-center justify-center gap-2 px-4 py-3",children:[e.jsx(ge,{className:"text-sm"}),e.jsx("span",{className:"font-medium",children:"View All Records"}),e.jsx(Zs,{className:"text-sm"})]})}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-xs text-secondary text-center",children:"Keep your medical records updated and organized"})})]})]})},Ga=()=>{const{user:s}=_(),[a,t]=d.useState([]),[l,i]=d.useState(!0),[r,o]=d.useState(null),[c,u]=d.useState(null),[x,f]=d.useState(null),[n,j]=d.useState({doctorId:null,doctorName:""}),[S,b]=d.useState(!1),[v,C]=d.useState(!1),[D,k]=d.useState(null),[m,N]=d.useState(""),[w,p]=d.useState(""),{register:g,handleSubmit:h,reset:A,formState:{errors:O}}=Xs();d.useEffect(()=>{s!=null&&s.uid&&E()},[s]);const E=async()=>{try{i(!0),o(null);const F=await Ha(s.uid);F.success?t(F.data):o(F.error)}catch(F){o("Failed to fetch shared profiles"),console.error("Error fetching shared profiles:",F)}finally{i(!1)}},M=(F,q)=>{j({doctorId:F,doctorName:q})},J=async()=>{const{doctorId:F,doctorName:q}=n;u(F),j({doctorId:null,doctorName:""});try{const P=await La(s.uid,F);P.success?(t(ue=>ue.filter(Ee=>Ee.doctorId!==F)),f({type:"success",message:`Successfully revoked ${q}'s access to your profile.`})):f({type:"error",message:P.error||"Failed to revoke access"})}catch(P){f({type:"error",message:"An unexpected error occurred"}),console.error("Error revoking access:",P)}finally{u(null),setTimeout(()=>f(null),5e3)}},ie=async F=>{if(!s){N("You must be logged in to share your profile"),k("error");return}C(!0),k(null),N("");try{const q=F.doctorId.toUpperCase(),P=await Ta(s.uid,q);P.success?(p(P.doctorName||""),k("success"),await E(),setTimeout(()=>{A(),b(!1),k(null),N(""),p("")},2e3)):(N(P.error||"Failed to share profile"),k("error"))}catch(q){console.error("Error sharing profile:",q),N("An unexpected error occurred. Please try again."),k("error")}C(!1)};return l?e.jsxs("div",{className:"glass rounded-2xl p-6 border soft-divider",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-r from-primary to-accent text-white flex items-center justify-center",children:e.jsx(oe,{className:"text-sm"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text",children:"Shared with Doctors"})]}),e.jsxs("div",{className:"flex items-center justify-center py-8 text-secondary",children:[e.jsx(te,{className:"animate-spin text-primary text-2xl"}),e.jsx("span",{className:"ml-3",children:"Loading shared profiles..."})]})]}):e.jsxs("div",{className:"glass rounded-2xl p-6 border soft-divider flex flex-col gap-6 hover-glow-primary xl:max-w-5xl xl:mx-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-accent text-white flex items-center justify-center shadow-inner flex-shrink-0",children:e.jsx(oe,{className:"text-lg"})}),e.jsx("h2",{className:"text-xl font-bold text-text leading-tight",children:"Shared with Doctors"}),e.jsxs("span",{className:"glass px-2.5 py-1 rounded-full text-[11px] font-medium tracking-wide text-secondary border soft-divider uppercase whitespace-nowrap leading-none ml-2",children:[a.length," ",a.length===1?"doctor":"doctors"]})]}),e.jsxs("button",{onClick:()=>b(!S),className:"glass-cta flex items-center gap-2 h-12 px-5 rounded-xl text-base font-medium w-full justify-center whitespace-nowrap",children:[e.jsx(Ve,{className:"text-lg"}),e.jsx("span",{children:"Share with Doctor"})]})]}),e.jsx(is,{children:S&&e.jsxs(R.form,{onSubmit:h(ie),initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"p-4 glass rounded-lg border soft-divider space-y-3",children:[e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:"Doctor's ID"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("input",{type:"text",placeholder:"e.g., DR-HALE-1234",...g("doctorId",{required:"Doctor ID is required",pattern:{value:/^DR-[BCDFGHJKLMNPQRSTVWXYZAEIOU]{4}-\d{4}$/i,message:"Invalid doctor ID format (DR-XXXX-1234)"}}),className:"w-full px-3 py-2 rounded-md glass border soft-divider text-text placeholder:text-secondary/70 text-sm uppercase focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",maxLength:12}),O.doctorId&&e.jsx("p",{className:"text-red-400 text-xs",children:O.doctorId.message}),e.jsx("p",{className:"text-secondary text-xs",children:"Format: DR-XXXX-1234"})]}),D==="error"&&e.jsx("div",{className:"text-red-400 text-xs glass border soft-divider p-2 rounded",children:m||"An error occurred. Please try again."}),D==="success"&&e.jsxs("div",{className:"text-green-400 text-xs glass border soft-divider p-2 rounded",children:["Profile shared successfully",w?` with Dr. ${w}!`:"!"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{type:"submit",disabled:v,className:"flex-1 glass-cta px-3 py-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Sharing...":"Share Profile"}),e.jsx("button",{type:"button",onClick:()=>{b(!1),k(null),N(""),A()},className:"px-4 py-2 glass rounded-md border soft-divider text-text hover-glow-primary text-sm font-medium",children:"Cancel"})]})]})}),x&&e.jsx("div",{className:`glass border soft-divider p-4 rounded-lg ${x.type==="success"?"text-green-400":"text-red-400"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[x.type==="success"?e.jsx(et,{}):e.jsx(De,{}),e.jsx("span",{className:"text-text",children:x.message})]})}),r&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(De,{className:"text-red-500 text-3xl mb-3 mx-auto"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:r}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]}),!r&&a.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(oe,{className:"text-secondary text-4xl mb-4 mx-auto"}),e.jsx("p",{className:"text-secondary mb-2",children:"No doctors have access to your profile yet"}),e.jsx("p",{className:"text-sm text-secondary",children:"Share your profile with doctors to see them here"})]}),!r&&a.length>0&&e.jsx("div",{className:"space-y-4 md:max-h-96 md:overflow-y-auto",children:a.map(F=>{var q;return e.jsx("div",{className:"p-4 glass rounded-lg border soft-divider hover-glow-primary",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(oe,{className:"text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-text",children:F.doctorName||"Unknown Doctor"}),e.jsxs("p",{className:"text-sm text-secondary",children:["ID: ",F.doctorIdCode]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-secondary",children:[e.jsx(Ze,{className:"text-secondary"}),e.jsxs("span",{children:["Shared on ",(q=F.sharedAt)!=null&&q.toDate?F.sharedAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown date"]})]})]}),n.doctorId===F.doctorId?e.jsx("div",{className:"sm:ml-4 w-full sm:w-auto flex flex-col sm:items-end gap-2",children:e.jsxs("div",{className:"p-3 glass rounded-lg border soft-divider w-full sm:w-auto",children:[e.jsxs("p",{className:"text-sm text-text mb-2",children:["Are you sure you want to revoke ",e.jsx("span",{className:"font-bold",children:F.doctorName}),"'s access?"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:J,className:"px-3 py-1 rounded-lg glass-cta font-semibold text-sm",disabled:c===F.doctorId,children:c===F.doctorId?"Revoking...":"Confirm"}),e.jsx("button",{onClick:()=>j({doctorId:null,doctorName:""}),className:"px-3 py-1 rounded-lg glass border soft-divider text-text hover-glow-primary text-sm",disabled:c===F.doctorId,children:"Cancel"})]})]})}):e.jsxs("button",{onClick:()=>M(F.doctorId,F.doctorName),disabled:c===F.doctorId,className:"sm:ml-4 w-full sm:w-auto justify-center sm:justify-start mt-2 sm:mt-0 flex items-center gap-2 px-3 py-2 glass rounded-lg border soft-divider text-red-400 hover-glow-primary transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:[c===F.doctorId?e.jsx(te,{className:"animate-spin"}):e.jsx(Bt,{}),c===F.doctorId?"Revoking...":"Revoke Access"]})]})},F.id)})}),a.length>0&&e.jsx("div",{className:"pt-4 border-t soft-divider",children:e.jsx("p",{className:"text-xs text-secondary text-center",children:"Revoked access cannot be restored. The doctor will need a new invitation to access your profile again."})})]})};class $a{constructor(){if(this.apiKey="AIzaSyB5DLN-62BqX98qn8IUMPYotTJpuuiww6o",this.modelName="gemini-1.5-flash",this.isEnabled=!0,!this.apiKey&&this.isEnabled){console.warn("Gemini API key not configured. AI features will be disabled."),this.isEnabled=!1;return}if(this.isEnabled)try{this.genAI=new ca(this.apiKey),this.model=this.genAI.getGenerativeModel({model:this.modelName,generationConfig:{temperature:.7,topK:1,topP:1,maxOutputTokens:2048},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]}),console.log("Gemini AI service initialized successfully")}catch(a){console.error("Failed to initialize Gemini AI:",a),this.isEnabled=!1}}isServiceAvailable(){return this.isEnabled&&this.model}async generateResponse(a,t=[]){var l,i,r;if(!this.isServiceAvailable())throw new Error("Gemini AI service is not available");try{const c=`${t.map(n=>`${n.role==="user"?"Human":"Assistant"}: ${n.content}`).join(`
`)}
Human: ${a}
Assistant:`;return{success:!0,content:(await(await this.model.generateContent(c)).response).text(),usage:{promptTokens:0,completionTokens:0,totalTokens:0}}}catch(o){throw console.error("Error generating AI response:",o),(l=o.message)!=null&&l.includes("API_KEY")?new Error("AI service authentication failed. Please check configuration."):(i=o.message)!=null&&i.includes("RATE_LIMIT")?new Error("AI service is temporarily busy. Please try again in a moment."):(r=o.message)!=null&&r.includes("SAFETY")?new Error("Your request was blocked by safety filters. Please rephrase your question."):new Error("AI service is currently unavailable. Please try again later.")}}async generateStreamResponse(a,t=[],l){if(!this.isServiceAvailable())throw new Error("Gemini AI service is not available");try{const r=`${t.map(u=>`${u.role==="user"?"Human":"Assistant"}: ${u.content}`).join(`
`)}
Human: ${a}
Assistant:`,o=await this.model.generateContentStream(r);let c="";for await(const u of o.stream){const x=u.text();c+=x,l&&l(x)}return{success:!0,content:c}}catch(i){throw console.error("Error generating streaming AI response:",i),i}}async testConnection(){if(!this.isServiceAvailable())return{success:!1,error:"Service not available"};try{const t=await this.generateResponse("Hello, please respond with 'AI service is working correctly'");return{success:!0,message:"Connection successful"}}catch(a){return{success:!1,error:a.message}}}}const Fe=new $a,$s=`You are a helpful health information assistant for HealSync, a medical records platform. Your role is to provide general health education and support.

IMPORTANT GUIDELINES:
- Provide general health information and education only
- Always recommend consulting healthcare professionals for medical concerns
- Never provide specific medical diagnoses or treatment plans
- Be empathetic, supportive, and use simple language
- Include medical disclaimers when appropriate
- Focus on evidence-based information
- Encourage healthy lifestyle choices
- Emphasize the importance of professional medical care

WHAT YOU CAN HELP WITH:
‚úÖ General health information and education
‚úÖ Explanation of medical terms and procedures
‚úÖ Lifestyle and wellness tips
‚úÖ Understanding symptoms (general information only)
‚úÖ Medication information (general, not specific to individuals)
‚úÖ Health prevention strategies
‚úÖ Mental health awareness and support

WHAT YOU CANNOT DO:
‚ùå Provide specific medical diagnoses
‚ùå Replace professional medical advice
‚ùå Analyze personal medical records
‚ùå Prescribe medications or treatments
‚ùå Handle medical emergencies
‚ùå Give advice on stopping medications

RESPONSE FORMAT:
- Start with helpful information
- Use bullet points or numbered lists when appropriate
- Include emojis sparingly for readability
- End with appropriate medical disclaimers
- Keep responses concise but informative (200-400 words)

EMERGENCY SITUATIONS:
If someone mentions emergency symptoms (chest pain, difficulty breathing, severe bleeding, etc.), immediately advise them to seek emergency medical care.

Remember: You are providing educational information only. All medical decisions should be made in consultation with qualified healthcare providers.`;let _a=class{constructor(){this.conversationHistory=[],this.maxHistoryLength=10}async askHealthQuestion(a,t=null){try{const l=this.sanitizeInput(a);if(!Fe.isServiceAvailable())return this.getFallbackResponse();if(this.containsEmergencyKeywords(l))return this.getEmergencyResponse();const i=`${$s}

User Question: ${l}`,r=await Fe.generateResponse(i,this.conversationHistory);if(r.success)return this.addToHistory("user",l),this.addToHistory("assistant",r.content),this.logInteraction(t,"success"),{success:!0,content:r.content,type:"ai_response",timestamp:new Date().toISOString(),disclaimer:this.getMedicalDisclaimer()};throw new Error(r.error||"Failed to get AI response")}catch(l){return console.error("Error in AI Health Assistant:",l),this.logInteraction(t,"error",l.message),this.getErrorResponse(l.message)}}async streamHealthResponse(a,t,l=null){try{const i=this.sanitizeInput(a);if(!Fe.isServiceAvailable())return this.getFallbackResponse();if(this.containsEmergencyKeywords(i))return this.getEmergencyResponse();const r=`${$s}

User Question: ${i}`;let o="";if((await Fe.generateStreamResponse(r,this.conversationHistory,u=>{o+=u,t&&t(u)})).success)return this.addToHistory("user",i),this.addToHistory("assistant",o),this.logInteraction(l,"success"),{success:!0,content:o,type:"ai_response",timestamp:new Date().toISOString(),disclaimer:this.getMedicalDisclaimer()}}catch(i){return console.error("Error in streaming AI response:",i),this.logInteraction(l,"error",i.message),this.getErrorResponse(i.message)}}sanitizeInput(a){return!a||typeof a!="string"?"":a.replace(/\b\d{3}-\d{2}-\d{4}\b/g,"[SSN]").replace(/\b\d{3}-\d{3}-\d{4}\b/g,"[PHONE]").replace(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,"[EMAIL]").replace(/\b\d{1,2}\/\d{1,2}\/\d{4}\b/g,"[DATE]").replace(/\b(my name is|i'm|i am)\s+[A-Za-z]+/gi,"my name is [NAME]").trim()}containsEmergencyKeywords(a){const t=["chest pain","heart attack","stroke","can't breathe","difficulty breathing","severe bleeding","unconscious","seizure","overdose","poisoning","severe allergic reaction","anaphylaxis","suicide","self harm"],l=a.toLowerCase();return t.some(i=>l.includes(i))}addToHistory(a,t){this.conversationHistory.push({role:a,content:t,timestamp:Date.now()}),this.conversationHistory.length>this.maxHistoryLength*2&&(this.conversationHistory=this.conversationHistory.slice(-this.maxHistoryLength*2))}clearHistory(){this.conversationHistory=[]}getHistory(){return this.conversationHistory}logInteraction(a,t,l=null){try{const i={timestamp:new Date().toISOString(),status:t,hasUserId:!!a,error:l?"error_occurred":null,service:"ai_health_assistant"};console.log("AI Interaction Log:",i)}catch(i){console.error("Failed to log AI interaction:",i)}}getEmergencyResponse(){return{success:!0,content:`üö® **EMERGENCY NOTICE**

This appears to be a medical emergency. Please:

1. **Call emergency services immediately** (911 in the US)
2. **Seek immediate medical attention**
3. **Do not delay for any reason**

If you're experiencing:
- Chest pain or heart problems
- Difficulty breathing
- Severe bleeding
- Signs of stroke
- Allergic reactions
- Thoughts of self-harm

**Please contact emergency services or go to the nearest emergency room immediately.**

This AI assistant cannot help with emergency medical situations. Your safety is the priority.`,type:"emergency_response",timestamp:new Date().toISOString(),isEmergency:!0}}getFallbackResponse(){return{success:!0,content:`I'm sorry, but the AI health assistant is currently unavailable. However, I can still help you with some general guidance:

**For general health questions:**
- Consult reputable health websites like WebMD, Mayo Clinic, or CDC
- Speak with a healthcare professional
- Contact your doctor's office for advice

**For urgent concerns:**
- Call your healthcare provider
- Visit an urgent care center
- Go to the emergency room if serious

**For emergencies:**
- Call 911 (US) or your local emergency number immediately

Remember, while AI can provide helpful information, it should never replace professional medical advice.`,type:"fallback_response",timestamp:new Date().toISOString(),disclaimer:this.getMedicalDisclaimer()}}getErrorResponse(a){return{success:!1,content:`I apologize, but I'm experiencing some technical difficulties right now. 

**What you can do:**
- Try asking your question again in a few moments
- Consult with a healthcare professional for medical concerns
- Visit reputable health websites for general information

**For urgent health matters:**
- Contact your healthcare provider directly
- Call a nurse hotline if available
- Seek immediate medical attention if needed

Please don't hesitate to reach out to a medical professional for any health concerns.`,type:"error_response",timestamp:new Date().toISOString(),error:"service_unavailable",disclaimer:this.getMedicalDisclaimer()}}getMedicalDisclaimer(){return"‚öïÔ∏è **Medical Disclaimer:** This information is for educational purposes only and should not replace professional medical advice. Always consult with a qualified healthcare provider for medical concerns."}getSuggestedTopics(){return["What is a healthy diet?","How much exercise do I need?","What are the signs of dehydration?","How can I improve my sleep?","What is normal blood pressure?","How to manage stress effectively?","What are the benefits of regular checkups?","How to maintain good mental health?"]}getHealthTips(){return["üíß Stay hydrated - aim for 8 glasses of water daily","üö∂‚Äç‚ôÄÔ∏è Take regular breaks to move and stretch","üò¥ Prioritize 7-9 hours of quality sleep","ü•ó Include fruits and vegetables in your meals","üßò‚Äç‚ôÄÔ∏è Practice stress management techniques","ü©∫ Schedule regular health checkups","üö≠ Avoid smoking and limit alcohol","üßº Wash hands frequently to prevent illness"]}};const Te=new _a,Ye=({message:s,isTyping:a=!1})=>{const t=s.role==="user",l=s.isEmergency,i=s.type==="error_response";return e.jsx("div",{className:`flex ${t?"justify-end":"justify-start"} mb-3 sm:mb-4 px-1`,children:e.jsxs("div",{className:`flex max-w-[90%] sm:max-w-[80%] ${t?"flex-row-reverse":"flex-row"} items-start gap-2 sm:gap-3`,children:[e.jsx("div",{className:`
          w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center shrink-0 mt-1 shadow-inner ring-1 ring-black/5 dark:ring-0
          ${t?"bg-gradient-to-br from-primary to-primary/80 text-white":l?"bg-red-500 text-white":i?"bg-yellow-500 text-white":"bg-white/80 text-gray-600 dark:bg-gray-700 dark:text-gray-300 backdrop-blur"}
        `,children:t?e.jsx(Z,{className:"text-sm"}):l||i?e.jsx(De,{className:"text-sm"}):e.jsx(be,{className:"text-sm"})}),e.jsxs("div",{className:`
          group rounded-2xl sm:rounded-2xl px-3.5 sm:px-4 py-2.5 sm:py-3 border text-[13px] sm:text-sm leading-relaxed shadow-sm transition-colors
          ${t?"bg-gradient-to-r from-primary to-primary/80 text-white border-primary/70 shadow-primary/20 shadow-md":l?"bg-red-50 border-red-200 dark:bg-red-900/25 dark:border-red-700/70":i?"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/25 dark:border-yellow-700/70":"bg-white/90 border-gray-200 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:bg-[#1e242c]/80 dark:border-white/10 dark:supports-[backdrop-filter]:bg-[#1e242c]/60"}
        `,children:[e.jsx("div",{className:`
            whitespace-pre-line
            ${t?"text-white":l?"text-red-800 dark:text-red-200":i?"text-yellow-800 dark:text-yellow-200":"text-gray-800 dark:text-gray-100"}
          `,children:a?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"ml-2 text-secondary",children:"AI is thinking..."})]}):e.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:s.content.split(`
`).map((r,o)=>{if(r.startsWith("**")&&r.endsWith("**"))return e.jsx("h4",{className:"font-bold text-base mb-2 mt-3 first:mt-0",children:r.slice(2,-2)},o);if(r.startsWith("- ")||r.startsWith("‚Ä¢ ")||r.startsWith("‚úÖ ")||r.startsWith("‚ùå "))return e.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[e.jsx("span",{className:"shrink-0 mt-1",children:r.startsWith("‚úÖ ")?"‚úÖ":r.startsWith("‚ùå ")?"‚ùå":(r.startsWith("‚Ä¢ "),"‚Ä¢")}),e.jsx("span",{children:r.replace(/^[-‚Ä¢‚úÖ‚ùå]\s*/,"")})]},o);if(/^\d+\.\s/.test(r))return e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:"font-medium",children:r})},o);if(r.trim()==="")return e.jsx("div",{className:"h-2"},o);const c=r.split(/(\*\*.*?\*\*)/);return e.jsx("p",{className:"mb-2 last:mb-0 leading-relaxed",children:c.map((u,x)=>u.startsWith("**")&&u.endsWith("**")?e.jsx("strong",{children:u.slice(2,-2)},x):u)},o)})})}),s.timestamp&&!a&&e.jsx("div",{className:`
              text-[10px] sm:text-xs mt-2 opacity-70 select-none
              ${t?"text-white/80":"text-gray-500 dark:text-secondary"}
            `,children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),!t&&!a&&s.disclaimer&&e.jsx("div",{className:`
              text-[10px] sm:text-xs mt-3 p-2 rounded-lg border-t leading-snug tracking-tight
              ${l?"bg-red-100/70 border-red-300 text-red-700 dark:bg-red-900/30 dark:border-red-700 dark:text-red-300":"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 text-blue-700 dark:bg-blue-900/20 dark:border-blue-700 dark:text-blue-300"}
            `,children:s.disclaimer})]})]})})},Nt=({isOpen:s,onClose:a})=>{const{user:t}=_(),[l,i]=d.useState([]),[r,o]=d.useState(""),[c,u]=d.useState(!1),[x,f]=d.useState(!1),[n,j]=d.useState(""),[S,b]=d.useState(!0),[v,C]=d.useState(null),D=d.useRef(null),k=d.useRef(null),m=d.useRef("");d.useEffect(()=>{if(s&&l.length===0){const E={role:"assistant",content:`üëã Hello! I'm your AI Health Assistant. I'm here to provide general health information and answer your health-related questions.

**I can help you with:**
‚Ä¢ Understanding medical terms and conditions
‚Ä¢ General health and wellness advice
‚Ä¢ Lifestyle recommendations
‚Ä¢ Explaining symptoms (general information)
‚Ä¢ Health prevention tips

**Please remember:** I provide educational information only and cannot replace professional medical advice. For specific medical concerns, always consult with a healthcare provider.

What would you like to know about health today?`,timestamp:new Date().toISOString(),type:"welcome",disclaimer:"‚öïÔ∏è **Medical Disclaimer:** This information is for educational purposes only and should not replace professional medical advice."};i([E])}},[s,l.length]),d.useEffect(()=>{N()},[l,n]),d.useEffect(()=>{s&&k.current&&k.current.focus()},[s]);const N=()=>{var E;(E=D.current)==null||E.scrollIntoView({behavior:"smooth"})},w=async()=>{if(!r.trim()||c||x)return;const E={role:"user",content:r.trim(),timestamp:new Date().toISOString()};i(M=>[...M,E]),o(""),b(!1),C(null),f(!0),j(""),m.current="";try{const M=await Te.streamHealthResponse(r.trim(),J=>{m.current+=J,j(m.current)},t==null?void 0:t.uid);if(M.success){const J={role:"assistant",content:M.content,timestamp:M.timestamp,type:M.type,isEmergency:M.isEmergency,disclaimer:M.disclaimer};i(ie=>[...ie,J])}else throw new Error(M.error||"Failed to get response")}catch(M){console.error("Error sending message:",M),C(M.message);const J={role:"assistant",content:`I apologize, but I'm having trouble responding right now. Please try again in a moment.

**For immediate health concerns:**
‚Ä¢ Contact your healthcare provider
‚Ä¢ Call a nurse hotline
‚Ä¢ Visit urgent care or emergency room if needed

Error: ${M.message}`,timestamp:new Date().toISOString(),type:"error_response"};i(ie=>[...ie,J])}finally{f(!1),j(""),m.current=""}},p=E=>{o(E),b(!1),k.current&&k.current.focus()},g=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),w())},h=()=>{i([]),b(!0),C(null),Te.clearHistory()},A=Te.getSuggestedTopics(),O=Te.getHealthTips();return s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 via-black/30 to-black/40 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative w-full sm:max-w-4xl h-[85vh] sm:h-[80vh] flex flex-col rounded-t-3xl sm:rounded-3xl shadow-xl sm:shadow-2xl border border-gray-200/70 dark:border-white/10 bg-white/90 dark:bg-[#0e1116]/90 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-[#0e1116]/75 transition-colors",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1.5 bg-gradient-to-r from-primary via-accent to-primary/60 opacity-70"}),e.jsxs("div",{className:"flex items-center justify-between px-5 sm:px-6 py-4 sm:py-5 border-b border-gray-200/80 dark:border-white/10 bg-gradient-to-br from-white/80 to-white/50 dark:from-[#161b22]/70 dark:to-[#161b22]/40 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-[#161b22]/60",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center shadow-md ring-1 ring-white/40",children:e.jsx(be,{className:"text-white text-base"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100 tracking-tight",children:"AI Health Assistant"}),e.jsx("p",{className:"text-[11px] sm:text-xs text-gray-500 dark:text-gray-400 uppercase font-medium",children:"General health guidance"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-primary/10 dark:hover:bg-white/10 text-primary dark:text-indigo-300 transition-colors focus:outline-none focus:ring-2 focus:ring-primary/40 dark:focus:ring-indigo-500/40",title:"Clear conversation",children:e.jsx(ts,{className:"text-sm"})}),e.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-500/10 text-red-500 dark:text-red-400 transition-colors focus:outline-none focus:ring-2 focus:ring-red-300/60 dark:focus:ring-red-500/40",title:"Close assistant",children:e.jsx(Ke,{className:"text-sm"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-5 space-y-4 scroll-smooth custom-scrollbar",children:[v&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:v})}),l.map((E,M)=>e.jsx(Ye,{message:E},M)),x&&n&&e.jsx(Ye,{message:{role:"assistant",content:n,timestamp:new Date().toISOString()}}),x&&!n&&e.jsx(Ye,{message:{role:"assistant",content:""},isTyping:!0}),S&&l.length<=1&&e.jsxs("div",{className:"space-y-4 mt-2 sm:mt-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-700 dark:text-gray-200 mb-3 flex items-center gap-2 tracking-wide",children:[e.jsx(Ut,{className:"text-yellow-500 shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:"Suggested Questions"}),e.jsx("span",{className:"sm:hidden",children:"Try Asking"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2",children:A.map((E,M)=>e.jsx("button",{onClick:()=>p(E),className:"text-left p-2.5 sm:p-3 rounded-xl border border-gray-200 dark:border-white/10 hover:border-primary/40 dark:hover:border-indigo-400/50 hover:bg-primary/5 dark:hover:bg-white/10 active:scale-[.98] transition-all text-[11px] sm:text-sm text-gray-700 dark:text-gray-200 font-medium bg-white/70 dark:bg-white/5 backdrop-blur-sm",children:E},M))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-700 dark:text-gray-200 mb-3 tracking-wide",children:"üí° Quick Tips"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2",children:O.slice(0,4).map((E,M)=>e.jsx("div",{className:"p-2.5 sm:p-3 rounded-xl bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-500/10 dark:to-teal-500/10 border border-emerald-200/70 dark:border-emerald-500/30 text-[11px] sm:text-sm text-emerald-800 dark:text-emerald-200 font-medium shadow-sm",children:E},M))})]})]}),e.jsx("div",{ref:D})]}),e.jsxs("div",{className:"px-4 sm:px-6 py-4 border-t border-gray-200/80 dark:border-white/10 bg-gradient-to-b from-white/60 to-white/70 dark:from-[#0e1116]/70 dark:to-[#0e1116]/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 dark:supports-[backdrop-filter]:bg-[#0e1116]/60",children:[e.jsxs("div",{className:"flex gap-2 sm:gap-3 items-end",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("textarea",{ref:k,value:r,onChange:E=>o(E.target.value),onKeyPress:g,placeholder:"Ask a health question...",className:"w-full px-3.5 sm:px-4 py-2.5 sm:py-3 rounded-2xl border border-gray-300 dark:border-white/10 bg-white/80 dark:bg-white/5 text-gray-800 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 resize-none focus:outline-none focus:ring-2 focus:ring-primary/30 dark:focus:ring-indigo-500/40 focus:border-primary/40 dark:focus:border-indigo-400/40 min-h-[44px] max-h-32 shadow-inner",rows:2,disabled:c||x})}),e.jsxs("button",{onClick:w,disabled:!r.trim()||c||x,className:"px-4 sm:px-6 py-3 bg-gradient-to-r from-primary via-indigo-500 to-accent text-white rounded-2xl font-medium hover:brightness-110 active:scale-[.97] disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 shrink-0 shadow-md focus:outline-none focus:ring-2 focus:ring-primary/40 dark:focus:ring-indigo-500/40",children:[e.jsx(Gt,{className:"text-sm"}),"Send"]})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 mt-3 text-center leading-snug",children:"This AI provides general health information only. Consult healthcare professionals for personal medical advice."})]})]})]}):null},qa=()=>{var S;const s=re(),{user:a,userProfile:t}=_(),[l,i]=d.useState([]),[r,o]=d.useState(!0),[c,u]=d.useState(null),[x,f]=d.useState(!1);d.useEffect(()=>{t&&t.onboardingCompleted===!1&&s("/user/onboarding")},[t,s]),d.useEffect(()=>{a!=null&&a.uid&&n()},[a]);const n=async()=>{try{o(!0),u(null);const b=await vt(a.uid,null,20,!1);b.success?i(b.data||[]):(u(b.error||"Failed to fetch medical records"),i([]))}catch(b){console.error("Error fetching medical records:",b),u("Failed to load medical records"),i([])}finally{o(!1)}},j=()=>{const b=new Date().getHours();return b<12?"Good Morning":b<17?"Good Afternoon":"Good Evening"};return e.jsxs("div",{className:"min-h-screen bg-background aurora-bg",children:[e.jsx("div",{className:"relative bg-gradient-to-br from-primary/25 via-accent/20 to-transparent px-3 sm:px-6 pt-6 sm:pt-8 pb-4 sm:pb-6 border-b soft-divider",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 sm:gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 sm:gap-5",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl glass flex items-center justify-center shadow-lg",children:e.jsx(Z,{className:"text-primary text-xl sm:text-2xl"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-text leading-tight break-words",children:[j(),", ",e.jsx("span",{className:"text-primary",children:(a==null?void 0:a.displayName)||((S=a==null?void 0:a.email)==null?void 0:S.split("@")[0])||"User"})]}),e.jsx("div",{className:"mt-3 inline-flex items-center gap-2 glass rounded-full px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm text-secondary",children:"Your personalized health overview"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"glass rounded-xl sm:rounded-2xl px-4 sm:px-5 py-2.5 sm:py-3 flex items-center gap-3 shadow-lg",children:[e.jsx(st,{className:"text-primary shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-secondary",children:"Today"}),e.jsx("div",{className:"text-xs sm:text-sm font-semibold text-text truncate",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]}),e.jsxs("button",{className:"relative rounded-xl sm:rounded-2xl px-3 sm:px-4 py-2 sm:py-3 text-white shadow-xl bg-gradient-to-r from-accent to-accent/80 hover:from-accent/90 hover:to-accent/70 transition-all",children:[e.jsx(tt,{className:"text-base sm:text-lg"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 sm:w-3.5 sm:h-3.5 rounded-full bg-accent shadow"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 py-6 sm:py-8 grid grid-cols-1 lg:grid-cols-12 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-6 sm:space-y-8 min-w-0",children:[e.jsx("div",{className:"min-w-0",children:e.jsx(Oa,{})}),e.jsx("div",{className:"min-w-0",children:e.jsx(Ua,{records:l,loading:r,error:c,onRefresh:n})})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6 sm:space-y-8 min-w-0",children:[e.jsx(Ga,{}),e.jsxs("div",{className:"glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(be,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-text",children:"AI Health Assistant"}),e.jsx("p",{className:"text-xs text-secondary",children:"24/7 health guidance"})]})]}),e.jsx("p",{className:"text-sm text-secondary leading-relaxed mb-4",children:"Get instant answers to your health questions, understand medical terms, and receive personalized wellness tips from our AI assistant."}),e.jsxs("button",{onClick:()=>f(!0),className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(at,{}),"Start Conversation"]})]}),e.jsxs("div",{className:"glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-text mb-3",children:"üí° Health Tip of the Day"}),e.jsx("p",{className:"text-sm text-secondary leading-relaxed",children:"Stay hydrated! Aim to drink at least 8 glasses of water throughout the day to maintain optimal health and energy levels."}),e.jsx("button",{className:"mt-3 text-sm text-primary hover:opacity-80 font-medium",children:"Learn more ‚Üí"})]})]})]}),e.jsx("button",{onClick:()=>f(!0),className:"fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full shadow-2xl hover:scale-110 transition-all duration-300 flex items-center justify-center z-40 lg:hidden",title:"Open AI Health Assistant",children:e.jsx(be,{className:"text-xl"})}),e.jsx(Nt,{isOpen:x,onClose:()=>f(!1)})]})};function za(){const s=re(),{signup:a,user:t,userRole:l,loading:i}=_(),[r,o]=d.useState(!1),[c,u]=d.useState(!1);d.useEffect(()=>{r||!i&&t&&l&&s(l==="doctor"?"/doctor":"/user")},[t,l,i,s,r]);const[x,f]=d.useState({name:"",email:"",password:"",role:"user"}),[n,j]=d.useState(""),[S,b]=d.useState(!1),[v,C]=d.useState("weak");if(i)return e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-primary",children:"Loading..."})})})]});const D=p=>{let g=0;return p.length>=6&&g++,/[A-Z]/.test(p)&&g++,/[0-9]/.test(p)&&g++,/[^A-Za-z0-9]/.test(p)&&g++,g>=4?"strong":g>=2?"moderate":"weak"},k=p=>{const g=p.target.value;f(h=>({...h,password:g})),C(D(g))},m=p=>{f({...x,[p.target.name]:p.target.value}),j("")},N=p=>{f(g=>({...g,role:p}))},w=async p=>{var g;if(p.preventDefault(),v==="weak"){j("Please choose a stronger password (include uppercase, numbers, symbols).");return}try{o(!0),await a(x.name,x.email,x.password,x.role),u(!0);const h=x.role==="doctor"?"/doctor":"/user/onboarding";setTimeout(()=>{s(h)},1400)}catch(h){console.error("Signup failed:",h.message),console.error("Full error:",h),h.code==="auth/email-already-in-use"?j("An account with this email already exists."):(g=h.code)!=null&&g.startsWith("firestore/")?j("Account created but profile setup failed. Please try logging in."):j("Signup failed. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-secondary/10 via-background to-primary/10 flex",children:[e.jsxs(R.div,{className:"hidden lg:flex lg:w-1/2 flex-col justify-center items-center p-12 relative overflow-hidden",initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8},children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[e.jsx("div",{className:"absolute top-16 right-16 w-36 h-36 bg-secondary/20 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-16 left-16 w-44 h-44 bg-primary/20 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-1/3 right-1/4 w-28 h-28 bg-accent/20 rounded-full blur-lg"})]}),e.jsx("div",{className:"relative z-10 mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-52 h-52 bg-gradient-to-br from-secondary to-primary rounded-3xl flex items-center justify-center shadow-2xl transform -rotate-6",children:e.jsx("div",{className:"w-36 h-36 bg-white rounded-2xl flex items-center justify-center",children:e.jsx(Us,{className:"text-7xl text-secondary"})})}),e.jsx(R.div,{className:"absolute -top-6 -left-6 w-18 h-18 bg-primary rounded-2xl flex items-center justify-center shadow-lg",animate:{x:[-3,3,-3]},transition:{duration:4,repeat:1/0},children:e.jsx(fe,{className:"text-2xl text-white"})}),e.jsx(R.div,{className:"absolute -bottom-6 -right-6 w-18 h-18 bg-accent rounded-2xl flex items-center justify-center shadow-lg",animate:{x:[3,-3,3]},transition:{duration:4,repeat:1/0,delay:1.5},children:e.jsx(rt,{className:"text-2xl text-white"})})]})}),e.jsxs("div",{className:"space-y-6 text-center max-w-md",children:[e.jsx("h1",{className:"text-4xl font-bold text-secondary mb-2",children:"Join HealSync"}),e.jsx("p",{className:"text-lg text-text/80 mb-8",children:"Start your journey to better healthcare management"})]})]}),e.jsx(R.div,{className:"w-full lg:w-1/2 flex items-center justify-center p-6 lg:p-12 ",initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8},children:e.jsxs("div",{className:"w-full max-w-md",children:[c&&e.jsx(R.div,{initial:{opacity:0,x:40,y:-20},animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:20,y:-10},role:"alert",className:"fixed top-5 right-5 z-50 px-5 py-4 rounded-2xl shadow-xl bg-primary text-white text-sm font-medium flex items-center gap-2 max-w-[90vw] sm:max-w-xs w-auto",style:{pointerEvents:"auto"},children:e.jsx("span",{children:"Account created successfully! Redirecting‚Ä¶"})}),e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx(R.div,{className:"w-20 h-20 bg-gradient-to-br from-secondary to-primary rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:e.jsx(Us,{className:"text-3xl text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-secondary",children:"HealSync"}),e.jsx("p",{className:"text-text/70",children:"Start creating your account"})]}),e.jsxs(R.form,{onSubmit:w,className:"bg-white/90 dark:bg-white/5 backdrop-blur-xl border border-accent-40 p-8 rounded-3xl shadow-2xl dark:shadow-white/5 space-y-6",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl lg:text-3xl font-bold text-secondary",children:"Create Account"}),e.jsx("p",{className:"text-text/70 mt-2",children:"Choose your account type and get started"})]}),e.jsxs("div",{className:"flex gap-3 p-2 bg-gray-100/80 dark:bg-white/5 rounded-2xl backdrop-blur-sm",children:[e.jsxs("button",{type:"button",onClick:()=>N("user"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition-all duration-300 ${x.role==="user"?"bg-white dark:bg-white/10 text-primary dark:text-primary shadow-lg dark:shadow-[0_4px_8px_0_rgba(255,255,255,0.10)] transform scale-105 backdrop-blur-sm":"text-text/70 hover:text-primary hover:bg-white/50 dark:hover:bg-white/5"}`,children:[e.jsx(it,{className:"text-sm"}),e.jsx("span",{className:"text-sm",children:"User"})]}),e.jsxs("button",{type:"button",onClick:()=>N("doctor"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition-all duration-300 ${x.role==="doctor"?"bg-white dark:bg-white/10 text-primary dark:text-primary shadow-lg dark:shadow-[0_4px_8px_0_rgba(255,255,255,0.10)] transform scale-105 backdrop-blur-sm":"text-text/70 hover:text-primary hover:bg-white/50 dark:hover:bg-white/5"}`,children:[e.jsx(oe,{className:"text-sm"}),e.jsx("span",{className:"text-sm",children:"Doctor"})]})]}),n&&e.jsx(R.div,{className:"bg-red-50 border border-red-200 text-red-700 text-sm px-4 py-3 rounded-xl",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:n}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text/80",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(Z,{className:"text-text drop-shadow-none"})}),e.jsx("input",{name:"name",type:"text",placeholder:"Enter your full name",required:!0,value:x.name,onChange:m,className:"w-full pl-12 pr-4 py-4 bg-gray-50/80 dark:bg-white/5 border border-gray-200/60 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] focus:border dark:focus:border-[var(--color-primary)] transition-all backdrop-blur-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text/80",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx($e,{className:"text-text drop-shadow-none"})}),e.jsx("input",{name:"email",type:"email",placeholder:"Enter your email",required:!0,value:x.email,onChange:m,className:"w-full pl-12 pr-4 py-4 bg-gray-50/80 dark:bg-white/5 border border-gray-200/60 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] focus:border dark:focus:border-[var(--color-primary)] transition-all backdrop-blur-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text/80",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(Le,{className:"text-text drop-shadow-none"})}),e.jsx("input",{name:"password",type:S?"text":"password",placeholder:"Create a strong password",required:!0,value:x.password,onChange:k,className:"w-full pl-12 pr-12 py-4 bg-gray-50/80 dark:bg-white/5 border border-gray-200/60 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] focus:border dark:focus:border-[var(--color-primary)] transition-all backdrop-blur-sm"}),e.jsx("button",{type:"button",onClick:()=>b(p=>!p),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-text/50 hover:text-secondary transition-colors",children:S?e.jsx(lt,{}):e.jsx(ye,{})})]}),x.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-text/60",children:"Password Strength:"}),e.jsx("span",{className:`text-xs font-semibold ${v==="weak"?"text-red-500":v==="moderate"?"text-yellow-500":"text-green-500"}`,children:v.charAt(0).toUpperCase()+v.slice(1)})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${v==="weak"?"bg-red-500 w-1/3":v==="moderate"?"bg-yellow-500 w-2/3":"bg-green-500 w-full"}`})})]})]}),e.jsxs(R.button,{type:"submit",className:"w-full bg-primary text-white py-4 rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",whileHover:{scale:1.02},whileTap:{scale:.98},children:["Create ",x.role==="doctor"?"Doctor":"User"," Account"]}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs("p",{className:"text-text/70",children:["Already have an account?"," ",e.jsx(K,{to:"/login",className:"text-secondary font-semibold hover:underline transition-all",children:"Sign In"})]})})]})]})})]})]})}function Ya(){const s=re(),{login:a,user:t,userRole:l,loading:i}=_();d.useEffect(()=>{!i&&t&&l&&s(l==="doctor"?"/doctor":"/user")},[t,l,i,s]);const[r,o]=d.useState({email:"",password:"",role:"user"}),[c,u]=d.useState(!1),[x,f]=d.useState("");if(i)return e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-primary",children:"Loading..."})})})]});const n=b=>{o({...r,[b.target.name]:b.target.value}),f("")},j=b=>{o(v=>({...v,role:b}))},S=async b=>{b.preventDefault();try{const{user:v}=await a(r.email,r.password);console.log("Login successful:",v);const C=U(L,"users",v.uid),D=await Y(C);if(D.exists()){const m=D.data().role;s(m==="doctor"?"/doctor":"/user")}else f("User profile not found. Please contact support.")}catch(v){f("Invalid email or password."),console.error("Login failed:",v.message)}};return e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-primary/10 via-background to-secondary/10 flex",children:[e.jsxs(R.div,{className:"hidden lg:flex lg:w-1/2 flex-col justify-center items-center p-12 relative overflow-hidden",initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8},children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[e.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-primary/20 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-secondary/20 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-accent/20 rounded-full blur-lg"})]}),e.jsx("div",{className:"relative z-10 mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-primary to-secondary rounded-3xl flex items-center justify-center shadow-2xl transform rotate-6",children:e.jsx("div",{className:"w-32 h-32 bg-white rounded-2xl flex items-center justify-center",children:e.jsx(fe,{className:"text-6xl text-primary"})})}),e.jsx(R.div,{className:"absolute -top-4 -right-4 w-16 h-16 bg-accent rounded-2xl flex items-center justify-center shadow-lg",animate:{y:[-5,5,-5]},transition:{duration:3,repeat:1/0},children:e.jsx(rt,{className:"text-2xl text-white"})}),e.jsx(R.div,{className:"absolute -bottom-4 -left-4 w-16 h-16 bg-secondary rounded-2xl flex items-center justify-center shadow-lg",animate:{y:[5,-5,5]},transition:{duration:3,repeat:1/0,delay:1},children:e.jsx(nt,{className:"text-2xl text-white"})})]})}),e.jsxs("div",{className:"space-y-6 text-center max-w-md",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"Welcome to HealSync"}),e.jsx("p",{className:"text-lg text-text/80 mb-8",children:"Your comprehensive healthcare management platform"})]})]}),e.jsx(R.div,{className:"w-full lg:w-1/2 flex items-center justify-center p-6 lg:p-12",initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8},children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx(R.div,{className:"w-20 h-20 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:e.jsx(fe,{className:"text-3xl text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"HealSync"}),e.jsx("p",{className:"text-text/70",children:"Welcome back to your account"})]}),e.jsxs(R.form,{onSubmit:S,className:"bg-white/90 dark:bg-white/5 backdrop-blur-xl border border-accent-40 p-8 rounded-3xl shadow-2xl dark:shadow-white/5 space-y-6",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl lg:text-3xl font-bold text-primary",children:"Welcome Back"}),e.jsx("p",{className:"text-text/70 mt-2",children:"Choose your account type and login"})]}),e.jsxs("div",{className:"flex gap-3 p-2 bg-gray-100/80 dark:bg-white/5 rounded-2xl backdrop-blur-sm",children:[e.jsxs("button",{type:"button",onClick:()=>j("user"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition-all duration-300 ${r.role==="user"?"bg-white dark:bg-white/10 text-primary dark:text-primary shadow-lg dark:shadow-[0_4px_8px_0_rgba(255,255,255,0.10)] transform scale-105 backdrop-blur-sm":"text-text/70 hover:text-primary hover:bg-white/50 dark:hover:bg-white/5"}`,children:[e.jsx(it,{className:"text-sm"}),e.jsx("span",{className:"text-sm",children:"User"})]}),e.jsxs("button",{type:"button",onClick:()=>j("doctor"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition-all duration-300 ${r.role==="doctor"?"bg-white dark:bg-white/10 text-primary dark:text-primary shadow-lg dark:shadow-[0_4px_8px_0_rgba(255,255,255,0.10)] transform scale-105 backdrop-blur-sm":"text-text/70 hover:text-primary hover:bg-white/50 dark:hover:bg-white/5"}`,children:[e.jsx(oe,{className:"text-sm"}),e.jsx("span",{className:"text-sm",children:"Doctor"})]})]}),x&&e.jsx(R.div,{className:"bg-red-50 border border-red-200 text-red-700 text-sm px-4 py-3 rounded-xl",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:x}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text/80",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx($e,{className:"text-text drop-shadow-none"})}),e.jsx("input",{name:"email",type:"email",placeholder:"Enter your email",required:!0,value:r.email,onChange:n,className:"w-full pl-12 pr-4 py-4 bg-gray-50/80 dark:bg-white/5 border border-gray-200/60 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] focus:border dark:focus:border-[var(--color-primary)] transition-all backdrop-blur-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text/80",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(Le,{className:"text-text drop-shadow-none"})}),e.jsx("input",{name:"password",type:c?"text":"password",placeholder:"Enter your password",required:!0,value:r.password,onChange:n,className:"w-full pl-12 pr-12 py-4 bg-gray-50/80 dark:bg-white/5 border border-gray-200/60 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] focus:border dark:focus:border-[var(--color-primary)] transition-all backdrop-blur-sm"}),e.jsx("button",{type:"button",onClick:()=>u(b=>!b),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-text/50 hover:text-primary transition-colors",children:c?e.jsx(lt,{}):e.jsx(ye,{})})]})]}),e.jsxs(R.button,{type:"submit",className:"w-full bg-primary text-white py-4 rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",whileHover:{scale:1.02},whileTap:{scale:.98},children:["Log In as ",r.role==="doctor"?"Doctor":"User"]}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs("p",{className:"text-text/70",children:["Don't have an account?"," ",e.jsx(K,{to:"/signup",className:"text-primary font-semibold hover:underline transition-all",children:"Create Account"})]})})]})]})})]})]})}function Wa(){return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(me,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ot,{})," "]}),e.jsx(ls,{})]})}function Va(){return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(me,{}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsx(ot,{})," "]}),e.jsx(ls,{})]})}function Ka(){const{user:s}=_(),[a,t]=d.useState(null),[l,i]=d.useState(!0),[r,o]=d.useState(!1);d.useEffect(()=>{(async()=>{if(s)try{const f=U(L,"users",s.uid),n=await Y(f);n.exists()&&n.data().doctorId&&t(n.data().doctorId)}catch(f){console.error("Error fetching doctor ID:",f)}finally{i(!1)}})()},[s]);const c=async()=>{if(a)try{await navigator.clipboard.writeText(a),o(!0),setTimeout(()=>o(!1),2e3)}catch(x){console.error("Failed to copy doctor ID:",x)}},u=async()=>{if(a)try{navigator.share?await navigator.share({title:"HealSync Doctor ID",text:`Here is my Doctor ID: ${a}
Use HealSync to share your records with me.`,url:window.location.origin}):await c()}catch{await c()}};return l?e.jsx("div",{className:"glass-elevated rounded-3xl p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-5 bg-[rgba(var(--primary-rgb)/0.25)] rounded w-1/3 mb-3"}),e.jsx("div",{className:"h-10 bg-[rgba(var(--surface-rgb)/0.2)] rounded w-2/3"})]})}):a?e.jsxs("div",{className:"glass-elevated rounded-3xl overflow-hidden hover-glow-primary",children:[e.jsx("div",{className:"p-6 border-b soft-divider bg-gradient-to-r from-primary/15 to-accent/15",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-primary to-accent text-white flex items-center justify-center",children:e.jsx($t,{})}),e.jsx("h3",{className:"text-lg font-semibold text-text",children:"Your Doctor ID"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:u,className:"inline-flex sm:hidden items-center justify-center w-9 h-9 rounded-full glass border soft-divider text-primary hover:brightness-110",title:"Share with Patients","aria-label":"Share with Patients",children:e.jsx(Oe,{className:"text-sm"})}),e.jsx("span",{className:"hidden sm:inline-flex px-3 py-1.5 rounded-full text-xs text-primary bg-[rgba(var(--primary-rgb)/0.15)] border soft-divider",children:"Share with Patients"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsxs("div",{className:"flex-1 rounded-2xl p-4 border soft-divider glass",children:[e.jsx("div",{className:"text-secondary text-xs mb-1",children:"Doctor ID"}),e.jsx("code",{className:"text-xl font-mono font-bold text-primary tracking-wider",children:a})]}),e.jsxs("button",{onClick:c,className:`glass-cta flex items-center gap-2 px-5 py-3 ${r?"brightness-110":""}`,title:"Copy Doctor ID",children:[r?e.jsx(_t,{className:"text-sm"}):e.jsx(qt,{className:"text-sm"}),r?"Copied!":"Copy"]})]}),e.jsxs("div",{className:"rounded-2xl p-5 border soft-divider glass",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-primary",children:[e.jsx(Oe,{}),e.jsx("h4",{className:"font-medium",children:"How patients can share with you:"})]}),e.jsxs("ol",{className:"text-sm text-secondary space-y-2 ml-5 list-decimal",children:[e.jsxs("li",{children:["Ask your patients to use the ",e.jsx("span",{className:"text-primary font-medium",children:'"Share to Doctor"'})," button on their profile"]}),e.jsxs("li",{children:["They should enter your Doctor ID: ",e.jsx("code",{className:"px-2 py-0.5 rounded bg-[rgba(var(--primary-rgb)/0.15)] text-primary font-mono text-xs border soft-divider",children:a})]}),e.jsx("li",{children:"You'll receive instant access to their medical records and profile"})]})]})]})]}):e.jsxs("div",{className:"glass-elevated rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text mb-2",children:"Doctor ID Not Found"}),e.jsx("p",{className:"text-secondary text-sm",children:"Your doctor ID was not found. Please contact support if this issue persists."})]})}function Xa(){const{user:s}=_(),a=re(),[t,l]=d.useState([]),[i,r]=d.useState(!0),[o,c]=d.useState(null);d.useEffect(()=>{s&&u()},[s]);const u=async()=>{try{r(!0);const n=await ba(s.uid);if(n.success){const j=await Promise.all(n.data.map(async S=>{try{const b=U(L,"users",S.patientId),v=await Y(b),C=v.exists()?v.data().name:"Unknown Patient",D=v.exists()?v.data().email:"";return{...S,patientName:C,patientEmail:D}}catch(b){return console.error(`Error fetching patient data for ${S.patientId}:`,b),{...S,patientName:"Unknown Patient",patientEmail:""}}}));l(j)}else c(n.error)}catch(n){console.error("Error fetching shared profiles:",n),c("Failed to load shared profiles")}finally{r(!1)}},x=n=>{a(`/doctor/shared-profile/${n}`)},f=n=>{if(!n)return"Unknown";try{return(n.toDate?n.toDate():new Date(n)).toLocaleDateString()}catch{return"Unknown"}};return i?e.jsx("div",{className:"glass-elevated rounded-3xl p-8",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(te,{className:"animate-spin text-2xl text-primary mr-2"}),e.jsx("span",{className:"text-secondary",children:"Loading shared profiles..."})]})}):o?e.jsxs("div",{className:"glass-elevated rounded-3xl p-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-text mb-2",children:"Error Loading Profiles"}),e.jsx("p",{className:"text-secondary text-sm",children:o})]}):t.length===0?e.jsxs("div",{className:"glass-elevated rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b soft-divider bg-gradient-to-r from-primary/15 to-accent/15",children:e.jsx("h2",{className:"text-xl font-bold text-text",children:"Shared Patient Records"})}),e.jsxs("div",{className:"text-center py-12 px-6",children:[e.jsx(Z,{className:"text-4xl mx-auto mb-4 text-primary/70"}),e.jsx("p",{className:"text-lg text-text mb-2",children:"No patient records shared yet."}),e.jsx("p",{className:"text-sm text-secondary",children:"Share your Doctor ID with patients to receive their medical records."})]})]}):e.jsxs("div",{className:"glass-elevated rounded-3xl overflow-hidden hover-glow-primary",children:[e.jsx("div",{className:"p-6 border-b soft-divider bg-gradient-to-r from-primary/15 to-accent/15",children:e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-text",children:["Shared Patient Records (",t.length,")"]})}),e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:t.map(n=>e.jsx("div",{className:"glass rounded-xl sm:rounded-2xl p-4 sm:p-5 border soft-divider transition-all lift-on-hover hover-glow-primary",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1.5 sm:mb-2 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-[rgba(var(--primary-rgb)/0.15)] text-primary flex items-center justify-center shrink-0",children:e.jsx(Z,{})}),e.jsx("h3",{className:"font-semibold text-text truncate",children:n.patientName})]}),e.jsx("p",{className:"text-xs sm:text-sm text-secondary mb-1 truncate",children:n.patientEmail}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] sm:text-xs text-secondary",children:[e.jsx(ct,{}),e.jsxs("span",{children:["Shared on ",f(n.sharedAt)]})]})]}),e.jsxs("button",{onClick:()=>x(n.id),className:"glass-cta flex items-center justify-center gap-2 w-full sm:w-auto px-4 sm:px-5 py-2 sm:py-2.5",children:[e.jsx(ye,{className:"text-sm"}),e.jsx("span",{className:"text-sm sm:text-base",children:"View Profile"})]})]})},n.id))})})]})}function Qa(){var i;const{user:s}=_(),[a,t]=d.useState(!1),l=()=>{const r=new Date().getHours();return r<12?"Good Morning":r<17?"Good Afternoon":"Good Evening"};return e.jsxs("div",{className:"min-h-screen bg-background aurora-bg",children:[e.jsx("div",{className:"relative bg-gradient-to-br from-primary/25 via-accent/20 to-transparent px-3 sm:px-6 pt-6 sm:pt-8 pb-4 sm:pb-6 border-b soft-divider",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 sm:gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 sm:gap-5",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl glass flex items-center justify-center shadow-lg",children:e.jsx(We,{className:"text-primary text-xl sm:text-2xl"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-text leading-tight break-words",children:[l(),", ",e.jsxs("span",{className:"text-primary",children:["Dr. ",(s==null?void 0:s.displayName)||((i=s==null?void 0:s.email)==null?void 0:i.split("@")[0])||"Doctor"]})]}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 glass rounded-full px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm text-secondary",children:[e.jsx(fe,{className:"text-accent"}),"Manage patient care with precision"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"glass rounded-xl sm:rounded-2xl px-4 sm:px-5 py-2.5 sm:py-3 flex items-center gap-3 shadow-lg",children:[e.jsx(st,{className:"text-primary shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-secondary",children:"Today"}),e.jsx("div",{className:"text-xs sm:text-sm font-semibold text-text truncate",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]}),e.jsxs("button",{className:"relative rounded-xl sm:rounded-2xl px-3 sm:px-4 py-2 sm:py-3 text-white shadow-xl bg-gradient-to-r from-accent to-accent/80 hover:from-accent/90 hover:to-accent/70 transition-all",children:[e.jsx(tt,{className:"text-base sm:text-lg"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 sm:w-3.5 sm:h-3.5 rounded-full bg-accent shadow"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 py-6 sm:py-8 grid grid-cols-1 lg:grid-cols-12 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"glass-elevated rounded-2xl sm:rounded-3xl p-4 sm:p-6 hover-glow-primary",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-text mb-4 sm:mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gradient-to-r from-primary to-accent text-white flex items-center justify-center",children:e.jsx(zt,{className:"text-xs sm:text-sm"})}),"Quick Actions"]}),e.jsxs("div",{className:"flex md:grid md:grid-cols-3 gap-3 sm:gap-4 overflow-x-auto md:overflow-visible snap-x snap-mandatory pb-2 -mx-1 px-1",children:[e.jsxs("button",{className:"group glass rounded-xl sm:rounded-2xl p-4 sm:p-6 lift-on-hover hover-glow-primary transition-all border soft-divider snap-start min-w-[240px] md:min-w-0",children:[e.jsx(nt,{className:"text-primary text-xl sm:text-2xl mb-2"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-text text-base sm:text-[1.05rem]",children:"View All Patients"}),e.jsx("div",{className:"text-secondary text-xs sm:text-sm mt-1",children:"Manage patient records"})]})]}),e.jsxs("button",{className:"group rounded-xl sm:rounded-2xl p-4 sm:p-6 lift-on-hover hover-glow-accent transition-all border soft-divider bg-gradient-to-br from-accent/25 to-accent/10 snap-start min-w-[240px] md:min-w-0",children:[e.jsx(fe,{className:"text-accent text-xl sm:text-2xl mb-2"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-text text-base sm:text-[1.05rem]",children:"Schedule Appointment"}),e.jsx("div",{className:"text-secondary text-xs sm:text-sm mt-1",children:"Book new consultations"})]})]}),e.jsxs("button",{className:"group glass rounded-xl sm:rounded-2xl p-4 sm:p-6 lift-on-hover hover-glow-primary transition-all border soft-divider snap-start min-w-[240px] md:min-w-0",children:[e.jsx(We,{className:"text-secondary text-xl sm:text-2xl mb-2"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-text text-base sm:text-[1.05rem]",children:"Medical Reports"}),e.jsx("div",{className:"text-secondary text-xs sm:text-sm mt-1",children:"Generate & view reports"})]})]})]})]}),e.jsx("div",{className:"min-w-0",children:e.jsx(Xa,{})})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6 sm:space-y-8 min-w-0",children:[e.jsx(Ka,{}),e.jsxs("div",{className:"glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(be,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-text",children:"AI Health Assistant"}),e.jsx("p",{className:"text-xs text-secondary",children:"Medical reference & support"})]})]}),e.jsx("p",{className:"text-sm text-secondary leading-relaxed mb-4",children:"Access medical reference information, get explanations of conditions and treatments, and stay updated with health guidelines."}),e.jsxs("button",{onClick:()=>t(!0),className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(at,{}),"Consult AI Assistant"]})]})]})]}),e.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full shadow-2xl hover:scale-110 transition-all duration-300 flex items-center justify-center z-40 lg:hidden",title:"Open AI Health Assistant",children:e.jsx(be,{className:"text-xl"})}),e.jsx(Nt,{isOpen:a,onClose:()=>t(!1)})]})}function Ja(){var Pe,ns,os,cs,ds,ms,xs,us,hs,ps,gs,fs,bs,ys,js,vs,Ns,ws,ks,Ss,Cs,Ds,As,Is,Es,Ps,Ms,Rs,Fs,Ts,Hs,Ls,Os,Bs;const{shareId:s}=Yt(),a=re(),{user:t}=_(),[l,i]=d.useState(null),[r,o]=d.useState(null),[c,u]=d.useState({name:"",email:""}),[x,f]=d.useState(!0),[n,j]=d.useState(null),[S,b]=d.useState("profile"),[v,C]=d.useState([]),[D,k]=d.useState(!1),[m,N]=d.useState(null),[w,p]=d.useState({hasMore:!1,lastDoc:null,currentPageSize:0,requestedPageSize:20}),[g,h]=d.useState(!1),[A,O]=d.useState(!1),[E,M]=d.useState(""),[J,ie]=d.useState(null),[F,q]=d.useState(!1),[P,ue]=d.useState(null),Ee=d.useCallback(async()=>{try{f(!0);const y=await ga(s,t.uid);if(!y.success){j(y.error);return}i(y.data);const I=await fa(y.data.patientId);I.success&&u(I.data);const B=await ya(y.data.patientId);if(!B.success){j(B.error);return}o(B.data)}catch(y){console.error("Error fetching shared profile:",y),j("Failed to load patient profile. Please try again.")}finally{f(!1)}},[s,t.uid]),he=d.useCallback(async(y=!1)=>{if(l)try{k(!0),N(null);const I=y?w.lastDoc:null,B=await Na(t.uid,l.patientId,I,20);B.success?(C(y?T=>[...T,...B.data]:B.data),p(B.pagination)):N(B.error)}catch(I){console.error("Error fetching medical records:",I),N("Failed to load medical records.")}finally{k(!1)}},[l,t.uid,w.lastDoc]);d.useEffect(()=>{if(!J)return;const y=setTimeout(()=>ie(null),5e3);return()=>clearTimeout(y)},[J]),d.useEffect(()=>{t&&Ee()},[t,s,Ee]),d.useEffect(()=>{l&&S==="medical-records"&&he()},[l,S,he]);const wt=async y=>{if(l){M("");try{O(!0);const I=await ja(t.uid,l.patientId,y);I.success?(h(!1),he(),ie({type:"success",message:"Medical record added successfully"})):M(I.error||"Failed to add medical record")}catch(I){console.error("Error adding medical record:",I),M("Failed to add medical record. Please try again.")}finally{O(!1)}}},kt=async y=>{if(P){M("");try{O(!0);const I=await va(String(P.id),t.uid,y);I.success?(q(!1),ue(null),he(),ie({type:"success",message:"Medical record updated successfully"})):M(I.error||"Failed to update medical record")}catch(I){console.error("Error updating medical record:",I),M("Failed to update medical record. Please try again.")}finally{O(!1)}}},St=({toast:y})=>y?Wt.createPortal(e.jsx("div",{className:"fixed top-20 right-4 z-[9999] pointer-events-none",children:e.jsxs("div",{role:"alert",className:`pointer-events-auto glass-elevated border soft-divider rounded-xl px-5 py-4 text-sm sm:text-base font-semibold shadow-xl flex items-start gap-3 ${y.type==="success"?"text-green-400":"text-red-400"}`,children:[y.type==="success"?e.jsx(et,{className:"mt-0.5 shrink-0"}):e.jsx(Vt,{className:"mt-0.5 shrink-0"}),e.jsx("span",{className:"text-text",children:y.message})]})}),document.body):null,Ct=()=>{const[y,I]=d.useState({visitDate:new Date().toISOString().split("T")[0],diagnosis:"",symptoms:"",medicines:"",prescribedTests:"",followUpNotes:""}),B=T=>{T.preventDefault();const G={...y,symptoms:y.symptoms.split(",").map(W=>W.trim()).filter(W=>W),medicines:y.medicines.split(",").map(W=>W.trim()).filter(W=>W),prescribedTests:y.prescribedTests.split(",").map(W=>W.trim()).filter(W=>W)};wt(G)};return d.useEffect(()=>{if(!g)return;const T=G=>{G.key==="Escape"&&h(!1)};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[]),g?e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm p-4 sm:p-6 flex items-center justify-center",onClick:()=>h(!1),children:e.jsx("div",{className:"glass-elevated rounded-2xl sm:rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border soft-divider",onClick:T=>T.stopPropagation(),children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text",children:"Add Medical Record"}),e.jsx("button",{onClick:()=>h(!1),className:"w-9 h-9 rounded-lg glass border soft-divider text-secondary hover-glow-primary flex items-center justify-center","aria-label":"Close",children:e.jsx(Ke,{className:"text-sm"})})]}),E&&e.jsx("div",{className:"mb-3 sm:mb-4 glass border soft-divider rounded-lg p-3 text-red-400 bg-red-500/10",children:E}),e.jsxs("form",{onSubmit:B,className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Visit Date"}),e.jsx("input",{type:"date",value:y.visitDate,onChange:T=>{I(G=>({...G,visitDate:T.target.value})),M("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Diagnosis"}),e.jsx("input",{type:"text",value:y.diagnosis,onChange:T=>{I(G=>({...G,diagnosis:T.target.value})),M("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",placeholder:"Enter diagnosis",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Symptoms (comma-separated)"}),e.jsx("textarea",{value:y.symptoms,onChange:T=>{I(G=>({...G,symptoms:T.target.value})),M("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Headache, Nausea, Fever"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Medicines (comma-separated)"}),e.jsx("textarea",{value:y.medicines,onChange:T=>{I(G=>({...G,medicines:T.target.value})),M("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Paracetamol 500mg, Ibuprofen 200mg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Prescribed Tests (comma-separated)"}),e.jsx("textarea",{value:y.prescribedTests,onChange:T=>{I(G=>({...G,prescribedTests:T.target.value})),M("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Blood Test, X-Ray, MRI"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Follow-up Notes"}),e.jsx("textarea",{value:y.followUpNotes,onChange:T=>{I(G=>({...G,followUpNotes:T.target.value})),M("")},className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"3",placeholder:"Any additional notes or follow-up instructions"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2 sm:pt-4",children:[e.jsx("button",{type:"submit",disabled:A,className:"flex-1 glass-cta px-4 py-2 flex items-center justify-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",children:A?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{}),"Save Record"]})}),e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 glass rounded-lg border soft-divider text-text hover-glow-primary",children:"Cancel"})]})]})]})})}):null},Dt=()=>{var T,G,W;const[y,I]=d.useState({visitDate:P!=null&&P.visitDate?new Date(P.visitDate).toISOString().split("T")[0]:"",diagnosis:(P==null?void 0:P.diagnosis)||"",symptoms:((T=P==null?void 0:P.symptoms)==null?void 0:T.join(", "))||"",medicines:((G=P==null?void 0:P.medicines)==null?void 0:G.join(", "))||"",prescribedTests:((W=P==null?void 0:P.prescribedTests)==null?void 0:W.join(", "))||"",followUpNotes:(P==null?void 0:P.followUpNotes)||""});d.useEffect(()=>{var $,z,V;P&&I({visitDate:P.visitDate?new Date(P.visitDate).toISOString().split("T")[0]:"",diagnosis:P.diagnosis||"",symptoms:(($=P.symptoms)==null?void 0:$.join(", "))||"",medicines:((z=P.medicines)==null?void 0:z.join(", "))||"",prescribedTests:((V=P.prescribedTests)==null?void 0:V.join(", "))||"",followUpNotes:P.followUpNotes||""})},[]);const B=$=>{$.preventDefault();const z={...y,symptoms:y.symptoms.split(",").map(V=>V.trim()).filter(V=>V),medicines:y.medicines.split(",").map(V=>V.trim()).filter(V=>V),prescribedTests:y.prescribedTests.split(",").map(V=>V.trim()).filter(V=>V)};kt(z)};return F?e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm p-4 sm:p-6 flex items-center justify-center",onClick:()=>q(!1),children:e.jsx("div",{className:"glass-elevated rounded-2xl sm:rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border soft-divider",onClick:$=>$.stopPropagation(),children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text",children:"Edit Medical Record"}),e.jsx("button",{onClick:()=>{q(!1),ue(null)},className:"w-9 h-9 rounded-lg glass border soft-divider text-secondary hover-glow-primary flex items-center justify-center","aria-label":"Close",children:e.jsx(Ke,{className:"text-sm"})})]}),E&&e.jsx("div",{className:"mb-3 sm:mb-4 glass border soft-divider rounded-lg p-3 text-red-400 bg-red-500/10",children:E}),e.jsxs("form",{onSubmit:B,className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Visit Date"}),e.jsx("input",{type:"date",value:y.visitDate,onChange:$=>I(z=>({...z,visitDate:$.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Diagnosis"}),e.jsx("input",{type:"text",value:y.diagnosis,onChange:$=>I(z=>({...z,diagnosis:$.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",placeholder:"Enter diagnosis",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Symptoms (comma-separated)"}),e.jsx("textarea",{value:y.symptoms,onChange:$=>I(z=>({...z,symptoms:$.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Headache, Nausea, Fever"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Medicines (comma-separated)"}),e.jsx("textarea",{value:y.medicines,onChange:$=>I(z=>({...z,medicines:$.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Paracetamol 500mg, Ibuprofen 200mg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Prescribed Tests (comma-separated)"}),e.jsx("textarea",{value:y.prescribedTests,onChange:$=>I(z=>({...z,prescribedTests:$.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"2",placeholder:"e.g., Blood Test, X-Ray, MRI"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-secondary mb-1.5",children:"Follow-up Notes"}),e.jsx("textarea",{value:y.followUpNotes,onChange:$=>I(z=>({...z,followUpNotes:$.target.value})),className:"w-full px-3 py-2 rounded-lg glass border soft-divider text-text placeholder:text-secondary/70 focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-transparent",rows:"3",placeholder:"Any additional notes or follow-up instructions"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2 sm:pt-4",children:[e.jsx("button",{type:"submit",disabled:A,className:"flex-1 glass-cta px-4 py-2 flex items-center justify-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",children:A?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{}),"Update Record"]})}),e.jsx("button",{type:"button",onClick:()=>{q(!1),ue(null)},className:"px-4 py-2 glass rounded-lg border soft-divider text-text hover-glow-primary",children:"Cancel"})]})]})]})})}):null},ee=({title:y,children:I,className:B="",icon:T})=>e.jsxs("div",{className:`glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary ${B}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-[rgba(var(--primary-rgb)/0.15)] text-primary flex items-center justify-center",children:T&&e.jsx(T,{className:"text-base"})}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-text",children:y})]}),I]}),X=({label:y,value:I,icon:B})=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border soft-divider glass",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[B&&e.jsx(B,{className:"text-primary text-sm shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-text truncate",children:y})]}),e.jsx("span",{className:"text-sm text-secondary font-medium max-w-[60%] text-right truncate",children:I||"Not specified"})]}),le=({items:y,colorClass:I="bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"})=>e.jsx("div",{className:"flex flex-wrap gap-2",children:y&&y.length>0?y.map((B,T)=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${I}`,children:B},T)):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"None specified"})}),At=({record:y})=>{const I=()=>{if(!y.createdAt)return!1;const B=y.createdAt.toDate();return(new Date().getTime()-B.getTime())/(1e3*60)<30};return e.jsxs("div",{className:"glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base sm:text-lg font-semibold text-text",children:y.diagnosis||"Medical Record"}),e.jsxs("p",{className:"text-xs sm:text-sm text-secondary",children:[y.visitDate?new Date(y.visitDate).toLocaleDateString():"No date specified",y.createdAt?` at ${new Date(y.createdAt.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:""," ","‚Ä¢ ",y.doctorName||"Unknown Doctor"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[I()&&e.jsx("button",{onClick:()=>{ue(y),q(!0)},className:"p-2 text-primary hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(Be,{className:"text-sm"})}),y.fileName&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-2 text-primary hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ye,{className:"text-sm"})}),e.jsx("button",{className:"p-2 text-primary hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(Js,{className:"text-sm"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Symptoms"}),e.jsx(le,{items:y.symptoms,colorClass:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Medicines"}),e.jsx(le,{items:y.medicines,colorClass:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})]}),y.prescribedTests&&y.prescribedTests.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Prescribed Tests"}),e.jsx(le,{items:y.prescribedTests,colorClass:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"})]}),y.followUpNotes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-text mb-2",children:"Follow-up Notes"}),e.jsx("p",{className:"text-sm text-secondary glass p-3 rounded-lg border soft-divider",children:y.followUpNotes})]})]})]})};return x?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(te,{className:"animate-spin text-4xl text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading patient profile..."})]})}):n?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-8 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-800 dark:text-red-200 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-600 dark:text-red-300 mb-4",children:n}),e.jsx("button",{onClick:()=>a("/doctor"),className:"px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90",children:"Back to Dashboard"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 py-6 space-y-6 aurora-bg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("button",{onClick:()=>a(-1),className:"inline-flex items-center gap-2 glass rounded-full px-3 py-1.5 text-sm text-secondary hover-glow-primary",children:[e.jsx(as,{}),e.jsx("span",{className:"font-medium",children:"Back to Patient List"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs glass border soft-divider text-secondary",children:["Shared on ",((os=(ns=(Pe=l==null?void 0:l.sharedAt)==null?void 0:Pe.toDate)==null?void 0:ns.call(Pe))==null?void 0:os.toLocaleDateString())||"Unknown"]})})]}),e.jsx("div",{className:"glass-elevated rounded-3xl p-5 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 rounded-2xl bg-gradient-to-br from-primary to-accent text-white flex items-center justify-center shadow-lg",children:e.jsx(Z,{className:"text-xl sm:text-2xl"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-text truncate",children:c.name||"Patient Name"}),e.jsxs("p",{className:"text-secondary flex items-center gap-2 text-sm truncate",children:[e.jsx($e,{className:"text-xs"}),e.jsx("span",{className:"truncate",children:c.email||"No email provided"})]})]})]})}),e.jsxs("div",{className:"glass rounded-xl p-1 border soft-divider flex gap-1",children:[e.jsxs("button",{onClick:()=>b("profile"),className:`flex-1 flex items-center justify-center gap-1.5 sm:gap-2 py-1.5 sm:py-2 px-2.5 sm:px-4 rounded-lg font-medium transition-colors text-xs sm:text-sm ${S==="profile"?"bg-[rgba(var(--primary-rgb)/0.15)] text-primary":"text-secondary hover:text-text"}`,children:[e.jsx(Z,{className:"text-xs sm:text-sm"}),"Profile Information"]}),e.jsxs("button",{onClick:()=>b("medical-records"),className:`flex-1 flex items-center justify-center gap-1.5 sm:gap-2 py-1.5 sm:py-2 px-2.5 sm:px-4 rounded-lg font-medium transition-colors text-xs sm:text-sm ${S==="medical-records"?"bg-[rgba(var(--primary-rgb)/0.15)] text-primary":"text-secondary hover:text-text"}`,children:[e.jsx(ge,{className:"text-xs sm:text-sm"}),"Medical Records"]})]}),S==="profile"&&r&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx(ee,{title:"Basic Information",icon:Z,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{label:"Full Name",value:(cs=r.basic)==null?void 0:cs.fullName,icon:Z}),e.jsx(X,{label:"Gender",value:(ds=r.basic)==null?void 0:ds.gender,icon:dt}),e.jsx(X,{label:"Date of Birth",value:(ms=r.basic)!=null&&ms.dob?new Date(r.basic.dob).toLocaleDateString():null,icon:ct}),e.jsx(X,{label:"Contact Number",value:(xs=r.basic)==null?void 0:xs.contactNumber,icon:qe})]})}),e.jsx(ee,{title:"Physical Details",icon:Ue,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{label:"Height",value:(us=r.basic)!=null&&us.height?`${r.basic.height.value} ${r.basic.height.unit}`:null,icon:Ue}),e.jsx(X,{label:"Weight",value:(hs=r.basic)!=null&&hs.weight?`${r.basic.weight.value} ${r.basic.weight.unit}`:null,icon:ss}),e.jsx(X,{label:"Blood Group",value:(ps=r.basic)==null?void 0:ps.bloodGroup,icon:es})]})}),e.jsx(ee,{title:"Emergency Contact",icon:qe,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{label:"Name",value:(fs=(gs=r.basic)==null?void 0:gs.emergencyContact)==null?void 0:fs.name,icon:Z}),e.jsx(X,{label:"Phone",value:(ys=(bs=r.basic)==null?void 0:bs.emergencyContact)==null?void 0:ys.number,icon:qe}),e.jsx(X,{label:"Relation",value:(vs=(js=r.basic)==null?void 0:js.emergencyContact)==null?void 0:vs.relation})]})}),e.jsx(ee,{title:"Chronic Conditions",icon:Je,children:e.jsx(le,{items:(Ns=r.medical)==null?void 0:Ns.chronicConditions,colorClass:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})}),e.jsx(ee,{title:"Allergies",icon:mt,children:e.jsx(le,{items:(ws=r.medical)==null?void 0:ws.allergies,colorClass:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300"})}),e.jsx(ee,{title:"Current Medications",icon:xt,children:e.jsx(le,{items:(ks=r.medical)==null?void 0:ks.currentMedications,colorClass:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"})}),e.jsx(ee,{title:"Disabilities",icon:ut,children:e.jsx(le,{items:(Ss=r.medical)==null?void 0:Ss.disabilities,colorClass:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"})}),e.jsx(ee,{title:"Vision & Hearing",icon:Ge,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ge,{className:"text-primary"}),"Wears Glasses"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${(Ds=(Cs=r.medical)==null?void 0:Cs.vision)!=null&&Ds.wearsGlasses?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(Is=(As=r.medical)==null?void 0:As.vision)!=null&&Is.wearsGlasses?"Yes":"No"})]}),((Ps=(Es=r.medical)==null?void 0:Es.vision)==null?void 0:Ps.wearsGlasses)&&e.jsxs(e.Fragment,{children:[e.jsx(X,{label:"Left Eye",value:(Rs=(Ms=r.medical)==null?void 0:Ms.vision)==null?void 0:Rs.leftEye}),e.jsx(X,{label:"Right Eye",value:(Ts=(Fs=r.medical)==null?void 0:Fs.vision)==null?void 0:Ts.rightEye})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ht,{className:"text-primary"}),"Uses Hearing Aids"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${(Hs=r.medical)!=null&&Hs.hearingAids?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(Ls=r.medical)!=null&&Ls.hearingAids?"Yes":"No"})]})]})}),e.jsx(ee,{title:"Lifestyle Habits",icon:pt,children:e.jsx(le,{items:(Os=r.lifestyle)==null?void 0:Os.habits,colorClass:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})}),e.jsx(ee,{title:"Dietary Preferences",icon:gt,children:e.jsx(le,{items:(Bs=r.lifestyle)==null?void 0:Bs.preferences,colorClass:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"})})]}),S==="medical-records"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-text",children:"Medical Records"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-secondary",children:[v.length," record(s) found"]}),e.jsxs("button",{onClick:()=>h(!0),className:"glass-cta px-4 py-2 flex items-center gap-2",children:[e.jsx(Ve,{className:"text-sm"}),e.jsx("span",{className:"text-sm",children:"Add Medical Record"})]})]})]}),m&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-600 dark:text-red-300",children:m}),e.jsx("button",{onClick:()=>he(),className:"mt-2 text-sm text-red-700 dark:text-red-400 hover:underline",children:"Try again"})]}),D&&v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"animate-spin text-4xl text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading medical records..."})]}):v.length>0?e.jsxs("div",{className:"space-y-4",children:[v.map((y,I)=>e.jsx(At,{record:y},y.id||I)),w.hasMore&&e.jsx("div",{className:"text-center py-4",children:e.jsx("button",{onClick:()=>he(!0),disabled:D,className:"px-6 py-2 glass rounded-lg border soft-divider text-text hover-glow-primary disabled:opacity-50 disabled:cursor-not-allowed",children:D?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"animate-spin"}),"Loading..."]}):"Load More Records"})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"text-6xl text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Medical Records"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No medical records found for this patient."}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity mx-auto",children:[e.jsx(Ve,{className:"text-sm"}),"Add First Medical Record"]})]})]}),!r&&!x&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Z,{className:"text-6xl text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No Profile Data"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This patient hasn't completed their profile yet."})]})]}),e.jsx(Ct,{}),e.jsx(Dt,{}),e.jsx(St,{toast:J})]})}const se=[{id:1,name:"Basic Information",description:"Personal and contact details"},{id:2,name:"Emergency Contact",description:"Emergency contact information"},{id:3,name:"Medical Information",description:"Your medical history and conditions"},{id:4,name:"Lifestyle",description:"Your habits and preferences"}],_s=[{value:"",label:"Select Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"non-binary",label:"Non-binary"},{value:"prefer-not-to-say",label:"Prefer not to say"}],Za=["A+","A-","B+","B-","O+","O-","AB+","AB-"],er=["Regular Exercise","Smoking","Drinking Alcohol","Meditation","Yoga","Running/Jogging","Swimming","Cycling","Weight Training","Walking","Late Night Sleep","Early Morning Routine","Screen Time (High)","Reading","Gaming"],sr=["Vegetarian","Vegan","Non-Vegetarian","Gluten-Free","Low Sugar","No Dairy","Organic Food","Home Cooked Meals","Fast Food","Spicy Food","Low Sodium","High Protein Diet"],tr=["High Blood Pressure","Diabetes Type 1","Diabetes Type 2","Asthma","Heart Disease","Cancer","Stroke","Arthritis","Depression","Anxiety","COPD","Kidney Disease","Liver Disease","Thyroid Disorder","Migraine","Epilepsy","Fibromyalgia","Chronic Fatigue Syndrome","Osteoporosis","Bipolar Disorder","Schizophrenia","Multiple Sclerosis","Parkinson's Disease","Alzheimer's Disease","IBS","Crohn's Disease","Ulcerative Colitis","Celiac Disease"],ar=["Penicillin","Sulfa Drugs","NSAIDs","Aspirin","Latex","Peanuts","Tree Nuts","Milk","Eggs","Wheat","Soy","Fish","Shellfish","Pollen","Dust Mites","Pet Dander","Mold","Bee Stings","Contrast Dye"],rr=["Lisinopril","Atorvastatin","Levothyroxine","Metformin","Amlodipine","Metoprolol","Omeprazole","Simvastatin","Losartan","Albuterol","Gabapentin","Hydrochlorothiazide","Sertraline","Acetaminophen","Ibuprofen","Fluoxetine","Amoxicillin","Prednisone","Escitalopram","Tramadol","Furosemide","Antihypertensives","Antidiabetics","Statins","Anticoagulants","Beta Blockers","Antidepressants","Antibiotics","Pain Relievers","Anti-inflammatories","Antihistamines","Inhalers","Thyroid Medications","Vitamins & Supplements"],ir=["Mobility Impairment","Visual Impairment","Hearing Impairment","Speech Impairment","Cognitive Disability","Intellectual Disability","Learning Disability","Neurological Disability","Psychiatric Disability","Developmental Disability","Wheelchair User","Prosthetic User","Amputee","Multiple Sclerosis","Cerebral Palsy","Spinal Cord Injury","Neurological Disorder","Chronic Pain","Missing Limb"],Qe="w-full rounded-xl glass border soft-divider px-4 py-3 text-sm font-medium text-text placeholder-secondary focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/40 transition-all",qs="w-full rounded-xl glass border soft-divider px-4 py-3 text-left text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/40",zs=(s,a)=>`cursor-pointer select-none px-4 py-3 text-sm rounded-lg mx-1 my-0.5 ${s?"bg-white/10":""} ${a?"text-primary font-semibold":"text-text"}`,lr=s=>`px-4 py-2 rounded-xl text-xs sm:text-sm font-medium transition-all border soft-divider ${s?"glass-cta text-white shadow-lg scale-[1.02]":"glass text-text hover-glow-primary"}`,ce=je.memo(({label:s,type:a="text",value:t,onChange:l,placeholder:i,className:r=""})=>e.jsxs("div",{className:r,children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-secondary mb-1",children:s}),e.jsx("input",{type:a,value:t,onChange:l,placeholder:i,className:Qe})]})),pe=je.memo(({label:s,options:a,selectedItems:t,onToggle:l,helper:i})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-bold text-text",children:s}),t.length>0&&e.jsxs("span",{className:"text-[11px] glass px-2 py-0.5 rounded-full border soft-divider text-secondary",children:[t.length," selected"]})]}),i&&e.jsx("p",{className:"text-xs text-secondary mt-1",children:i})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2.5",children:a.map(r=>{const o=t.includes(r);return e.jsx("button",{type:"button",onClick:()=>l(r),className:lr(o),children:r},r)})})]})),nr=je.memo(({basicData:s,onBasicChange:a,onNestedChange:t})=>{var r;const l=(o,c)=>a(o,c.target?c.target.value:c),i=(o,c)=>u=>t("basic",o,c,u.target.value);return e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsx(ce,{label:"Full Name",value:s.fullName,onChange:o=>l("fullName",o),placeholder:"Enter your full name",className:"sm:col-span-2"}),e.jsx(ce,{label:"Date of Birth",type:"date",value:s.dob,onChange:o=>l("dob",o)}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-secondary mb-1",children:"Gender"}),e.jsx(H,{value:s.gender,onChange:o=>l("gender",o),children:e.jsxs("div",{className:"relative",children:[e.jsx(H.Button,{className:qs,children:e.jsx("span",{className:s.gender?"text-text":"text-secondary",children:((r=_s.find(o=>o.value===s.gender))==null?void 0:r.label)||"Select Gender"})}),e.jsx(H.Options,{className:"absolute z-20 mt-2 max-h-60 w-full overflow-auto rounded-xl glass-elevated border soft-divider shadow-xl p-1",children:_s.slice(1).map(o=>e.jsx(H.Option,{value:o.value,className:({active:c,selected:u})=>zs(c,u),children:o.label},o.value))})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-secondary mb-1",children:"Blood Group"}),e.jsx(H,{value:s.bloodGroup,onChange:o=>l("bloodGroup",o),children:e.jsxs("div",{className:"relative",children:[e.jsx(H.Button,{className:qs,children:e.jsx("span",{className:s.bloodGroup?"text-text":"text-secondary",children:s.bloodGroup||"Select Blood Group"})}),e.jsx(H.Options,{className:"absolute z-20 mt-2 max-h-60 w-full overflow-auto rounded-xl glass-elevated border soft-divider shadow-xl p-1",children:Za.map(o=>e.jsx(H.Option,{value:o,className:({active:c,selected:u})=>zs(c,u),children:o},o))})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-secondary mb-1",children:"Height"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:s.height.value,onChange:i("height","value"),placeholder:"170",className:`${Qe} flex-1`}),e.jsxs("select",{value:s.height.unit,onChange:i("height","unit"),className:"glass border soft-divider rounded-xl px-3 py-3 text-sm font-medium w-20",children:[e.jsx("option",{value:"cm",children:"cm"}),e.jsx("option",{value:"ft",children:"ft"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-secondary mb-1",children:"Weight"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:s.weight.value,onChange:i("weight","value"),placeholder:"70",className:`${Qe} flex-1`}),e.jsxs("select",{value:s.weight.unit,onChange:i("weight","unit"),className:"glass border soft-divider rounded-xl px-3 py-3 text-sm font-medium w-20",children:[e.jsx("option",{value:"kg",children:"kg"}),e.jsx("option",{value:"lbs",children:"lbs"})]})]})]}),e.jsx(ce,{label:"Contact Number",value:s.contactNumber,onChange:o=>l("contactNumber",o),placeholder:"Enter your phone number",className:"sm:col-span-2"})]})})}),or=je.memo(({basicData:s,onNestedChange:a})=>{const t=l=>i=>a("basic","emergencyContact",l,i.target.value);return e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ce,{label:"Name",value:s.emergencyContact.name,onChange:t("name"),placeholder:"Contact name"}),e.jsx(ce,{label:"Phone",value:s.emergencyContact.number,onChange:t("number"),placeholder:"Contact number"}),e.jsx(ce,{label:"Relation",value:s.emergencyContact.relation,onChange:t("relation"),placeholder:"Relationship (e.g., Mother)",className:"md:col-span-2"})]})})}),cr=je.memo(({medicalData:s,onMultiSelectToggle:a,onNestedChange:t,setProfileData:l})=>{const i=(c,u)=>a("medical",c,u),r=c=>u=>t("medical","vision",c,c==="wearsGlasses"?u.target.checked:u.target.value),o=c=>l(u=>({...u,medical:{...u.medical,hearingAids:c.target.checked}}));return e.jsxs("div",{className:"space-y-10",children:[e.jsx(pe,{label:"ü©∫ Chronic Conditions",options:tr,selectedItems:s.chronicConditions,onToggle:c=>i("chronicConditions",c)}),e.jsx(pe,{label:"‚ö†Ô∏è Allergies",options:ar,selectedItems:s.allergies,onToggle:c=>i("allergies",c)}),e.jsx(pe,{label:"üíä Current Medications",options:rr,selectedItems:s.currentMedications,onToggle:c=>i("currentMedications",c)}),e.jsx(pe,{label:"‚ôø Disabilities",options:ir,selectedItems:s.disabilities,onToggle:c=>i("disabilities",c)}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-text tracking-wide",children:"Vision"}),e.jsxs("label",{className:"flex items-center gap-3 text-sm text-text",children:[e.jsx("input",{type:"checkbox",checked:s.vision.wearsGlasses,onChange:r("wearsGlasses"),className:"w-4 h-4 rounded border soft-divider focus:ring-primary/40"})," Wears Glasses"]}),s.vision.wearsGlasses&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ce,{label:"Left Eye",value:s.vision.leftEye,onChange:r("leftEye"),placeholder:"-2.5"}),e.jsx(ce,{label:"Right Eye",value:s.vision.rightEye,onChange:r("rightEye"),placeholder:"-3.0"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-text tracking-wide",children:"Hearing"}),e.jsxs("label",{className:"flex items-center gap-3 text-sm text-text",children:[e.jsx("input",{type:"checkbox",checked:s.hearingAids,onChange:o,className:"w-4 h-4 rounded border soft-divider focus:ring-primary/40"})," Uses Hearing Aids"]})]})]})]})}),dr=je.memo(({lifestyleData:s,onMultiSelectToggle:a})=>e.jsxs("div",{className:"space-y-10",children:[e.jsx(pe,{label:"üèÉ‚Äç‚ôÇÔ∏è Your Habits",options:er,selectedItems:s.habits,onToggle:t=>a("lifestyle","habits",t)}),e.jsx(pe,{label:"üçΩÔ∏è Dietary Preferences",options:sr,selectedItems:s.preferences,onToggle:t=>a("lifestyle","preferences",t)})]}));function mr(){const{user:s}=_(),a=re(),[t,l]=d.useState(1),[i,r]=d.useState(!0),[o,c]=d.useState(!1),[u,x]=d.useState(""),[f,n]=d.useState({basic:{fullName:"",dob:"",gender:"",bloodGroup:"",height:{value:"",unit:"cm"},weight:{value:"",unit:"kg"},contactNumber:"",emergencyContact:{name:"",number:"",relation:""}},medical:{chronicConditions:[],allergies:[],currentMedications:[],disabilities:[],vision:{leftEye:"",rightEye:"",wearsGlasses:!1},hearingAids:!1},lifestyle:{habits:[],preferences:[]}});d.useEffect(()=>{(async()=>{if(s!=null&&s.uid)try{const m=await Ie(s.uid);m.success&&n(N=>({...N,...m.data}))}finally{r(!1)}})()},[s==null?void 0:s.uid]);const j=d.useCallback((m,N)=>{n(w=>({...w,basic:{...w.basic,[m]:N}}))},[]),S=d.useCallback((m,N,w,p)=>{n(g=>({...g,[m]:{...g[m],[N]:{...g[m][N],[w]:p}}}))},[]),b=d.useCallback((m,N,w)=>{n(p=>{const g=p[m][N]||[];return{...p,[m]:{...p[m],[N]:g.includes(w)?g.filter(h=>h!==w):[...g,w]}}})},[]),v=()=>t<se.length&&l(m=>m+1),C=()=>t>1&&l(m=>m-1),D=async()=>{if(s!=null&&s.uid){c(!0);try{(await Fa(s.uid,f)).success&&(x("Profile updated"),setTimeout(()=>{x(""),a("../view-profile")},1500))}finally{c(!1)}}},k=d.useMemo(()=>{const{basic:m,medical:N,lifestyle:w}=f;switch(t){case 1:return e.jsx(nr,{basicData:m,onBasicChange:j,onNestedChange:S});case 2:return e.jsx(or,{basicData:m,onNestedChange:S});case 3:return e.jsx(cr,{medicalData:N,onMultiSelectToggle:b,onNestedChange:S,setProfileData:n});case 4:return e.jsx(dr,{lifestyleData:w,onMultiSelectToggle:b});default:return null}},[t,f,j,S,b]);return i?e.jsx("div",{className:"min-h-screen aurora-bg px-4 sm:px-8 py-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto animate-pulse space-y-8",children:[e.jsx("div",{className:"h-10 w-60 glass rounded-xl"}),e.jsx("div",{className:"glass rounded-3xl p-6 border soft-divider space-y-4",children:Array.from({length:4}).map((m,N)=>e.jsx("div",{className:"h-14 glass rounded-xl border soft-divider"},N))})]})}):e.jsx("div",{className:"min-h-screen aurora-bg px-3 sm:px-6 py-8 sm:py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-10",children:[e.jsx("div",{className:"hidden sm:block glass rounded-2xl p-5 sm:p-6 border soft-divider",children:e.jsx("div",{className:"flex items-center justify-between gap-2",children:se.map((m,N)=>e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsxs("button",{type:"button",onClick:()=>l(m.id),onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),l(m.id))},"aria-current":t===m.id?"step":void 0,"aria-label":`Go to step ${m.id}: ${m.name}`,className:"group flex flex-col items-center w-full focus:outline-none",children:[e.jsx("div",{className:`h-12 w-12 sm:h-14 sm:w-14 rounded-full flex items-center justify-center font-bold shadow-lg transition-all cursor-pointer ring-offset-2 ring-primary/40 focus-visible:ring-2 ${t>=m.id?"bg-gradient-to-r from-primary to-accent text-white":"glass text-secondary border soft-divider group-hover:text-text"}`,children:t>m.id?"‚úì":m.id}),e.jsx("div",{className:"mt-2 text-center px-1 min-w-0",children:e.jsx("p",{className:`text-[10px] sm:text-xs font-semibold uppercase tracking-wide truncate transition-colors ${t===m.id?"text-text":"group-hover:text-text text-secondary"}`,children:m.name})})]}),N!==se.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-1 sm:mx-3 rounded-full transition-colors ${t>m.id?"bg-primary/60":"bg-white/15 dark:bg-black/20 group-hover:bg-primary/40"}`})]},m.id))})}),e.jsxs("div",{className:"sm:hidden glass rounded-2xl p-4 border soft-divider",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-1/2 left-0 w-full h-px bg-white/15","aria-hidden":"true"}),e.jsx("div",{className:"absolute top-1/2 left-0 h-px bg-primary/60 transition-all duration-300",style:{width:`${(t-1)/(se.length-1)*100}%`},"aria-hidden":"true"}),e.jsx("div",{className:"flex justify-between items-center",children:se.map(m=>e.jsx("button",{type:"button",onClick:()=>l(m.id),"aria-label":`Go to step ${m.id}: ${m.name}`,className:`relative z-10 h-11 w-11 rounded-full flex items-center justify-center text-sm font-semibold transition-all ring-offset-2 ring-primary/40 focus:outline-none focus-visible:ring-2 ${t>=m.id?"bg-gradient-to-r from-primary to-accent text-white shadow-lg":"glass text-secondary border soft-divider active:scale-95"}`,children:t>m.id?"‚úì":m.id},m.id))})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-[11px] font-semibold tracking-wide text-text uppercase",children:se[t-1].name}),e.jsx("p",{className:"text-[10px] mt-1 text-secondary line-clamp-2",children:se[t-1].description})]})]}),e.jsxs("div",{className:"glass-elevated rounded-3xl p-6 sm:p-10 border soft-divider",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-text mb-2",children:["Edit ",se[t-1].name]}),e.jsx("p",{className:"text-secondary text-sm",children:se[t-1].description})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(K,{to:"../view-profile",className:"glass rounded-xl border soft-divider px-5 py-3 text-sm font-semibold text-text hover-glow-primary",children:"Cancel"})})]}),u&&e.jsx("div",{className:"mb-6 glass border soft-divider rounded-xl p-4 text-green-400 text-sm font-semibold",children:u}),k,e.jsxs("div",{className:"flex justify-between pt-10",children:[t>1?e.jsxs("button",{onClick:C,className:"glass rounded-xl border soft-divider px-6 py-3 text-sm font-semibold flex items-center gap-2 hover-glow-primary",children:[e.jsx(as,{className:"text-primary"})," Previous"]}):e.jsx("div",{}),t<se.length?e.jsxs("button",{onClick:v,className:"glass-cta rounded-xl px-8 py-3 text-sm font-semibold flex items-center gap-2",children:["Next ",e.jsx(Zs,{})]}):e.jsxs("button",{onClick:D,disabled:o,className:"glass-cta rounded-xl px-8 py-3 text-sm font-semibold flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Xe,{})," ",o?"Saving...":"Save Profile"]})]})]})]})})}const He=[{id:1,name:"Basic Information",description:"Personal and contact details"},{id:2,name:"Medical Context",description:"Your medical history and conditions"},{id:3,name:"Lifestyle",description:"Your habits and preferences"}],Ys=[{value:"",label:"Select Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"non-binary",label:"Non-binary"},{value:"prefer-not-to-say",label:"Prefer not to say"}],Ws=[{value:"",label:"Select Blood Group"},{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"}],xr=["Regular Exercise","Smoking","Drinking Alcohol","Meditation","Yoga","Running/Jogging","Swimming","Cycling","Weight Training","Walking","Late Night Sleep","Early Morning Routine","Screen Time (High)","Reading","Gaming"],ur=["Vegetarian","Vegan","Non-Vegetarian","Gluten-Free","Low Sugar","No Dairy","Organic Food","Home Cooked Meals","Fast Food","Spicy Food","Low Sodium","High Protein Diet"],hr=["High Blood Pressure","Diabetes Type 1","Diabetes Type 2","Asthma","Heart Disease","Cancer","Stroke","Arthritis","Depression","Anxiety","COPD","Kidney Disease","Liver Disease","Thyroid Disorder","Migraine","Epilepsy","Fibromyalgia","Chronic Fatigue Syndrome","Osteoporosis","Bipolar Disorder","Schizophrenia","Multiple Sclerosis","Parkinson's Disease","Alzheimer's Disease","IBS","Crohn's Disease","Ulcerative Colitis","Celiac Disease","Other"],pr=["Penicillin","Sulfa Drugs","NSAIDs","Aspirin","Latex","Peanuts","Tree Nuts","Milk","Eggs","Wheat","Soy","Fish","Shellfish","Pollen","Dust Mites","Pet Dander","Mold","Bee Stings","Contrast Dye","Other"],gr=["Lisinopril","Atorvastatin","Levothyroxine","Metformin","Amlodipine","Metoprolol","Omeprazole","Simvastatin","Losartan","Albuterol","Gabapentin","Hydrochlorothiazide","Sertraline","Acetaminophen","Ibuprofen","Fluoxetine","Amoxicillin","Prednisone","Escitalopram","Tramadol","Furosemide","Antihypertensives","Antidiabetics","Statins","Anticoagulants","Beta Blockers","Antidepressants","Antibiotics","Pain Relievers","Anti-inflammatories","Antihistamines","Inhalers","Thyroid Medications","Vitamins & Supplements","Other"],de=s=>`
	mt-2 block w-full rounded-xl px-3 py-3 text-sm font-medium placeholder-secondary
	bg-white dark:bg-neutral-900 border border-gray-200 dark:border-white/10 text-text
	focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary/50 shadow-sm
	transition-all duration-150
	${s?"border-red-500 focus:ring-red-400 focus:border-red-500":""}
`.replace(/\s+/g," ").trim(),Vs=s=>`
	px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-150 text-xs sm:text-sm font-medium text-center
	${s?"bg-primary text-white shadow-md":"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-white/10 text-text hover:border-primary/50"}
`.replace(/\s+/g," ").trim(),we=s=>`
	mt-2 block w-full rounded-xl px-3 py-3 text-sm text-left
	bg-white dark:bg-neutral-900 border border-primary/30 dark:border-primary/30
	focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary/60 shadow-[0_0_0_1px_var(--color-primary)]
	transition-all duration-150 text-text
	${s?"border-red-500 focus:ring-red-400 focus:border-red-500 shadow-none":""}
`.replace(/\s+/g," ").trim(),Ks=`
	mt-2 rounded-xl px-3 py-3 text-sm font-medium
	bg-white dark:bg-neutral-900 border border-gray-200 dark:border-white/10
	focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary/50 shadow-sm
	transition-all duration-150
	h-[46px] leading-none min-w-[70px] text-text
`.replace(/\s+/g," ").trim(),ke=`absolute z-30 mt-2 max-h-60 w-full overflow-auto rounded-xl
 bg-white dark:bg-neutral-900 border border-primary/40 dark:border-primary/40 shadow-xl ring-1 ring-primary/10 dark:ring-primary/20`,Se=(s,a)=>`cursor-pointer select-none px-4 py-2.5 text-sm transition-all duration-150 rounded-lg
	${a?"bg-primary text-white font-semibold shadow-md":s?"bg-primary/10 dark:bg-primary/20 text-text":"text-text"}`;function fr(){const s=re(),{user:a,userProfile:t,refreshUserProfile:l,loading:i}=_(),[r,o]=d.useState(1),[c,u]=d.useState(!1),[x,f]=d.useState({}),[n,j]=d.useState({basic:{fullName:"",dob:"",gender:"",bloodGroup:"",height:{value:"",unit:"cm"},weight:{value:"",unit:"kg"},contactNumber:"",emergencyContact:{name:"",number:"",relation:""}},medical:{chronicConditions:[],allergies:[],currentMedications:[],customChronicCondition:"",customAllergy:"",customMedication:"",vision:{leftEye:"",rightEye:"",wearsGlasses:!1},hearingAids:!1},lifestyle:{habits:[],preferences:[]},onboardingCompleted:!1});if(d.useEffect(()=>{t&&t.onboardingCompleted===!0&&s("/user")},[t,s]),i)return e.jsx("div",{className:"min-h-screen bg-background aurora-bg flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-primary text-lg",children:"Loading..."})})});const S=p=>{const{name:g,value:h}=p.target;if(g.includes(".")){const[A,O]=g.split(".");j(E=>({...E,basic:{...E.basic,[A]:{...E.basic[A],[O]:h}}}))}else j(A=>({...A,basic:{...A.basic,[g]:h}}))},b=(p,g,h)=>{j(A=>({...A,[p]:{...A[p],[g]:h}}))},v=(p,g,h)=>{j(A=>({...A,[p]:{...A[p],[g]:h}}))},C=(p,g)=>{j(h=>({...h,lifestyle:{...h.lifestyle,[p]:g}}))},D=()=>{const p={},{basic:g}=n;return g.fullName||(p.fullName="Full name is required"),g.dob||(p.dob="Date of birth is required"),g.gender||(p.gender="Gender is required"),g.bloodGroup||(p.bloodGroup="Blood group is required"),g.height.value||(p.height="Height is required"),g.weight.value||(p.weight="Weight is required"),f(p),Object.keys(p).length===0},k=()=>{const p={},{medical:g}=n;return g.chronicConditions.includes("Other")&&!g.customChronicCondition.trim()&&(p.customChronicCondition="Please specify your chronic condition"),g.allergies.includes("Other")&&!g.customAllergy.trim()&&(p.customAllergy="Please specify your allergy"),g.currentMedications.includes("Other")&&!g.customMedication.trim()&&(p.customMedication="Please specify your medication"),f(p),Object.keys(p).length===0},m=()=>(f({}),!0),N=async()=>{if(!(r===1&&!D())&&!(r===2&&!k())){r===3&&m();try{u(!0);const p=r===1?{basic:n.basic}:r===2?{medical:{...n.medical,chronicConditions:n.medical.customChronicCondition?[...n.medical.chronicConditions.filter(g=>g!=="Other"),n.medical.customChronicCondition]:n.medical.chronicConditions.filter(g=>g!=="Other"),allergies:n.medical.customAllergy?[...n.medical.allergies.filter(g=>g!=="Other"),n.medical.customAllergy]:n.medical.allergies.filter(g=>g!=="Other"),currentMedications:n.medical.customMedication?[...n.medical.currentMedications.filter(g=>g!=="Other"),n.medical.customMedication]:n.medical.currentMedications.filter(g=>g!=="Other")}}:r===3?{lifestyle:n.lifestyle}:{};if(a!=null&&a.uid&&Object.keys(p).length>0){const g=await Ra(a.uid,p);if(!g.success)throw new Error(g.error||"Failed to save profile")}if(r===1&&(a!=null&&a.uid)){const g=U(L,"users",a.uid);await _e(g,{onboardingCompleted:!0})}if(r===3){await l(),s("/user");return}o(g=>g+1)}catch(p){console.error("Error saving data:",p),f({submit:p.message})}finally{u(!1)}}},w=()=>{var p,g;switch(r){case 1:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-text mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",name:"fullName",value:n.basic.fullName,onChange:S,placeholder:"Enter your full name",className:de(x.fullName)}),x.fullName&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-text mb-1",children:"Date of Birth *"}),e.jsx("input",{type:"date",name:"dob",value:n.basic.dob,onChange:S,className:de(x.dob)}),x.dob&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.dob})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-text mb-1",children:"Gender *"}),e.jsx(H,{value:n.basic.gender,onChange:h=>S({target:{name:"gender",value:h}}),children:e.jsxs("div",{className:"relative",children:[e.jsx(H.Button,{className:we(x.gender),children:e.jsx("span",{className:n.basic.gender?"text-text":"text-secondary",children:((p=Ys.find(h=>h.value===n.basic.gender))==null?void 0:p.label)||"Select Gender"})}),e.jsx(H.Options,{className:ke,children:Ys.slice(1).map(h=>e.jsx(H.Option,{value:h.value,className:({active:A,selected:O})=>Se(A,O),children:h.label},h.value))})]})}),x.gender&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-text mb-1",children:"Blood Group *"}),e.jsx(H,{value:n.basic.bloodGroup,onChange:h=>S({target:{name:"bloodGroup",value:h}}),children:e.jsxs("div",{className:"relative",children:[e.jsx(H.Button,{className:we(x.bloodGroup),children:e.jsx("span",{className:n.basic.bloodGroup?"text-text":"text-secondary",children:((g=Ws.find(h=>h.value===n.basic.bloodGroup))==null?void 0:g.label)||"Select Blood Group"})}),e.jsx(H.Options,{className:ke,children:Ws.slice(1).map(h=>e.jsx(H.Option,{value:h.value,className:({active:A,selected:O})=>Se(A,O),children:h.label},h.value))})]})}),x.bloodGroup&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.bloodGroup})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-text mb-1",children:"Height *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",name:"height.value",value:n.basic.height.value,onChange:S,placeholder:"165",className:`${de(x.height)} flex-1`}),e.jsxs("select",{name:"height.unit",value:n.basic.height.unit,onChange:S,className:Ks,children:[e.jsx("option",{value:"cm",children:"cm"}),e.jsx("option",{value:"ft",children:"ft"})]})]}),x.height&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.height})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-text mb-1",children:"Weight *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",name:"weight.value",value:n.basic.weight.value,onChange:S,placeholder:"70",className:`${de(x.weight)} flex-1`}),e.jsxs("select",{name:"weight.unit",value:n.basic.weight.unit,onChange:S,className:Ks,children:[e.jsx("option",{value:"kg",children:"kg"}),e.jsx("option",{value:"lbs",children:"lbs"})]})]}),x.weight&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.weight})]})]}),x.submit&&e.jsx("div",{className:"glass rounded-xl p-4 border border-red-500/40",children:e.jsx("p",{className:"text-sm text-red-500",children:x.submit})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"button",onClick:N,disabled:c,className:"glass-cta px-6 py-3 rounded-xl disabled:opacity-50",children:c?"Saving...":"Next Step ‚Üí"})})]});case 2:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-bold text-text mb-3",children:"ü©∫ Chronic Conditions"}),e.jsx(H,{value:n.medical.chronicConditions,onChange:h=>b("medical","chronicConditions",h),multiple:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(H.Button,{className:we(!1),children:e.jsx("span",{className:n.medical.chronicConditions.length?"text-text":"text-secondary",children:n.medical.chronicConditions.length?n.medical.chronicConditions.join(", "):"Select chronic conditions"})}),e.jsx(H.Options,{className:ke,children:hr.map(h=>e.jsx(H.Option,{value:h,className:({active:A,selected:O})=>Se(A,O),children:h},h))})]})}),n.medical.chronicConditions.includes("Other")&&e.jsxs("div",{className:"mt-3",children:[e.jsx("input",{type:"text",placeholder:"Please specify your condition",value:n.medical.customChronicCondition,onChange:h=>v("medical","customChronicCondition",h.target.value),className:de(x.customChronicCondition)}),x.customChronicCondition&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.customChronicCondition})]}),n.medical.chronicConditions.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:n.medical.chronicConditions.map((h,A)=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg text-xs glass border soft-divider",children:h==="Other"&&n.medical.customChronicCondition?n.medical.customChronicCondition:h},A))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-bold text-text mb-3",children:"‚ö†Ô∏è Allergies"}),e.jsx(H,{value:n.medical.allergies,onChange:h=>b("medical","allergies",h),multiple:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(H.Button,{className:we(!1),children:e.jsx("span",{className:n.medical.allergies.length?"text-text":"text-secondary",children:n.medical.allergies.length?n.medical.allergies.join(", "):"Select allergies"})}),e.jsx(H.Options,{className:ke,children:pr.map(h=>e.jsx(H.Option,{value:h,className:({active:A,selected:O})=>Se(A,O),children:h},h))})]})}),n.medical.allergies.includes("Other")&&e.jsxs("div",{className:"mt-3",children:[e.jsx("input",{type:"text",placeholder:"Please specify your allergy",value:n.medical.customAllergy,onChange:h=>v("medical","customAllergy",h.target.value),className:de(x.customAllergy)}),x.customAllergy&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.customAllergy})]}),n.medical.allergies.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:n.medical.allergies.map((h,A)=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg text-xs glass border soft-divider",children:h==="Other"&&n.medical.customAllergy?n.medical.customAllergy:h},A))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-bold text-text mb-3",children:"üíä Current Medications"}),e.jsx(H,{value:n.medical.currentMedications,onChange:h=>b("medical","currentMedications",h),multiple:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(H.Button,{className:we(!1),children:e.jsx("span",{className:n.medical.currentMedications.length?"text-text":"text-secondary",children:n.medical.currentMedications.length?n.medical.currentMedications.join(", "):"Select medications"})}),e.jsx(H.Options,{className:ke,children:gr.map(h=>e.jsx(H.Option,{value:h,className:({active:A,selected:O})=>Se(A,O),children:h},h))})]})}),n.medical.currentMedications.includes("Other")&&e.jsxs("div",{className:"mt-3",children:[e.jsx("input",{type:"text",placeholder:"Please specify your medication",value:n.medical.customMedication,onChange:h=>v("medical","customMedication",h.target.value),className:de(x.customMedication)}),x.customMedication&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x.customMedication})]}),n.medical.currentMedications.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:n.medical.currentMedications.map((h,A)=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg text-xs glass border soft-divider",children:h==="Other"&&n.medical.customMedication?n.medical.customMedication:h},A))})]}),x.submit&&e.jsx("div",{className:"glass rounded-xl p-4 border border-red-500/40 text-sm text-red-500",children:x.submit}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(h=>h-1),className:"glass rounded-xl px-5 py-3 text-text border soft-divider",children:"‚Üê Back"}),e.jsx("button",{type:"button",onClick:N,disabled:c,className:"glass-cta px-6 py-3 rounded-xl disabled:opacity-50",children:c?"Saving...":"Next Step ‚Üí"})]})]});case 3:return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-bold text-text mb-3",children:"üèÉ‚Äç‚ôÇÔ∏è Your Habits"}),e.jsx("p",{className:"text-sm text-secondary mb-4",children:"Select all that apply"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:xr.map(h=>{const A=n.lifestyle.habits.includes(h);return e.jsx("button",{type:"button",onClick:()=>{const O=n.lifestyle.habits;C("habits",A?O.filter(E=>E!==h):[...O,h])},className:Vs(A),children:h},h)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-bold text-text mb-3",children:"üçΩÔ∏è Dietary Preferences"}),e.jsx("p",{className:"text-sm text-secondary mb-4",children:"Select your dietary preferences and restrictions"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:ur.map(h=>{const A=n.lifestyle.preferences.includes(h);return e.jsx("button",{type:"button",onClick:()=>{const O=n.lifestyle.preferences;C("preferences",A?O.filter(E=>E!==h):[...O,h])},className:Vs(A),children:h},h)})})]}),x.submit&&e.jsx("div",{className:"glass rounded-xl p-4 border border-red-500/40 text-sm text-red-500",children:x.submit}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(h=>h-1),className:"glass rounded-xl px-5 py-3 text-text border soft-divider",children:"‚Üê Back"}),e.jsx("button",{type:"button",onClick:N,disabled:c,className:"glass-cta px-6 py-3 rounded-xl disabled:opacity-50",children:c?"Saving...":"Finish ‚Üí"})]})]});default:return null}};return e.jsx("div",{className:"min-h-screen bg-background aurora-bg px-3 sm:px-6 py-6 sm:py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"mb-8 sm:mb-10",children:e.jsx("div",{className:"glass rounded-2xl p-4 sm:p-6 border soft-divider",children:e.jsx("div",{className:"flex items-center justify-between gap-2",children:He.map((p,g)=>e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:`rounded-full h-12 w-12 sm:h-14 sm:w-14 flex items-center justify-center font-bold text-base sm:text-lg shadow-lg ${r>=p.id?"bg-gradient-to-r from-primary to-accent text-white":"glass border soft-divider text-secondary"}`,children:r>p.id?e.jsx("span",{className:"text-xl",children:"‚úì"}):e.jsx("span",{children:p.id})}),e.jsxs("div",{className:"mt-2 text-center min-w-0",children:[e.jsx("h3",{className:`text-[11px] sm:text-sm font-bold truncate ${r>=p.id?"text-text":"text-secondary"}`,children:p.name}),e.jsx("p",{className:"hidden sm:block text-xs text-secondary mt-1",children:p.description})]})]}),g!==He.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 sm:mx-4 rounded-full ${r>p.id?"bg-primary/60":"bg-white/20 dark:bg-black/20"}`})]},p.id))})})}),e.jsxs("div",{className:"glass-elevated rounded-3xl p-5 sm:p-8 border soft-divider",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text mb-2",children:He[r-1].name}),e.jsx("p",{className:"text-secondary",children:He[r-1].description})]}),w()]})]})})}function br(){var b,v,C,D,k,m,N;const{user:s}=_(),[a,t]=d.useState(null),[l,i]=d.useState(!0),[r,o]=d.useState(null);if(d.useEffect(()=>{(async()=>{if(s!=null&&s.uid)try{const p=await Ie(s.uid);p.success?t(p.data):o(p.error||"Failed to load profile")}catch(p){console.error("Error fetching profile:",p),o("Failed to load profile")}finally{i(!1)}})()},[s]),l)return e.jsx("div",{className:"min-h-screen bg-background aurora-bg px-4 sm:px-8 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto animate-pulse space-y-8",children:[e.jsx("div",{className:"h-10 w-56 glass rounded-xl"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:Array.from({length:9}).map((w,p)=>e.jsx("div",{className:"h-52 glass rounded-2xl border soft-divider"},p))})]})});if(r)return e.jsx("div",{className:"min-h-screen bg-background aurora-bg flex items-center justify-center px-4",children:e.jsxs("div",{className:"glass rounded-3xl p-10 border soft-divider max-w-md w-full text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text",children:"Profile Error"}),e.jsx("p",{className:"text-secondary text-sm",children:r}),e.jsx(K,{to:"/user",className:"glass-cta px-6 py-3 rounded-xl font-semibold inline-block",children:"Back to Dashboard"})]})});if(!a)return e.jsx("div",{className:"min-h-screen bg-background aurora-bg flex items-center justify-center px-4",children:e.jsxs("div",{className:"glass rounded-3xl p-10 border soft-divider max-w-md w-full text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text",children:"Profile Not Found"}),e.jsx("p",{className:"text-secondary text-sm",children:"We couldn't find your profile data."}),e.jsx(K,{to:"/user",className:"glass-cta px-6 py-3 rounded-xl font-semibold inline-block",children:"Back to Dashboard"})]})});const{basic:c={},medical:u={},lifestyle:x={}}=a,f=({title:w,icon:p,children:g,className:h=""})=>e.jsxs("div",{className:`glass rounded-2xl p-5 border soft-divider hover-glow-primary transition-all ${h}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-[rgba(var(--primary-rgb)/0.15)] text-primary flex items-center justify-center",children:e.jsx(p,{className:"text-base"})}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-text",children:w})]}),g]}),n=({label:w,value:p,icon:g})=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border soft-divider glass",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[g&&e.jsx(g,{className:"text-primary text-sm shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-text truncate",children:w})]}),e.jsx("span",{className:"text-sm text-secondary font-medium max-w-[60%] text-right truncate",children:p||"Not specified"})]}),j=({items:w})=>e.jsx("div",{className:"flex flex-wrap gap-2",children:w&&w.length>0?w.map((p,g)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary/90 dark:text-primary/80",children:p},g)):e.jsx("span",{className:"text-sm text-secondary italic",children:"None specified"})}),S=w=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${w?"bg-emerald-500/20 text-emerald-300":"bg-white/10 text-secondary"}`,children:w?"Yes":"No"});return e.jsx("div",{className:"min-h-screen bg-background aurora-bg px-3 sm:px-6 py-6 sm:py-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(K,{to:"/user",className:"glass rounded-xl border soft-divider px-4 py-2 flex items-center gap-2 text-sm font-medium hover-glow-primary",children:[e.jsx(as,{className:"text-primary"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text leading-tight",children:"Complete Profile"}),e.jsx("p",{className:"text-secondary text-sm",children:"Overview of your health data"})]})]}),e.jsxs(K,{to:"../edit-profile",className:"glass-cta flex items-center gap-2 px-5 py-3 rounded-xl font-semibold text-sm shadow-lg hover:shadow-primary/30 transition-shadow",children:[e.jsx(Be,{})," Edit Profile"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:[e.jsx(f,{title:"Basic Information",icon:Ce,children:e.jsxs("div",{className:"space-y-2.5",children:[e.jsx(n,{label:"Full Name",value:c.fullName,icon:Ce}),e.jsx(n,{label:"Gender",value:c.gender,icon:dt}),e.jsx(n,{label:"Date of Birth",value:c.dob?new Date(c.dob).toLocaleDateString():null,icon:Kt}),e.jsx(n,{label:"Contact Number",value:c.contactNumber,icon:ze})]})}),e.jsx(f,{title:"Physical Details",icon:Ue,children:e.jsxs("div",{className:"space-y-2.5",children:[e.jsx(n,{label:"Height",value:c!=null&&c.height?`${c.height.value} ${c.height.unit}`:null,icon:Ue}),e.jsx(n,{label:"Weight",value:c!=null&&c.weight?`${c.weight.value} ${c.weight.unit}`:null,icon:ss}),e.jsx(n,{label:"Blood Group",value:c.bloodGroup,icon:es})]})}),e.jsx(f,{title:"Emergency Contact",icon:ze,children:e.jsxs("div",{className:"space-y-2.5",children:[e.jsx(n,{label:"Name",value:(b=c==null?void 0:c.emergencyContact)==null?void 0:b.name,icon:Ce}),e.jsx(n,{label:"Phone",value:(v=c==null?void 0:c.emergencyContact)==null?void 0:v.number,icon:ze}),e.jsx(n,{label:"Relation",value:(C=c==null?void 0:c.emergencyContact)==null?void 0:C.relation})]})}),e.jsx(f,{title:"Chronic Conditions",icon:Je,children:e.jsx(j,{items:u==null?void 0:u.chronicConditions})}),e.jsx(f,{title:"Allergies",icon:mt,children:e.jsx(j,{items:u==null?void 0:u.allergies})}),e.jsx(f,{title:"Current Medications",icon:xt,children:e.jsx(j,{items:u==null?void 0:u.currentMedications})}),e.jsx(f,{title:"Disabilities",icon:ut,children:e.jsx(j,{items:u==null?void 0:u.disabilities})}),e.jsx(f,{title:"Vision & Hearing",icon:Ge,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2.5",children:[e.jsxs("div",{className:"flex-1 p-3 rounded-lg border soft-divider glass flex items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-text flex items-center gap-2",children:[e.jsx(Ge,{className:"text-primary"}),"Wears Glasses"]}),S((D=u==null?void 0:u.vision)==null?void 0:D.wearsGlasses)]}),e.jsxs("div",{className:"flex-1 p-3 rounded-lg border soft-divider glass flex items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-text flex items-center gap-2",children:[e.jsx(ht,{className:"text-primary"}),"Hearing Aids"]}),S(u==null?void 0:u.hearingAids)]})]}),((k=u==null?void 0:u.vision)==null?void 0:k.wearsGlasses)&&e.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[e.jsx(n,{label:"Left Eye",value:(m=u==null?void 0:u.vision)==null?void 0:m.leftEye}),e.jsx(n,{label:"Right Eye",value:(N=u==null?void 0:u.vision)==null?void 0:N.rightEye})]})]})}),e.jsx(f,{title:"Lifestyle Habits",icon:pt,children:e.jsx(j,{items:x==null?void 0:x.habits})}),e.jsx(f,{title:"Dietary Preferences",icon:gt,children:e.jsx(j,{items:x==null?void 0:x.preferences})})]}),e.jsx("div",{className:"mt-10 text-center",children:e.jsx("p",{className:"text-[11px] text-secondary tracking-wide uppercase",children:"End of Profile ‚Ä¢ Keep your information up to date"})})]})})}const yr=()=>{const s=ft();return d.useLayoutEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.scrollTo({top:0,left:0,behavior:"auto"}),document.documentElement.scrollTop=0,document.body.scrollTop=0,Promise.resolve().then(()=>{window.scrollTo({top:0,left:0,behavior:"auto"}),document.documentElement.scrollTop=0,document.body.scrollTop=0})},[s.pathname]),null},jr=()=>{const s=ft(),[a,t]=d.useState(1),l=d.useRef(s.pathname);return d.useEffect(()=>{const i=l.current,r=s.pathname;t(r.length>i.length?1:-1),l.current=r},[s]),e.jsxs("div",{className:"relative min-h-screen w-full bg-background text-text",children:[e.jsx(yr,{}),e.jsxs(Xt,{location:s,children:[e.jsx(Q,{path:"/",element:e.jsx(Ma,{})}),e.jsx(Q,{path:"/signup",element:e.jsx(za,{})}),e.jsx(Q,{path:"/login",element:e.jsx(Ya,{})}),e.jsxs(Q,{path:"/user",element:e.jsx(Gs,{children:e.jsx(Wa,{})}),children:[e.jsx(Q,{index:!0,element:e.jsx(qa,{})}),e.jsx(Q,{path:"onboarding",element:e.jsx(fr,{})}),e.jsx(Q,{path:"medical-history",element:e.jsx(Ba,{})}),e.jsx(Q,{path:"edit-profile",element:e.jsx(mr,{})}),e.jsx(Q,{path:"view-profile",element:e.jsx(br,{})})]}),e.jsxs(Q,{path:"/doctor",element:e.jsx(Gs,{children:e.jsx(Va,{})}),children:[e.jsx(Q,{index:!0,element:e.jsx(Qa,{})}),e.jsx(Q,{path:"shared-profile/:shareId",element:e.jsx(Ja,{})})]})]},s.pathname)]})},vr=d.createContext();function Nr({children:s}){const[a,t]=d.useState(null),[l,i]=d.useState(!0),r=d.useCallback(async()=>{if(!ae.currentUser){console.log("No user ID found");return}console.log("Refreshing user profile"),i(!0);try{const o=await Ie(ae.currentUser.uid);t({uid:ae.currentUser.uid,...o})}catch(o){console.error("Error refreshing user profile:",o)}finally{i(!1)}},[]);return d.useEffect(()=>{const o=ae.onAuthStateChanged(async c=>{if(i(!0),c){const u=await Ie(c.uid);t({uid:c.uid,...u})}else t(null);i(!1)});return()=>o()},[]),e.jsx(vr.Provider,{value:{userProfileState:a,refreshUserProfile:r,loading:l},children:s})}Qt.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(Jt,{children:e.jsx(wa,{children:e.jsx(Nr,{children:e.jsx(jr,{})})})})}));
