import{f as P,r as i,j as e,W as y,x as _,X as U,Y as L,g as H,O as R,Z as T,F as $,_ as q,y as z,L as D}from"./vendor-B8hWb8lf.js";import{u as I}from"./index-CTefgPQJ.js";import{N as w}from"./Navbar-gTPHZHyK.js";import{m as s}from"./framer-CjQtnr63.js";import"./vendor-libs-BUKHmL5v.js";import"./firebase-DrKyEM-o.js";function Y(){const d=P(),{signup:j,user:u,userRole:c,loading:x}=I(),[h,v]=i.useState(!1),[N,k]=i.useState(!1);i.useEffect(()=>{h||!x&&u&&c&&d(c==="doctor"?"/doctor":"/user")},[u,c,x,d,h]);const[r,m]=i.useState({name:"",email:"",password:"",role:"user"}),[p,n]=i.useState(""),[f,S]=i.useState(!1),[o,F]=i.useState("weak");if(x)return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-primary",children:"Loading..."})})})]});const C=t=>{let a=0;return t.length>=6&&a++,/[A-Z]/.test(t)&&a++,/[0-9]/.test(t)&&a++,/[^A-Za-z0-9]/.test(t)&&a++,a>=4?"strong":a>=2?"moderate":"weak"},A=t=>{const a=t.target.value;m(l=>({...l,password:a})),F(C(a))},b=t=>{m({...r,[t.target.name]:t.target.value}),n("")},g=t=>{m(a=>({...a,role:t}))},E=async t=>{var a;if(t.preventDefault(),o==="weak"){n("Please choose a stronger password (include uppercase, numbers, symbols).");return}try{v(!0),await j(r.name,r.email,r.password,r.role),k(!0);const l=r.role==="doctor"?"/doctor":"/user/onboarding";setTimeout(()=>{d(l)},1400)}catch(l){console.error("Signup failed:",l.message),console.error("Full error:",l),l.code==="auth/email-already-in-use"?n("An account with this email already exists."):(a=l.code)!=null&&a.startsWith("firestore/")?n("Account created but profile setup failed. Please try logging in."):n("Signup failed. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-secondary/10 via-background to-primary/10 flex",children:[e.jsxs(s.div,{className:"hidden lg:flex lg:w-1/2 flex-col justify-center items-center p-12 relative overflow-hidden",initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8},children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[e.jsx("div",{className:"absolute top-16 right-16 w-36 h-36 bg-secondary/20 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-16 left-16 w-44 h-44 bg-primary/20 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-1/3 right-1/4 w-28 h-28 bg-accent/20 rounded-full blur-lg"})]}),e.jsx("div",{className:"relative z-10 mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-52 h-52 bg-gradient-to-br from-secondary to-primary rounded-3xl flex items-center justify-center shadow-2xl transform -rotate-6",children:e.jsx("div",{className:"w-36 h-36 bg-white rounded-2xl flex items-center justify-center",children:e.jsx(y,{className:"text-7xl text-secondary"})})}),e.jsx(s.div,{className:"absolute -top-6 -left-6 w-18 h-18 bg-primary rounded-2xl flex items-center justify-center shadow-lg",animate:{x:[-3,3,-3]},transition:{duration:4,repeat:1/0},children:e.jsx(_,{className:"text-2xl text-white"})}),e.jsx(s.div,{className:"absolute -bottom-6 -right-6 w-18 h-18 bg-accent rounded-2xl flex items-center justify-center shadow-lg",animate:{x:[3,-3,3]},transition:{duration:4,repeat:1/0,delay:1.5},children:e.jsx(U,{className:"text-2xl text-white"})})]})}),e.jsxs("div",{className:"space-y-6 text-center max-w-md",children:[e.jsx("h1",{className:"text-4xl font-bold text-secondary mb-2",children:"Join HealSync"}),e.jsx("p",{className:"text-lg text-text/80 mb-8",children:"Start your journey to better healthcare management"})]})]}),e.jsx(s.div,{className:"w-full lg:w-1/2 flex items-center justify-center p-6 lg:p-12 ",initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8},children:e.jsxs("div",{className:"w-full max-w-md",children:[N&&e.jsx(s.div,{initial:{opacity:0,x:40,y:-20},animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:20,y:-10},role:"alert",className:"fixed top-5 right-5 z-50 px-5 py-4 rounded-2xl shadow-xl bg-primary text-white text-sm font-medium flex items-center gap-2 max-w-[90vw] sm:max-w-xs w-auto",style:{pointerEvents:"auto"},children:e.jsx("span",{children:"Account created successfully! Redirectingâ€¦"})}),e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx(s.div,{className:"w-20 h-20 bg-gradient-to-br from-secondary to-primary rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:e.jsx(y,{className:"text-3xl text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-secondary",children:"HealSync"}),e.jsx("p",{className:"text-text/70",children:"Start creating your account"})]}),e.jsxs(s.form,{onSubmit:E,className:"bg-white/90 dark:bg-white/5 backdrop-blur-xl border border-accent-40 p-8 rounded-3xl shadow-2xl dark:shadow-white/5 space-y-6",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl lg:text-3xl font-bold text-secondary",children:"Create Account"}),e.jsx("p",{className:"text-text/70 mt-2",children:"Choose your account type and get started"})]}),e.jsxs("div",{className:"flex gap-3 p-2 bg-gray-100/80 dark:bg-white/5 rounded-2xl backdrop-blur-sm",children:[e.jsxs("button",{type:"button",onClick:()=>g("user"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition-all duration-300 ${r.role==="user"?"bg-white dark:bg-white/10 text-primary dark:text-primary shadow-lg dark:shadow-[0_4px_8px_0_rgba(255,255,255,0.10)] transform scale-105 backdrop-blur-sm":"text-text/70 hover:text-primary hover:bg-white/50 dark:hover:bg-white/5"}`,children:[e.jsx(L,{className:"text-sm"}),e.jsx("span",{className:"text-sm",children:"User"})]}),e.jsxs("button",{type:"button",onClick:()=>g("doctor"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition-all duration-300 ${r.role==="doctor"?"bg-white dark:bg-white/10 text-primary dark:text-primary shadow-lg dark:shadow-[0_4px_8px_0_rgba(255,255,255,0.10)] transform scale-105 backdrop-blur-sm":"text-text/70 hover:text-primary hover:bg-white/50 dark:hover:bg-white/5"}`,children:[e.jsx(H,{className:"text-sm"}),e.jsx("span",{className:"text-sm",children:"Doctor"})]})]}),p&&e.jsx(s.div,{className:"bg-red-50 border border-red-200 text-red-700 text-sm px-4 py-3 rounded-xl",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:p}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text/80",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(R,{className:"text-text drop-shadow-none"})}),e.jsx("input",{name:"name",type:"text",placeholder:"Enter your full name",required:!0,value:r.name,onChange:b,className:"w-full pl-12 pr-4 py-4 bg-gray-50/80 dark:bg-white/5 border border-gray-200/60 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] focus:border dark:focus:border-[var(--color-primary)] transition-all backdrop-blur-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text/80",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(T,{className:"text-text drop-shadow-none"})}),e.jsx("input",{name:"email",type:"email",placeholder:"Enter your email",required:!0,value:r.email,onChange:b,className:"w-full pl-12 pr-4 py-4 bg-gray-50/80 dark:bg-white/5 border border-gray-200/60 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] focus:border dark:focus:border-[var(--color-primary)] transition-all backdrop-blur-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text/80",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx($,{className:"text-text drop-shadow-none"})}),e.jsx("input",{name:"password",type:f?"text":"password",placeholder:"Create a strong password",required:!0,value:r.password,onChange:A,className:"w-full pl-12 pr-12 py-4 bg-gray-50/80 dark:bg-white/5 border border-gray-200/60 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] focus:border dark:focus:border-[var(--color-primary)] transition-all backdrop-blur-sm"}),e.jsx("button",{type:"button",onClick:()=>S(t=>!t),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-text/50 hover:text-secondary transition-colors",children:f?e.jsx(q,{}):e.jsx(z,{})})]}),r.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-text/60",children:"Password Strength:"}),e.jsx("span",{className:`text-xs font-semibold ${o==="weak"?"text-red-500":o==="moderate"?"text-yellow-500":"text-green-500"}`,children:o.charAt(0).toUpperCase()+o.slice(1)})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${o==="weak"?"bg-red-500 w-1/3":o==="moderate"?"bg-yellow-500 w-2/3":"bg-green-500 w-full"}`})})]})]}),e.jsxs(s.button,{type:"submit",className:"w-full bg-primary text-white py-4 rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",whileHover:{scale:1.02},whileTap:{scale:.98},children:["Create ",r.role==="doctor"?"Doctor":"User"," Account"]}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs("p",{className:"text-text/70",children:["Already have an account?"," ",e.jsx(D,{to:"/login",className:"text-secondary font-semibold hover:underline transition-all",children:"Sign In"})]})})]})]})})]})]})}export{Y as default};
