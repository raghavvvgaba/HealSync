import{r as l,j as e,a5 as F,h as v,a6 as P,a7 as C,f as E,H,O as N,a8 as L,y as U,D as b,x as y,P as R,Q as M,a9 as G,$ as O,S as w,T}from"./vendor-B8hWb8lf.js";import{u as j,d as D,c as $}from"./index-CTefgPQJ.js";import{d as S,b as I}from"./firebase-DrKyEM-o.js";import{A as Y}from"./AIHealthAssistant-rGApX4EK.js";import"./vendor-libs-BUKHmL5v.js";import"./geminiService-DKIwBfzq.js";import"./utils-BpRkNtKl.js";function B(){const{user:t}=j(),[a,r]=l.useState(null),[d,n]=l.useState(!0),[i,c]=l.useState(!1);l.useEffect(()=>{(async()=>{if(t)try{const m=S(D,"users",t.uid),s=await I(m);s.exists()&&s.data().doctorId&&r(s.data().doctorId)}catch(m){console.error("Error fetching doctor ID:",m)}finally{n(!1)}})()},[t]);const o=async()=>{if(a)try{await navigator.clipboard.writeText(a),c(!0),setTimeout(()=>c(!1),2e3)}catch(x){console.error("Failed to copy doctor ID:",x)}},f=async()=>{if(a)try{navigator.share?await navigator.share({title:"HealSync Doctor ID",text:`Here is my Doctor ID: ${a}
Use HealSync to share your records with me.`,url:window.location.origin}):await o()}catch{await o()}};return d?e.jsx("div",{className:"glass-elevated rounded-3xl p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-5 bg-[rgba(var(--primary-rgb)/0.25)] rounded w-1/3 mb-3"}),e.jsx("div",{className:"h-10 bg-[rgba(var(--surface-rgb)/0.2)] rounded w-2/3"})]})}):a?e.jsxs("div",{className:"glass-elevated rounded-3xl overflow-hidden hover-glow-primary",children:[e.jsx("div",{className:"p-6 border-b soft-divider bg-gradient-to-r from-primary/15 to-accent/15",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-primary to-accent text-white flex items-center justify-center",children:e.jsx(F,{})}),e.jsx("h3",{className:"text-lg font-semibold text-text",children:"Your Doctor ID"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:f,className:"inline-flex sm:hidden items-center justify-center w-9 h-9 rounded-full glass border soft-divider text-primary hover:brightness-110",title:"Share with Patients","aria-label":"Share with Patients",children:e.jsx(v,{className:"text-sm"})}),e.jsx("span",{className:"hidden sm:inline-flex px-3 py-1.5 rounded-full text-xs text-primary bg-[rgba(var(--primary-rgb)/0.15)] border soft-divider",children:"Share with Patients"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsxs("div",{className:"flex-1 rounded-2xl p-4 border soft-divider glass",children:[e.jsx("div",{className:"text-secondary text-xs mb-1",children:"Doctor ID"}),e.jsx("code",{className:"text-xl font-mono font-bold text-primary tracking-wider",children:a})]}),e.jsxs("button",{onClick:o,className:`glass-cta flex items-center gap-2 px-5 py-3 ${i?"brightness-110":""}`,title:"Copy Doctor ID",children:[i?e.jsx(P,{className:"text-sm"}):e.jsx(C,{className:"text-sm"}),i?"Copied!":"Copy"]})]}),e.jsxs("div",{className:"rounded-2xl p-5 border soft-divider glass",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-primary",children:[e.jsx(v,{}),e.jsx("h4",{className:"font-medium",children:"How patients can share with you:"})]}),e.jsxs("ol",{className:"text-sm text-secondary space-y-2 ml-5 list-decimal",children:[e.jsxs("li",{children:["Ask your patients to use the ",e.jsx("span",{className:"text-primary font-medium",children:'"Share to Doctor"'})," button on their profile"]}),e.jsxs("li",{children:["They should enter your Doctor ID: ",e.jsx("code",{className:"px-2 py-0.5 rounded bg-[rgba(var(--primary-rgb)/0.15)] text-primary font-mono text-xs border soft-divider",children:a})]}),e.jsx("li",{children:"You'll receive instant access to their medical records and profile"})]})]})]})]}):e.jsxs("div",{className:"glass-elevated rounded-3xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text mb-2",children:"Doctor ID Not Found"}),e.jsx("p",{className:"text-secondary text-sm",children:"Your doctor ID was not found. Please contact support if this issue persists."})]})}function Q(){const{user:t}=j(),a=E(),[r,d]=l.useState([]),[n,i]=l.useState(!0),[c,o]=l.useState(null);l.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{i(!0);const s=await $(t.uid);if(s.success){const u=await Promise.all(s.data.map(async h=>{try{const g=S(D,"users",h.patientId),p=await I(g),A=p.exists()?p.data().name:"Unknown Patient",k=p.exists()?p.data().email:"";return{...h,patientName:A,patientEmail:k}}catch(g){return console.error(`Error fetching patient data for ${h.patientId}:`,g),{...h,patientName:"Unknown Patient",patientEmail:""}}}));d(u)}else o(s.error)}catch(s){console.error("Error fetching shared profiles:",s),o("Failed to load shared profiles")}finally{i(!1)}},x=s=>{a(`/doctor/shared-profile/${s}`)},m=s=>{if(!s)return"Unknown";try{return(s.toDate?s.toDate():new Date(s)).toLocaleDateString()}catch{return"Unknown"}};return n?e.jsx("div",{className:"glass-elevated rounded-3xl p-8",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(H,{className:"animate-spin text-2xl text-primary mr-2"}),e.jsx("span",{className:"text-secondary",children:"Loading shared profiles..."})]})}):c?e.jsxs("div",{className:"glass-elevated rounded-3xl p-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-text mb-2",children:"Error Loading Profiles"}),e.jsx("p",{className:"text-secondary text-sm",children:c})]}):r.length===0?e.jsxs("div",{className:"glass-elevated rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b soft-divider bg-gradient-to-r from-primary/15 to-accent/15",children:e.jsx("h2",{className:"text-xl font-bold text-text",children:"Shared Patient Records"})}),e.jsxs("div",{className:"text-center py-12 px-6",children:[e.jsx(N,{className:"text-4xl mx-auto mb-4 text-primary/70"}),e.jsx("p",{className:"text-lg text-text mb-2",children:"No patient records shared yet."}),e.jsx("p",{className:"text-sm text-secondary",children:"Share your Doctor ID with patients to receive their medical records."})]})]}):e.jsxs("div",{className:"glass-elevated rounded-3xl overflow-hidden hover-glow-primary",children:[e.jsx("div",{className:"p-6 border-b soft-divider bg-gradient-to-r from-primary/15 to-accent/15",children:e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-text",children:["Shared Patient Records (",r.length,")"]})}),e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:r.map(s=>e.jsx("div",{className:"glass rounded-xl sm:rounded-2xl p-4 sm:p-5 border soft-divider transition-all lift-on-hover hover-glow-primary",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1.5 sm:mb-2 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-[rgba(var(--primary-rgb)/0.15)] text-primary flex items-center justify-center shrink-0",children:e.jsx(N,{})}),e.jsx("h3",{className:"font-semibold text-text truncate",children:s.patientName})]}),e.jsx("p",{className:"text-xs sm:text-sm text-secondary mb-1 truncate",children:s.patientEmail}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] sm:text-xs text-secondary",children:[e.jsx(L,{}),e.jsxs("span",{children:["Shared on ",m(s.sharedAt)]})]})]}),e.jsxs("button",{onClick:()=>x(s.id),className:"glass-cta flex items-center justify-center gap-2 w-full sm:w-auto px-4 sm:px-5 py-2 sm:py-2.5",children:[e.jsx(U,{className:"text-sm"}),e.jsx("span",{className:"text-sm sm:text-base",children:"View Profile"})]})]})},s.id))})})]})}function Z(){var n;const{user:t}=j(),[a,r]=l.useState(!1),d=()=>{const i=new Date().getHours();return i<12?"Good Morning":i<17?"Good Afternoon":"Good Evening"};return e.jsxs("div",{className:"min-h-screen bg-background aurora-bg",children:[e.jsx("div",{className:"relative bg-gradient-to-br from-primary/25 via-accent/20 to-transparent px-3 sm:px-6 pt-6 sm:pt-8 pb-4 sm:pb-6 border-b soft-divider",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 sm:gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 sm:gap-5",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl glass flex items-center justify-center shadow-lg",children:e.jsx(b,{className:"text-primary text-xl sm:text-2xl"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-text leading-tight break-words",children:[d(),", ",e.jsxs("span",{className:"text-primary",children:["Dr. ",(t==null?void 0:t.displayName)||((n=t==null?void 0:t.email)==null?void 0:n.split("@")[0])||"Doctor"]})]}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 glass rounded-full px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm text-secondary",children:[e.jsx(y,{className:"text-accent"}),"Manage patient care with precision"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"glass rounded-xl sm:rounded-2xl px-4 sm:px-5 py-2.5 sm:py-3 flex items-center gap-3 shadow-lg",children:[e.jsx(R,{className:"text-primary shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-secondary",children:"Today"}),e.jsx("div",{className:"text-xs sm:text-sm font-semibold text-text truncate",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]}),e.jsxs("button",{className:"relative rounded-xl sm:rounded-2xl px-3 sm:px-4 py-2 sm:py-3 text-white shadow-xl bg-gradient-to-r from-accent to-accent/80 hover:from-accent/90 hover:to-accent/70 transition-all",children:[e.jsx(M,{className:"text-base sm:text-lg"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 sm:w-3.5 sm:h-3.5 rounded-full bg-accent shadow"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 py-6 sm:py-8 grid grid-cols-1 lg:grid-cols-12 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"glass-elevated rounded-2xl sm:rounded-3xl p-4 sm:p-6 hover-glow-primary",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-text mb-4 sm:mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gradient-to-r from-primary to-accent text-white flex items-center justify-center",children:e.jsx(G,{className:"text-xs sm:text-sm"})}),"Quick Actions"]}),e.jsxs("div",{className:"flex md:grid md:grid-cols-3 gap-3 sm:gap-4 overflow-x-auto md:overflow-visible snap-x snap-mandatory pb-2 -mx-1 px-1",children:[e.jsxs("button",{className:"group glass rounded-xl sm:rounded-2xl p-4 sm:p-6 lift-on-hover hover-glow-primary transition-all border soft-divider snap-start min-w-[240px] md:min-w-0",children:[e.jsx(O,{className:"text-primary text-xl sm:text-2xl mb-2"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-text text-base sm:text-[1.05rem]",children:"View All Patients"}),e.jsx("div",{className:"text-secondary text-xs sm:text-sm mt-1",children:"Manage patient records"})]})]}),e.jsxs("button",{className:"group rounded-xl sm:rounded-2xl p-4 sm:p-6 lift-on-hover hover-glow-accent transition-all border soft-divider bg-gradient-to-br from-accent/25 to-accent/10 snap-start min-w-[240px] md:min-w-0",children:[e.jsx(y,{className:"text-accent text-xl sm:text-2xl mb-2"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-text text-base sm:text-[1.05rem]",children:"Schedule Appointment"}),e.jsx("div",{className:"text-secondary text-xs sm:text-sm mt-1",children:"Book new consultations"})]})]}),e.jsxs("button",{className:"group glass rounded-xl sm:rounded-2xl p-4 sm:p-6 lift-on-hover hover-glow-primary transition-all border soft-divider snap-start min-w-[240px] md:min-w-0",children:[e.jsx(b,{className:"text-secondary text-xl sm:text-2xl mb-2"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-text text-base sm:text-[1.05rem]",children:"Medical Reports"}),e.jsx("div",{className:"text-secondary text-xs sm:text-sm mt-1",children:"Generate & view reports"})]})]})]})]}),e.jsx("div",{className:"min-w-0",children:e.jsx(Q,{})})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6 sm:space-y-8 min-w-0",children:[e.jsx(B,{}),e.jsxs("div",{className:"glass rounded-2xl p-5 sm:p-6 border soft-divider hover-glow-primary",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(w,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-text",children:"AI Health Assistant"}),e.jsx("p",{className:"text-xs text-secondary",children:"Medical reference & support"})]})]}),e.jsx("p",{className:"text-sm text-secondary leading-relaxed mb-4",children:"Access medical reference information, get explanations of conditions and treatments, and stay updated with health guidelines."}),e.jsxs("button",{onClick:()=>r(!0),className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(T,{}),"Consult AI Assistant"]})]})]})]}),e.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full shadow-2xl hover:scale-110 transition-all duration-300 flex items-center justify-center z-40 lg:hidden",title:"Open AI Health Assistant",children:e.jsx(w,{className:"text-xl"})}),e.jsx(Y,{isOpen:a,onClose:()=>r(!1)})]})}export{Z as default};
